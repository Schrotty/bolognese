!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){(function(n){var o;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var a=t._howls[n]._soundById(o[r]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||i;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var a=t._howls[n]._soundById(o[r]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||i,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||i,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator?e._navigator.userAgent:"",r=o.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33,s=-1!==o.indexOf("Safari")&&-1===o.indexOf("Chrome"),u=o.match(/Version\/(.*?) /),d=s&&u&&parseInt(u[1],10)<15;return e._codecs={mp3:!(a||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(d||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(d||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),a=0;a<i.length;a++){var s=e._howls[r]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||i;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var i=new r,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return i.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=i.usingWebAudio&&!t._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(i.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,o;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(o=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(o))||(n=/\.([^.]+)$/.exec(o.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&i.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&d(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var r=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(r++,o=n._sounds[a]._id);1===r?e=null:o=null}}var s=o?n._soundById(o):n._inactiveSound();if(!s)return null;if(o&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(o&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&i._autoResume();var d=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-d),c=1e3*l/Math.abs(s._rate),_=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=d,s._start=_,s._stop=p,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(d>=p)){var h=s._node;if(n._webAudio){var m=function(){n._playLock=!1,f(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;h.gain.setValueAtTime(e,i.ctx.currentTime),s._playStart=i.ctx.currentTime,void 0===h.bufferSource.start?s._loop?h.bufferSource.noteGrainOn(0,d,86400):h.bufferSource.noteGrainOn(0,d,l):s._loop?h.bufferSource.start(0,d,86400):h.bufferSource.start(0,d,l),c!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),c)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var v=function(){h.currentTime=d,h.muted=s._muted||n._muted||i._muted||h.muted,h.volume=s._volume*i.volume(),h.playbackRate=s._rate;try{var o=h.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(n._playLock=!0,f(),o.then((function(){n._playLock=!1,h._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,f(),n._emit("play",s._id)),h.playbackRate=s._rate,h.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),c):(n._endTimers[s._id]=function(){n._ended(s),h.removeEventListener("ended",n._endTimers[s._id],!1)},h.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=n._src,h.load());var y=window&&window.ejecta||!h.readyState&&i._navigator.isCocoonJS;if(h.readyState>=3||y)v();else{n._playLock=!0,n._state="loading";var g=function(){n._state="loaded",v(),h.removeEventListener(i._canPlayEvent,g,!1)};h.addEventListener(i._canPlayEvent,g,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),r=0;r<o.length;r++){var a=n._soundById(o[r]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,i.ctx.currentTime):a._node&&(a._node.muted=!!i._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._volume;if(1===r.length||2===r.length&&void 0===r[1]){var a=o._getSoundIds(),s=a.indexOf(r[0]);s>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?o._soundById(t):o._sounds[0])?n._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,r)}}),o;void 0===t&&(o._volume=e),t=o._getSoundIds(t);for(var u=0;u<t.length;u++)(n=o._soundById(t[u]))&&(n._volume=e,r[2]||o._stopFade(t[u]),o._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,i.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*i.volume()),o._emit("volume",n._id));return o},fade:function(e,t,n,o){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,o)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),r.volume(e,o);for(var a=r._getSoundIds(o),s=0;s<a.length;s++){var u=r._soundById(a[s]);if(u){if(o||r._stopFade(a[s]),r._webAudio&&!u._muted){var d=i.ctx.currentTime,l=d+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,d),u._node.gain.linearRampToValueAtTime(t,l)}r._startFadeInterval(u,e,t,n,a[s],void 0===o)}}return r},_startFadeInterval:function(e,t,n,o,r,i){var a=this,s=t,u=n-t,d=Math.abs(u/.01),l=Math.max(4,d>0?o/d:o),c=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-c)/o;c=Date.now(),s+=u*r,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),i&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),l)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=o._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],o._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=o._getSoundIds(t),a=0;a<i.length;a++)(n=o._soundById(i[a]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,o.playing(i[a])&&(o.pause(i[a],!0),o.play(i[a],!0)))));return o},rate:function(){var e,t,n,o=this,r=arguments;if(0===r.length)t=o._sounds[0]._id;else if(1===r.length){var a=o._getSoundIds(),s=a.indexOf(r[0]);s>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(n=o._soundById(t))?n._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,r)}}),o;void 0===t&&(o._rate=e),t=o._getSoundIds(t);for(var u=0;u<t.length;u++)if(n=o._soundById(t[u])){o.playing(t[u])&&(n._rateSeek=o.seek(t[u]),n._playStart=o._webAudio?i.ctx.currentTime:n._playStart),n._rate=e,o._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,i.ctx.currentTime):n._node&&(n._node.playbackRate=e);var d=o.seek(t[u]),l=(o._sprite[n._sprite][0]+o._sprite[n._sprite][1])/1e3-d,c=1e3*l/Math.abs(n._rate);!o._endTimers[t[u]]&&n._paused||(o._clearTimer(t[u]),o._endTimers[t[u]]=setTimeout(o._ended.bind(o,n),c)),o._emit("rate",n._id)}return o},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)n._sounds.length&&(t=n._sounds[0]._id);else if(1===o.length){var r=n._getSoundIds(),a=r.indexOf(o[0]);a>=0?t=parseInt(o[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?i.ctx.currentTime-s._playStart:0,d=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(d+u*Math.abs(s._rate))}return s._node.currentTime}var l=n.playing(t);l&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var c=function(){l&&n.play(t,!0),n._emit("seek",t)};if(l&&!n._webAudio){var _=function(){n._playLock?setTimeout(_,0):c()};setTimeout(_,0)}else c()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(i._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),i._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var o=i._howls.indexOf(e);o>=0&&i._howls.splice(o,1);var r=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===e._src||e._src.indexOf(i._howls[n]._src)>=0){r=!1;break}return u&&r&&delete u[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this["_on"+e];return"function"==typeof t&&r.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<o.length;r++){var i=n===o[r].id;if(t===o[r].fn&&i||!t&&i){o.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(this[a[r]])&&(this[a[r]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this["_on"+e],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,o[r].fn),0),o[r].once&&this.off(e,o[r].fn,o[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),o)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),i._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),this},_cleanBuffer:function(e){var t=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=i._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=i._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),this._node.gain.setValueAtTime(t,i.ctx.currentTime),this._node.paused=!0,this._node.connect(i.masterGain)):i.noAudio||(this._node=i._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(i._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*i.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(i._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var u={},d=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);c(o.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){i.setRequestHeader(t,e._xhr.headers[t])})),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?c(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},l(i)}},l=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},o=function(e){e&&t._sounds.length>0?(u[t._src]=e,_(t,e)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(o).catch(n):i.ctx.decodeAudioData(e,o,n)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(e){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),t=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var o=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!o&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0===(o=function(){return{Howler:i,Howl:a}}.apply(t,[]))||(e.exports=o),t.Howler=i,t.Howl=a,void 0!==n?(n.HowlerGlobal=r,n.Howler=i,n.Howl=a,n.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=i,window.Howl=a,window.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,i){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,o="number"!=typeof o?a[3]:o,r="number"!=typeof r?a[4]:r,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(this._orientation=[e,t,n,o,r,i],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,o,r,i),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var i=o._getSoundIds(n),a=0;a<i.length;a++){var s=o._soundById(i[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,o],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setPosition(e,n,o)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,o],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setOrientation(e,n,o)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,o,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(o=r._soundById(parseInt(i[0],10)))?o._pannerAttr:r._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var a=r._getSoundIds(n),s=0;s<a.length;s++)if(o=r._soundById(a[s])){var u=o._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var d=o._panner;d?(d.coneInnerAngle=u.coneInnerAngle,d.coneOuterAngle=u.coneOuterAngle,d.coneOuterGain=u.coneOuterGain,d.distanceModel=u.distanceModel,d.maxDistance=u.maxDistance,d.refDistance=u.refDistance,d.rolloffFactor=u.rolloffFactor,d.panningModel=u.panningModel):(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var o,r=n(0),i=function(){function e(){}return e.exists=function(){return localStorage.length>0},e.store=function(e,t){localStorage.setItem(e,t)},e.load=function(e){return localStorage.getItem(e)},e.loadBoolean=function(t){return JSON.parse(e.load(t))},e.exist=function(t){return null!=e.load(t)},e.storeIfNull=function(t,n){e.exist(t)||e.store(t,n)},e}();!function(e){e.Pomodoro="Pomodoro",e.LongBreak="Long Break",e.ShortBreak="Short Break"}(o||(o={}));var a=function(){function e(e){var t=this;this.initSettings(),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/worker.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),this.timerType=o.Pomodoro,this.timer=document.querySelector("#timer"),this.timerSub=document.querySelector("#timer-sub"),this.pomodoroButton=document.querySelector("#pomodoro-button"),this.pomodoroButton.addEventListener("click",(function(){return t.updateTimer(i.load("pomodoro"),o.Pomodoro)})),this.longBreakButton=document.querySelector("#l-break-button"),this.longBreakButton.addEventListener("click",(function(){return t.updateTimer(i.load("long-break"),o.LongBreak)})),this.shortBreakButton=document.querySelector("#s-break-button"),this.shortBreakButton.addEventListener("click",(function(){return t.updateTimer(i.load("short-break"),o.ShortBreak)})),this.pomodoroAutoCheckbox=document.querySelector("#pomodoro-auto-mode"),this.pomodoroAutoCheckbox.addEventListener("change",(function(){i.store("pomodoro_auto",t.pomodoroAutoCheckbox.checked)})),this.pomodoroBreaksInput=document.querySelector("#pomodoro-breaks"),this.pomodoroBreaksInput.addEventListener("change",(function(){i.store("max_break",t.pomodoroBreaksInput.value),i.store("cur_break",0)})),this.pomodoroAutoCheckbox.checked=JSON.parse(i.load("pomodoro_auto")),this.pomodoroBreaksInput.value=i.load("max_break"),this.alarmOverlay=document.querySelector("#alarm-overlay"),this.alarmOverlay.addEventListener("click",(function(){t.animateCSS("#test","bounceOut",(function(){t.alarmOverlay.classList.add("hidden")})),t.alarm.fade(i.load("volume"),0,2e3)})),this.infiniteAlarmCheckbox=document.querySelector("#infinite-alarm"),this.infiniteAlarmCheckbox.checked=i.loadBoolean("infinite-alarm"),this.infiniteAlarmCheckbox.addEventListener("change",(function(){i.store("infinite-alarm",t.infiniteAlarmCheckbox.checked)})),this.tabTimerCheckbox=document.querySelector("#tab-timer"),this.tabTimerCheckbox.checked=i.loadBoolean("tab-timer"),this.tabTimerCheckbox.addEventListener("change",(function(){i.store("tab-timer",t.tabTimerCheckbox.checked)})),this.notificationCheckbox=document.querySelector("#enable-notification"),this.notificationCheckbox.checked=i.loadBoolean("enable-notification"),this.notificationCheckbox.addEventListener("change",(function(){"default"===Notification.permission&&Notification.requestPermission(),i.store("enable-notification",t.notificationCheckbox.checked)})),document.querySelector("#start").addEventListener("click",(function(){return t.startTimer()})),document.querySelector("#stop").addEventListener("click",(function(){return t.stopTimer()})),document.querySelector("#reset").addEventListener("click",(function(){return t.resetTimer()})),document.querySelector("#settings").addEventListener("click",(function(){return t.overlayFadeIn()})),document.querySelector("#settings-close").addEventListener("click",(function(){return t.overlayFadeOut()})),document.querySelector("#c-pomodoro").addEventListener("change",(function(){i.store("pomodoro",document.querySelector("#c-pomodoro").value)})),document.querySelector("#c-l-break").addEventListener("change",(function(){i.store("long-break",document.querySelector("#c-l-break").value)})),document.querySelector("#c-s-break").addEventListener("change",(function(){i.store("short-break",document.querySelector("#c-s-break").value)})),document.querySelector("#custom-alarm").addEventListener("change",(function(){i.store("alarm",document.querySelector("#custom-alarm").value)})),document.querySelector("#volume-control").addEventListener("change",(function(){i.store("volume",document.querySelector("#volume-control").value)})),document.querySelector("#alarm-preview").addEventListener("click",(function(){new r.Howl({volume:i.load("volume"),html5:!0,src:["sounds/"+i.load("alarm")+".mp3"]}).play()})),document.querySelectorAll(".timer").forEach((function(e){return t.registerButtonhandle(e)})),this.indexAlarms(),window.localStorage||document.querySelector("#settings-button").remove(),document.querySelector("#c-pomodoro").value=i.load("pomodoro"),document.querySelector("#c-l-break").value=i.load("long-break"),document.querySelector("#c-s-break").value=i.load("short-break"),document.querySelector("#volume-control").value=i.load("volume"),this.time=e,this.updateTimer(this.time,o.Pomodoro)}return e.prototype.initTimer=function(){this.counter=60*this.time,this.display=this.time,this.sub_dis=0,this.is_ticking=!1},e.prototype.startTimer=function(){var e,t,n=this;this.is_ticking||("-"!=i.load("alarm")&&(this.alarm=new r.Howl({volume:i.load("volume"),html5:!1,loop:i.loadBoolean("infinite-alarm"),src:["sounds/"+i.load("alarm")+".mp3"]})),this.is_ticking=!0,this.interval=setInterval((function(){n.counter=n.counter-1,n.display=Math.floor(n.counter/60),0==n.sub_dis&&(n.sub_dis=60),n.sub_dis--,e=n.display.toString(),t=n.sub_dis.toString(),n.sub_dis<10&&(t="0"+n.sub_dis),n.display<10&&(e=0+n.display.toString()),n.timer.textContent=e,n.timerSub.textContent=t,i.loadBoolean("tab-timer")&&n.refreshTitle(e+":"+t),0===n.counter&&(n.alarm.play(),n.stopTimer(),i.loadBoolean("infinite-alarm")&&(n.alarmOverlay.classList.remove("hidden"),n.animateCSS("#alarm-overlay","bounceInDown",null)),JSON.parse(i.load("pomodoro_auto"))&&(n.timerType==o.Pomodoro&&(i.store("cur_break",+i.load("cur_break")+1),i.load("cur_break")<i.load("max_break")&&n.shortBreakButton.click(),i.load("cur_break")>=i.load("max_break")&&(i.store("cur_break",0),n.longBreakButton.click())),n.timerType!=o.ShortBreak&&n.timerType!=o.LongBreak||n.pomodoroButton.click()),n.resetTitle(),i.loadBoolean("enable-notification")&&n.constructNotification())}),1e3))},e.prototype.stopTimer=function(){this.is_ticking=!1,clearInterval(this.interval)},e.prototype.resetTimer=function(){this.stopTimer(),this.updateTimer(this.time)},e.prototype.updateTimer=function(e,t){this.stopTimer(),this.time=e,this.timerType=t;var n=e.toString();e<10&&(n=0+n),this.timer.textContent=n,this.timerSub.textContent="00",this.initTimer()},e.prototype.registerButtonhandle=function(e){e.addEventListener("click",(function(){document.querySelectorAll(".timer").forEach((function(e){return e.classList.remove("activated")})),e.classList.add("activated")}))},e.prototype.overlayFadeIn=function(){document.querySelector("#overlay").classList.remove("hidden"),this.animateCSS("#overlay","bounceInDown",null)},e.prototype.overlayFadeOut=function(){var e=document.querySelector("#overlay");this.animateCSS("#overlay","bounceOutUp",(function(){e.classList.add("hidden")})),this.is_ticking||this.refreshCurrentAlarm()},e.prototype.animateCSS=function(e,t,n){var o=document.querySelector(e);o.classList.add("animated",t),o.addEventListener("animationend",(function e(){o.classList.remove("animated",t),o.removeEventListener("animationend",e),"function"==typeof n&&n()}))},e.prototype.indexAlarms=function(){["-","Owl","Duck"].forEach((function(e){var t=document.createElement("option");t.value=e.toLowerCase(),t.text=e,i.load("alarm")===e.toLowerCase()&&(t.selected=!0),document.querySelector("#custom-alarm").add(t)}))},e.prototype.refreshCurrentAlarm=function(){this.timerType==o.Pomodoro&&this.pomodoroButton.click(),this.timerType==o.LongBreak&&this.longBreakButton.click(),this.timerType==o.ShortBreak&&this.shortBreakButton.click()},e.prototype.refreshTitle=function(e){document.title="BologneseTime - "+e},e.prototype.resetTitle=function(){document.title="BologneseTime"},e.prototype.initSettings=function(){i.storeIfNull("pomodoro",25),i.storeIfNull("long-break",20),i.storeIfNull("short-break",5),i.storeIfNull("alarm","owl"),i.storeIfNull("volume",.5),i.storeIfNull("pomodoro_auto",!1),i.storeIfNull("max_break",4),i.storeIfNull("cur_break",0),i.storeIfNull("tab-timer",!1),i.storeIfNull("infinite-alarm",!1),i.storeIfNull("enable-notification",!1)},e.prototype.constructNotification=function(){if("granted"===Notification.permission){var e=this.timerType.toString()+" finished!",t="Your timer has finished!";if(i.loadBoolean("pomodoro_auto")){var n=+i.load("cur_break"),o=+i.load("max_break"),r=o-n;t="Just "+r+" more pomodoro session(s) till a long break!",r===o&&(t="You've earned you a long break!")}this.notification=new Notification(e,{body:t,icon:"android-chrome-192x192.png"})}},e}();window.addEventListener("DOMContentLoaded",(function(){var e=i.load("pomodoro");new a(null!=e?e:"25")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy90cy90aW1lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2V0dGluZ3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiSG93bGVyR2xvYmFsIiwidGhpcyIsImluaXQiLCJzZWxmIiwiSG93bGVyIiwiX2NvdW50ZXIiLCJfaHRtbDVBdWRpb1Bvb2wiLCJodG1sNVBvb2xTaXplIiwiX2NvZGVjcyIsIl9ob3dscyIsIl9tdXRlZCIsIl92b2x1bWUiLCJfY2FuUGxheUV2ZW50IiwiX25hdmlnYXRvciIsIndpbmRvdyIsIm5hdmlnYXRvciIsIm1hc3RlckdhaW4iLCJub0F1ZGlvIiwidXNpbmdXZWJBdWRpbyIsImF1dG9TdXNwZW5kIiwiY3R4IiwiYXV0b1VubG9jayIsIl9zZXR1cCIsInZvbHVtZSIsInZvbCIsInBhcnNlRmxvYXQiLCJzZXR1cEF1ZGlvQ29udGV4dCIsImdhaW4iLCJzZXRWYWx1ZUF0VGltZSIsImN1cnJlbnRUaW1lIiwibGVuZ3RoIiwiX3dlYkF1ZGlvIiwiaWRzIiwiX2dldFNvdW5kSWRzIiwiaiIsInNvdW5kIiwiX3NvdW5kQnlJZCIsIl9ub2RlIiwibXV0ZSIsIm11dGVkIiwic3RvcCIsInVubG9hZCIsImNsb3NlIiwiY29kZWNzIiwiZXh0IiwicmVwbGFjZSIsInN0YXRlIiwiX2F1dG9TdXNwZW5kIiwiQXVkaW8iLCJvbmNhbnBsYXl0aHJvdWdoIiwiZSIsIl9zZXR1cENvZGVjcyIsImF1ZGlvVGVzdCIsImVyciIsImNhblBsYXlUeXBlIiwibXBlZ1Rlc3QiLCJ1YSIsInVzZXJBZ2VudCIsImNoZWNrT3BlcmEiLCJtYXRjaCIsImlzT2xkT3BlcmEiLCJwYXJzZUludCIsInNwbGl0IiwiY2hlY2tTYWZhcmkiLCJpbmRleE9mIiwic2FmYXJpVmVyc2lvbiIsImlzT2xkU2FmYXJpIiwibXAzIiwibXBlZyIsIm9wdXMiLCJvZ2ciLCJvZ2EiLCJ3YXYiLCJhYWMiLCJjYWYiLCJtNGEiLCJtNGIiLCJtcDQiLCJ3ZWJhIiwid2VibSIsImRvbGJ5IiwiZmxhYyIsIl91bmxvY2tBdWRpbyIsIl9hdWRpb1VubG9ja2VkIiwiX21vYmlsZVVubG9hZGVkIiwic2FtcGxlUmF0ZSIsIl9zY3JhdGNoQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwidW5sb2NrIiwiYXVkaW9Ob2RlIiwiX3VubG9ja2VkIiwiX3JlbGVhc2VIdG1sNUF1ZGlvIiwibG9hZCIsIl9hdXRvUmVzdW1lIiwic291cmNlIiwiY3JlYXRlQnVmZmVyU291cmNlIiwiYnVmZmVyIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwic3RhcnQiLCJub3RlT24iLCJyZXN1bWUiLCJvbmVuZGVkIiwiZGlzY29ubmVjdCIsImRvY3VtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9lbWl0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vYnRhaW5IdG1sNUF1ZGlvIiwicG9wIiwidGVzdFBsYXkiLCJwbGF5IiwiUHJvbWlzZSIsInRoZW4iLCJjYXRjaCIsImNvbnNvbGUiLCJ3YXJuIiwiYXVkaW8iLCJwdXNoIiwic3VzcGVuZCIsIl9zb3VuZHMiLCJfcGF1c2VkIiwiX3N1c3BlbmRUaW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJoYW5kbGVTdXNwZW5zaW9uIiwiX3Jlc3VtZUFmdGVyU3VzcGVuZCIsIkhvd2wiLCJzcmMiLCJlcnJvciIsIl9hdXRvcGxheSIsImF1dG9wbGF5IiwiX2Zvcm1hdCIsImZvcm1hdCIsIl9odG1sNSIsImh0bWw1IiwiX2xvb3AiLCJsb29wIiwiX3Bvb2wiLCJwb29sIiwiX3ByZWxvYWQiLCJwcmVsb2FkIiwiX3JhdGUiLCJyYXRlIiwiX3Nwcml0ZSIsInNwcml0ZSIsIl9zcmMiLCJ1bmRlZmluZWQiLCJfeGhyIiwibWV0aG9kIiwieGhyIiwiaGVhZGVycyIsIndpdGhDcmVkZW50aWFscyIsIl9kdXJhdGlvbiIsIl9zdGF0ZSIsIl9lbmRUaW1lcnMiLCJfcXVldWUiLCJfcGxheUxvY2siLCJfb25lbmQiLCJvbmVuZCIsImZuIiwiX29uZmFkZSIsIm9uZmFkZSIsIl9vbmxvYWQiLCJvbmxvYWQiLCJfb25sb2FkZXJyb3IiLCJvbmxvYWRlcnJvciIsIl9vbnBsYXllcnJvciIsIm9ucGxheWVycm9yIiwiX29ucGF1c2UiLCJvbnBhdXNlIiwiX29ucGxheSIsIm9ucGxheSIsIl9vbnN0b3AiLCJvbnN0b3AiLCJfb25tdXRlIiwib25tdXRlIiwiX29udm9sdW1lIiwib252b2x1bWUiLCJfb25yYXRlIiwib25yYXRlIiwiX29uc2VlayIsIm9uc2VlayIsIl9vbnVubG9jayIsIm9udW5sb2NrIiwiX29ucmVzdW1lIiwiZXZlbnQiLCJhY3Rpb24iLCJ1cmwiLCJzdHIiLCJleGVjIiwidG9Mb3dlckNhc2UiLCJsb2NhdGlvbiIsInByb3RvY29sIiwic2xpY2UiLCJTb3VuZCIsImxvYWRCdWZmZXIiLCJpbnRlcm5hbCIsImlkIiwibnVtIiwiX2VuZGVkIiwiX2lkIiwiX2luYWN0aXZlU291bmQiLCJzb3VuZElkIiwiX2xvYWRRdWV1ZSIsInNlZWsiLCJNYXRoIiwibWF4IiwiX3NlZWsiLCJkdXJhdGlvbiIsInRpbWVvdXQiLCJhYnMiLCJzZXRQYXJhbXMiLCJfc3RhcnQiLCJfc3RvcCIsIm5vZGUiLCJwbGF5V2ViQXVkaW8iLCJfcmVmcmVzaEJ1ZmZlciIsIl9wbGF5U3RhcnQiLCJidWZmZXJTb3VyY2UiLCJub3RlR3JhaW5PbiIsIkluZmluaXR5Iiwib25jZSIsIl9jbGVhclRpbWVyIiwicGxheUh0bWw1IiwicGxheWJhY2tSYXRlIiwicGF1c2VkIiwibG9hZGVkTm9SZWFkeVN0YXRlIiwiZWplY3RhIiwicmVhZHlTdGF0ZSIsImlzQ29jb29uSlMiLCJsaXN0ZW5lciIsInBhdXNlIiwiX3JhdGVTZWVrIiwiX3N0b3BGYWRlIiwibm90ZU9mZiIsIl9jbGVhbkJ1ZmZlciIsImlzTmFOIiwiYXJndW1lbnRzIiwiX2NsZWFyU291bmQiLCJfaW50ZXJ2YWwiLCJhcmdzIiwiaW5kZXgiLCJhcHBseSIsImZhZGUiLCJmcm9tIiwidG8iLCJsZW4iLCJtaW4iLCJlbmQiLCJsaW5lYXJSYW1wVG9WYWx1ZUF0VGltZSIsIl9zdGFydEZhZGVJbnRlcnZhbCIsImlzR3JvdXAiLCJkaWZmIiwic3RlcHMiLCJzdGVwTGVuIiwibGFzdFRpY2siLCJEYXRlIiwibm93IiwiX2ZhZGVUbyIsInNldEludGVydmFsIiwidGljayIsInJvdW5kIiwiY2xlYXJJbnRlcnZhbCIsImNhbmNlbFNjaGVkdWxlZFZhbHVlcyIsImxvb3BTdGFydCIsImxvb3BFbmQiLCJwbGF5aW5nIiwicmVhbFRpbWUiLCJyYXRlU2VlayIsInNlZWtBbmRFbWl0IiwiZW1pdFNlZWsiLCJzb3VuZHMiLCJfZXJyb3JGbiIsIl9sb2FkRm4iLCJfZW5kRm4iLCJzcGxpY2UiLCJyZW1DYWNoZSIsImNhY2hlIiwib24iLCJldmVudHMiLCJvZmYiLCJpc0lkIiwia2V5cyIsIkFycmF5IiwiaXNBcnJheSIsIm1zZyIsInRhc2siLCJzaGlmdCIsImVuZGVkIiwiX2RyYWluIiwicmVzZXQiLCJsaW1pdCIsImNudCIsIl9wYW5uZXIiLCJpc0lPUyIsInZlbmRvciIsInRlc3QiLCJob3dsIiwiX3BhcmVudCIsInBhcmVudCIsImNyZWF0ZUdhaW4iLCJjcmVhdGVHYWluTm9kZSIsIl9lcnJvckxpc3RlbmVyIiwiX2xvYWRMaXN0ZW5lciIsIl9lbmRMaXN0ZW5lciIsImNvZGUiLCJjZWlsIiwiX19kZWZhdWx0IiwibG9hZFNvdW5kIiwiZGF0YSIsImF0b2IiLCJkYXRhVmlldyIsIlVpbnQ4QXJyYXkiLCJjaGFyQ29kZUF0IiwiZGVjb2RlQXVkaW9EYXRhIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwicmVzcG9uc2VUeXBlIiwiZm9yRWFjaCIsInNldFJlcXVlc3RIZWFkZXIiLCJzdGF0dXMiLCJyZXNwb25zZSIsIm9uZXJyb3IiLCJzYWZlWGhyU2VuZCIsInNlbmQiLCJhcnJheWJ1ZmZlciIsInN1Y2Nlc3MiLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJpT1MiLCJwbGF0Zm9ybSIsImFwcFZlcnNpb24iLCJ2ZXJzaW9uIiwic2FmYXJpIiwiZ2xvYmFsIiwiX3N1cGVyIiwiX3BvcyIsIl9vcmllbnRhdGlvbiIsInN0ZXJlbyIsInBhbiIsInBvcyIsIngiLCJ5IiwieiIsInBvc2l0aW9uWCIsInNldFRhcmdldEF0VGltZSIsInBvc2l0aW9uWSIsInBvc2l0aW9uWiIsInNldFBvc2l0aW9uIiwib3JpZW50YXRpb24iLCJ4VXAiLCJ5VXAiLCJ6VXAiLCJvciIsImZvcndhcmRYIiwiZm9yd2FyZFkiLCJmb3J3YXJkWiIsInVwWCIsInVwWSIsInVwWiIsInNldE9yaWVudGF0aW9uIiwiX3N0ZXJlbyIsIl9wYW5uZXJBdHRyIiwiY29uZUlubmVyQW5nbGUiLCJjb25lT3V0ZXJBbmdsZSIsImNvbmVPdXRlckdhaW4iLCJkaXN0YW5jZU1vZGVsIiwibWF4RGlzdGFuY2UiLCJwYW5uaW5nTW9kZWwiLCJyZWZEaXN0YW5jZSIsInJvbGxvZmZGYWN0b3IiLCJfb25zdGVyZW8iLCJvbnN0ZXJlbyIsIl9vbnBvcyIsIm9ucG9zIiwiX29ub3JpZW50YXRpb24iLCJvbm9yaWVudGF0aW9uIiwicGFubmVyVHlwZSIsImNyZWF0ZVN0ZXJlb1Bhbm5lciIsInNldHVwUGFubmVyIiwib3JpZW50YXRpb25YIiwib3JpZW50YXRpb25ZIiwib3JpZW50YXRpb25aIiwicGFubmVyQXR0ciIsIl9jb25lSW5uZXJBbmdsZSIsIl9jb25lT3V0ZXJBbmdsZSIsIl9jb25lT3V0ZXJHYWluIiwiX2Rpc3RhbmNlTW9kZWwiLCJfbWF4RGlzdGFuY2UiLCJfcmVmRGlzdGFuY2UiLCJfcm9sbG9mZkZhY3RvciIsIl9wYW5uaW5nTW9kZWwiLCJwYSIsInBhbm5lciIsInR5cGUiLCJjcmVhdGVQYW5uZXIiLCJnIiwiRnVuY3Rpb24iLCJUaW1lciIsImV4aXN0cyIsImxvY2FsU3RvcmFnZSIsInN0b3JlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJsb2FkQm9vbGVhbiIsIkpTT04iLCJwYXJzZSIsIlNldHRpbmdzIiwiZXhpc3QiLCJzdG9yZUlmTnVsbCIsInRpbWUiLCJpbml0U2V0dGluZ3MiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJyZWdpc3RyYXRpb24iLCJsb2ciLCJzY29wZSIsInRpbWVyVHlwZSIsIlBvbW9kb3JvIiwidGltZXIiLCJxdWVyeVNlbGVjdG9yIiwidGltZXJTdWIiLCJwb21vZG9yb0J1dHRvbiIsInVwZGF0ZVRpbWVyIiwibG9uZ0JyZWFrQnV0dG9uIiwiTG9uZ0JyZWFrIiwic2hvcnRCcmVha0J1dHRvbiIsIlNob3J0QnJlYWsiLCJwb21vZG9yb0F1dG9DaGVja2JveCIsImNoZWNrZWQiLCJwb21vZG9yb0JyZWFrc0lucHV0IiwiYWxhcm1PdmVybGF5IiwiYW5pbWF0ZUNTUyIsImNsYXNzTGlzdCIsImFkZCIsImFsYXJtIiwiaW5maW5pdGVBbGFybUNoZWNrYm94IiwidGFiVGltZXJDaGVja2JveCIsIm5vdGlmaWNhdGlvbkNoZWNrYm94IiwiTm90aWZpY2F0aW9uIiwicGVybWlzc2lvbiIsInJlcXVlc3RQZXJtaXNzaW9uIiwic3RhcnRUaW1lciIsInN0b3BUaW1lciIsInJlc2V0VGltZXIiLCJvdmVybGF5RmFkZUluIiwib3ZlcmxheUZhZGVPdXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbSIsInJlZ2lzdGVyQnV0dG9uaGFuZGxlIiwiaW5kZXhBbGFybXMiLCJyZW1vdmUiLCJpbml0VGltZXIiLCJjb3VudGVyIiwiZGlzcGxheSIsInN1Yl9kaXMiLCJpc190aWNraW5nIiwicHJlIiwic3ViIiwiaW50ZXJ2YWwiLCJmbG9vciIsInRvU3RyaW5nIiwidGV4dENvbnRlbnQiLCJyZWZyZXNoVGl0bGUiLCJjbGljayIsInJlc2V0VGl0bGUiLCJjb25zdHJ1Y3ROb3RpZmljYXRpb24iLCJlbGVtZW50IiwiYnRuIiwicmVmcmVzaEN1cnJlbnRBbGFybSIsImFuaW1hdGlvbk5hbWUiLCJjYWxsYmFjayIsImhhbmRsZUFuaW1hdGlvbkVuZCIsImEiLCJhbHIiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsInNlbGVjdGVkIiwidGl0bGUiLCJub3RpZmljYXRpb24iLCJib2R5IiwiaWNvbiJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0ws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SUFBSXhDLGFBQWF1QyxFQUFPLENBQ3hDRSxLQUFNSixFQUNOSyxLQUFNLGlDQUl0QixFQXhXQSxHQTBXQXBkLE9BQU82RixpQkFBaUIsb0JBQW9CLFdBQ3hDLElBQU15VCxFQUFRWixFQUFTNVQsS0FBSyxZQUM1QixJQUFJLEVBQW1CLE1BQVR3VSxFQUFnQkEsRUFBUSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCIvKiFcbiAqICBob3dsZXIuanMgdjIuMi4zXG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMjAsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBnbG9iYWwgY29udHJvbGxlci4gQWxsIGNvbnRhaW5lZCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGFwcGx5XG4gICAqIHRvIGFsbCBzb3VuZHMgdGhhdCBhcmUgY3VycmVudGx5IHBsYXlpbmcgb3Igd2lsbCBiZSBpbiB0aGUgZnV0dXJlLlxuICAgKi9cbiAgdmFyIEhvd2xlckdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGdsb2JhbCBJRCBjb3VudGVyLlxuICAgICAgc2VsZi5fY291bnRlciA9IDEwMDA7XG5cbiAgICAgIC8vIFBvb2wgb2YgdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0cy5cbiAgICAgIHNlbGYuX2h0bWw1QXVkaW9Qb29sID0gW107XG4gICAgICBzZWxmLmh0bWw1UG9vbFNpemUgPSAxMDtcblxuICAgICAgLy8gSW50ZXJuYWwgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHt9O1xuICAgICAgc2VsZi5faG93bHMgPSBbXTtcbiAgICAgIHNlbGYuX211dGVkID0gZmFsc2U7XG4gICAgICBzZWxmLl92b2x1bWUgPSAxO1xuICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXl0aHJvdWdoJztcbiAgICAgIHNlbGYuX25hdmlnYXRvciA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubmF2aWdhdG9yKSA/IHdpbmRvdy5uYXZpZ2F0b3IgOiBudWxsO1xuXG4gICAgICAvLyBQdWJsaWMgcHJvcGVydGllcy5cbiAgICAgIHNlbGYubWFzdGVyR2FpbiA9IG51bGw7XG4gICAgICBzZWxmLm5vQXVkaW8gPSBmYWxzZTtcbiAgICAgIHNlbGYudXNpbmdXZWJBdWRpbyA9IHRydWU7XG4gICAgICBzZWxmLmF1dG9TdXNwZW5kID0gdHJ1ZTtcbiAgICAgIHNlbGYuY3R4ID0gbnVsbDtcblxuICAgICAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhlIGF1dG8gYXVkaW8gdW5sb2NrZXIuXG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSB0cnVlO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgIHNlbGYuX3NldHVwKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBnbG9iYWwgdm9sdW1lIGZvciBhbGwgc291bmRzLlxuICAgICAqIEBwYXJhbSAge0Zsb2F0fSB2b2wgVm9sdW1lIGZyb20gMC4wIHRvIDEuMC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXIvRmxvYXR9ICAgICBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbih2b2wpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2b2wgPSBwYXJzZUZsb2F0KHZvbCk7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgIC8vIERvbid0IHVwZGF0ZSBhbnkgb2YgdGhlIG5vZGVzIGlmIHdlIGFyZSBtdXRlZC5cbiAgICAgICAgaWYgKHNlbGYuX211dGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHVzaW5nIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIGFkanVzdCB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBjaGFuZ2Ugdm9sdW1lIGZvciBhbGwgSFRNTDUgYXVkaW8gbm9kZXMuXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hhbmdlIHRoZSB2b2x1bWVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIHZvbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbXV0aW5nIGFuZCB1bm11dGluZyBnbG9iYWxseS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBJcyBtdXRlZCBvciBub3QuXG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAvLyBXaXRoIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIG11dGUgdGhlIG1hc3RlciBnYWluLlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzZWxmLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYW5kIG11dGUgYWxsIEhUTUw1IEF1ZGlvIG5vZGVzLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgbWFyayB0aGUgYXVkaW8gbm9kZSBhcyBtdXRlZC5cbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IChtdXRlZCkgPyB0cnVlIDogc291bmQuX211dGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN0b3BwaW5nIGFsbCBzb3VuZHMgZ2xvYmFsbHkuXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCBzdG9wIHRoZW0uXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0uc3RvcCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IGFsbCBjdXJyZW50bHkgbG9hZGVkIEhvd2wgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB0byBtYWtlIHN1cmUgaXQgaXMgZnVsbHkgcmVzZXQuXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvICYmIHNlbGYuY3R4ICYmIHR5cGVvZiBzZWxmLmN0eC5jbG9zZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHguY2xvc2UoKTtcbiAgICAgICAgc2VsZi5jdHggPSBudWxsO1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGNvZGVjIHN1cHBvcnQgb2Ygc3BlY2lmaWMgZXh0ZW5zaW9uLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXh0IEF1ZGlvIGZpbGUgZXh0ZW50aW9uLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29kZWNzOiBmdW5jdGlvbihleHQpIHtcbiAgICAgIHJldHVybiAodGhpcyB8fCBIb3dsZXIpLl9jb2RlY3NbZXh0LnJlcGxhY2UoL154LS8sICcnKV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHVwIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgc3VzcGVuZC9yZXN1bWUgc3RhdGUgb2YgdGhlIEF1ZGlvQ29udGV4dC5cbiAgICAgIHNlbGYuc3RhdGUgPSBzZWxmLmN0eCA/IHNlbGYuY3R4LnN0YXRlIHx8ICdzdXNwZW5kZWQnIDogJ3N1c3BlbmRlZCc7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcbiAgICAgIHNlbGYuX2F1dG9TdXNwZW5kKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cbiAgICAgIGlmICghc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIE5vIGF1ZGlvIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHN5c3RlbSBpZiBub0F1ZGlvIGlzIHNldCB0byB0cnVlLlxuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FucGxheXRocm91Z2ggZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0Lm9uY2FucGxheXRocm91Z2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuICAgICAgICBpZiAodGVzdC5tdXRlZCkge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0ZWQgY29kZWNzLlxuICAgICAgaWYgKCFzZWxmLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fc2V0dXBDb2RlY3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBicm93c2VyIHN1cHBvcnQgZm9yIHZhcmlvdXMgY29kZWNzIGFuZCBjYWNoZSB0aGUgcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwQ29kZWNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2YXIgYXVkaW9UZXN0ID0gbnVsbDtcblxuICAgICAgLy8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1Rlc3QgPSAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykgPyBuZXcgQXVkaW8oKSA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXVkaW9UZXN0IHx8IHR5cGVvZiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHZhciBtcGVnVGVzdCA9IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXBlZzsnKS5yZXBsYWNlKC9ebm8kLywgJycpO1xuXG4gICAgICAvLyBPcGVyYSB2ZXJzaW9uIDwzMyBoYXMgbWl4ZWQgTVAzIHN1cHBvcnQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGFuZCBibG9jayBpdC5cbiAgICAgIHZhciB1YSA9IHNlbGYuX25hdmlnYXRvciA/IHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQgOiAnJztcbiAgICAgIHZhciBjaGVja09wZXJhID0gdWEubWF0Y2goL09QUlxcLyhbMC02XS4pL2cpO1xuICAgICAgdmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcbiAgICAgIHZhciBjaGVja1NhZmFyaSA9IHVhLmluZGV4T2YoJ1NhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTE7XG4gICAgICB2YXIgc2FmYXJpVmVyc2lvbiA9IHVhLm1hdGNoKC9WZXJzaW9uXFwvKC4qPykgLyk7XG4gICAgICB2YXIgaXNPbGRTYWZhcmkgPSAoY2hlY2tTYWZhcmkgJiYgc2FmYXJpVmVyc2lvbiAmJiBwYXJzZUludChzYWZhcmlWZXJzaW9uWzFdLCAxMCkgPCAxNSk7XG5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHtcbiAgICAgICAgbXAzOiAhISghaXNPbGRPcGVyYSAmJiAobXBlZ1Rlc3QgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDM7JykucmVwbGFjZSgvXm5vJC8sICcnKSkpLFxuICAgICAgICBtcGVnOiAhIW1wZWdUZXN0LFxuICAgICAgICBvcHVzOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJvcHVzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2c6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdhdjogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93YXY7IGNvZGVjcz1cIjFcIicpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGFhYzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBjYWY6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWNhZjsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtNGE6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YjogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YjsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YjsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbXA0OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJhOiAhISghaXNPbGRTYWZhcmkgJiYgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJykpLFxuICAgICAgICB3ZWJtOiAhISghaXNPbGRTYWZhcmkgJiYgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJykpLFxuICAgICAgICBkb2xieTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsgY29kZWNzPVwiZWMtM1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgZmxhYzogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWZsYWM7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9mbGFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU29tZSBicm93c2Vycy9kZXZpY2VzIHdpbGwgb25seSBhbGxvdyBhdWRpbyB0byBiZSBwbGF5ZWQgYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIEF0dGVtcHQgdG8gYXV0b21hdGljYWxseSB1bmxvY2sgYXVkaW8gb24gdGhlIGZpcnN0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQ29uY2VwdCBmcm9tOiBodHRwOi8vcGF1bGJha2F1cy5jb20vdHV0b3JpYWxzL2h0bWw1L3dlYi1hdWRpby1vbi1pb3MvXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF91bmxvY2tBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBPbmx5IHJ1biB0aGlzIGlmIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQgYW5kIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gdW5sb2NrZWQuXG4gICAgICBpZiAoc2VsZi5fYXVkaW9VbmxvY2tlZCB8fCAhc2VsZi5jdHgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9hdWRpb1VubG9ja2VkID0gZmFsc2U7XG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU29tZSBtb2JpbGUgZGV2aWNlcy9wbGF0Zm9ybXMgaGF2ZSBkaXN0b3J0aW9uIGlzc3VlcyB3aGVuIG9wZW5pbmcvY2xvc2luZyB0YWJzIGFuZC9vciB3ZWIgdmlld3MuXG4gICAgICAvLyBCdWdzIGluIHRoZSBicm93c2VyIChlc3BlY2lhbGx5IE1vYmlsZSBTYWZhcmkpIGNhbiBjYXVzZSB0aGUgc2FtcGxlUmF0ZSB0byBjaGFuZ2UgZnJvbSA0NDEwMCB0byA0ODAwMC5cbiAgICAgIC8vIEJ5IGNhbGxpbmcgSG93bGVyLnVubG9hZCgpLCB3ZSBjcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHdpdGggdGhlIGNvcnJlY3Qgc2FtcGxlUmF0ZS5cbiAgICAgIGlmICghc2VsZi5fbW9iaWxlVW5sb2FkZWQgJiYgc2VsZi5jdHguc2FtcGxlUmF0ZSAhPT0gNDQxMDApIHtcbiAgICAgICAgc2VsZi5fbW9iaWxlVW5sb2FkZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTY3JhdGNoIGJ1ZmZlciBmb3IgZW5hYmxpbmcgaU9TIHRvIGRpc3Bvc2Ugb2Ygd2ViIGF1ZGlvIGJ1ZmZlcnMgY29ycmVjdGx5LCBhcyBwZXI6XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0MTE5Njg0XG4gICAgICBzZWxmLl9zY3JhdGNoQnVmZmVyID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcblxuICAgICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCBvbiB0b3VjaCBzdGFydCB0byBjcmVhdGUgYW5kIHBsYXkgYSBidWZmZXIsXG4gICAgICAvLyB0aGVuIGNoZWNrIGlmIHRoZSBhdWRpbyBhY3R1YWxseSBwbGF5ZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICAvLyBhdWRpbyBoYXMgbm93IGJlZW4gdW5sb2NrZWQgb24gaU9TLCBBbmRyb2lkLCBldGMuXG4gICAgICB2YXIgdW5sb2NrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyBDcmVhdGUgYSBwb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMgdGhhdCBjYW5cbiAgICAgICAgLy8gYmUgdXNlZCBmb3IgcGxheWluZyBzb3VuZHMgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLiBIVE1MNVxuICAgICAgICAvLyBBdWRpbyBvYmplY3RzIG11c3QgYmUgaW5kaXZpZHVhbGx5IHVubG9ja2VkLCBhcyBvcHBvc2VkXG4gICAgICAgIC8vIHRvIHRoZSBXZWJBdWRpbyBBUEkgd2hpY2ggb25seSBuZWVkcyBhIHNpbmdsZSBhY3RpdmF0aW9uLlxuICAgICAgICAvLyBUaGlzIG11c3Qgb2NjdXIgYmVmb3JlIFdlYkF1ZGlvIHNldHVwIG9yIHRoZSBzb3VyY2Uub25lbmRlZFxuICAgICAgICAvLyBldmVudCB3aWxsIG5vdCBmaXJlLlxuICAgICAgICB3aGlsZSAoc2VsZi5faHRtbDVBdWRpb1Bvb2wubGVuZ3RoIDwgc2VsZi5odG1sNVBvb2xTaXplKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBhdWRpb05vZGUgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAgICAgLy8gTWFyayB0aGlzIEF1ZGlvIG9iamVjdCBhcyB1bmxvY2tlZCB0byBlbnN1cmUgaXQgY2FuIGdldCByZXR1cm5lZFxuICAgICAgICAgICAgLy8gdG8gdGhlIHVubG9ja2VkIHBvb2wgd2hlbiByZWxlYXNlZC5cbiAgICAgICAgICAgIGF1ZGlvTm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGF1ZGlvIG5vZGUgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgICBzZWxmLl9yZWxlYXNlSHRtbDVBdWRpbyhhdWRpb05vZGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW55IGFzc2lnbmVkIGF1ZGlvIG5vZGVzIGFuZCB1bmxvY2sgdGhlbS5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCB1bmxvY2sgdGhlIGF1ZGlvIG5vZGVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5fdW5sb2NrZWQpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmxvYWQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpeCBBbmRyb2lkIGNhbiBub3QgcGxheSBpbiBzdXNwZW5kIHN0YXRlLlxuICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgdmFyIHNvdXJjZSA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBzb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjtcbiAgICAgICAgc291cmNlLmNvbm5lY3Qoc2VsZi5jdHguZGVzdGluYXRpb24pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc291cmNlLm5vdGVPbigwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxsaW5nIHJlc3VtZSgpIG9uIGEgc3RhY2sgaW5pdGlhdGVkIGJ5IHVzZXIgZ2VzdHVyZSBpcyB3aGF0IGFjdHVhbGx5IHVubG9ja3MgdGhlIGF1ZGlvIG9uIEFuZHJvaWQgQ2hyb21lID49IDU1LlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0dXAgYSB0aW1lb3V0IHRvIGNoZWNrIHRoYXQgd2UgYXJlIHVubG9ja2VkIG9uIHRoZSBuZXh0IGV2ZW50IGxvb3AuXG4gICAgICAgIHNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc291cmNlLmRpc2Nvbm5lY3QoMCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHVubG9ja2VkIHN0YXRlIGFuZCBwcmV2ZW50IHRoaXMgY2hlY2sgZnJvbSBoYXBwZW5pbmcgYWdhaW4uXG4gICAgICAgICAgc2VsZi5fYXVkaW9VbmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRvdWNoIHN0YXJ0IGxpc3RlbmVyLlxuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgICAgICAvLyBMZXQgYWxsIHNvdW5kcyBrbm93IHRoYXQgYXVkaW8gaGFzIGJlZW4gdW5sb2NrZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgndW5sb2NrJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYSB0b3VjaCBzdGFydCBsaXN0ZW5lciB0byBhdHRlbXB0IGFuIHVubG9jayBpbi5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0IGZyb20gdGhlIHBvb2wuIElmIG5vbmUgYXJlIGxlZnQsXG4gICAgICogcmV0dXJuIGEgbmV3IEF1ZGlvIG9iamVjdCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxuICAgICAqIEByZXR1cm4ge0F1ZGlvfSBIVE1MNSBBdWRpbyBvYmplY3QuXG4gICAgICovXG4gICAgX29idGFpbkh0bWw1QXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gUmV0dXJuIHRoZSBuZXh0IG9iamVjdCBmcm9tIHRoZSBwb29sIGlmIG9uZSBleGlzdHMuXG4gICAgICBpZiAoc2VsZi5faHRtbDVBdWRpb1Bvb2wubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9odG1sNUF1ZGlvUG9vbC5wb3AoKTtcbiAgICAgIH1cblxuICAgICAgLy8uQ2hlY2sgaWYgdGhlIGF1ZGlvIGlzIGxvY2tlZCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxuICAgICAgdmFyIHRlc3RQbGF5ID0gbmV3IEF1ZGlvKCkucGxheSgpO1xuICAgICAgaWYgKHRlc3RQbGF5ICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAodGVzdFBsYXkgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHR5cGVvZiB0ZXN0UGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICB0ZXN0UGxheS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0hUTUw1IEF1ZGlvIHBvb2wgZXhoYXVzdGVkLCByZXR1cm5pbmcgcG90ZW50aWFsbHkgbG9ja2VkIGF1ZGlvIG9iamVjdC4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQXVkaW8oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGFjdGl2YXRlZCBIVE1MNSBBdWRpbyBvYmplY3QgdG8gdGhlIHBvb2wuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9yZWxlYXNlSHRtbDVBdWRpbzogZnVuY3Rpb24oYXVkaW8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIERvbid0IGFkZCBhdWRpbyB0byB0aGUgcG9vbCBpZiB3ZSBkb24ndCBrbm93IGlmIGl0IGhhcyBiZWVuIHVubG9ja2VkLlxuICAgICAgaWYgKGF1ZGlvLl91bmxvY2tlZCkge1xuICAgICAgICBzZWxmLl9odG1sNUF1ZGlvUG9vbC5wdXNoKGF1ZGlvKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgc3VzcGVuZCB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCBhZnRlciBubyBzb3VuZCBoYXMgcGxheWVkIGZvciAzMCBzZWNvbmRzLlxuICAgICAqIFRoaXMgc2F2ZXMgcHJvY2Vzc2luZy9lbmVyZ3kgYW5kIGZpeGVzIHZhcmlvdXMgYnJvd3Nlci1zcGVjaWZpYyBidWdzIHdpdGggYXVkaW8gZ2V0dGluZyBzdHVjay5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9TdXNwZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kIHx8ICFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHguc3VzcGVuZCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgYW55IHNvdW5kcyBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHNlbGYuX2hvd2xzW2ldLl9zb3VuZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3NvdW5kc1tqXS5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBzb3VuZCBoYXMgcGxheWVkIGFmdGVyIDMwIHNlY29uZHMsIHN1c3BlbmQgdGhlIGNvbnRleHQuXG4gICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRpbmcnO1xuXG4gICAgICAgIC8vIEhhbmRsZSB1cGRhdGluZyB0aGUgc3RhdGUgb2YgdGhlIGF1ZGlvIGNvbnRleHQgYWZ0ZXIgc3VzcGVuZGluZy5cbiAgICAgICAgdmFyIGhhbmRsZVN1c3BlbnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRlZCc7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kKSB7XG4gICAgICAgICAgICBkZWxldGUgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kO1xuICAgICAgICAgICAgc2VsZi5fYXV0b1Jlc3VtZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFaXRoZXIgdGhlIHN0YXRlIGdldHMgc3VzcGVuZGVkIG9yIGl0IGlzIGludGVycnVwdGVkLlxuICAgICAgICAvLyBFaXRoZXIgd2F5LCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgc3RhdGUgdG8gc3VzcGVuZGVkLlxuICAgICAgICBzZWxmLmN0eC5zdXNwZW5kKCkudGhlbihoYW5kbGVTdXNwZW5zaW9uLCBoYW5kbGVTdXNwZW5zaW9uKTtcbiAgICAgIH0sIDMwMDAwKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVzdW1lIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IHdoZW4gYSBuZXcgc291bmQgaXMgcGxheWVkLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1Jlc3VtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLmN0eC5zdGF0ZSAhPT0gJ2ludGVycnVwdGVkJyAmJiBzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kZWQnIHx8IHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLmN0eC5zdGF0ZSA9PT0gJ2ludGVycnVwdGVkJykge1xuICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAncnVubmluZyc7XG5cbiAgICAgICAgICAvLyBFbWl0IHRvIGFsbCBIb3dscyB0aGF0IHRoZSBhdWRpbyBoYXMgcmVzdW1lZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCdyZXN1bWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kaW5nJykge1xuICAgICAgICBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2V0dXAgdGhlIGdsb2JhbCBhdWRpbyBjb250cm9sbGVyLlxuICB2YXIgSG93bGVyID0gbmV3IEhvd2xlckdsb2JhbCgpO1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYXVkaW8gZ3JvdXAgY29udHJvbGxlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAqL1xuICB2YXIgSG93bCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBubyBzb3VyY2UgaXMgcHJvdmlkZWQuXG4gICAgaWYgKCFvLnNyYyB8fCBvLnNyYy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGFycmF5IG9mIHNvdXJjZSBmaWxlcyBtdXN0IGJlIHBhc3NlZCB3aXRoIGFueSBuZXcgSG93bC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxmLmluaXQobyk7XG4gIH07XG4gIEhvd2wucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgSG93bCBncm91cCBvYmplY3QuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fYXV0b3BsYXkgPSBvLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fZm9ybWF0ID0gKHR5cGVvZiBvLmZvcm1hdCAhPT0gJ3N0cmluZycpID8gby5mb3JtYXQgOiBbby5mb3JtYXRdO1xuICAgICAgc2VsZi5faHRtbDUgPSBvLmh0bWw1IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBvLm11dGUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9sb29wID0gby5sb29wIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fcG9vbCA9IG8ucG9vbCB8fCA1O1xuICAgICAgc2VsZi5fcHJlbG9hZCA9ICh0eXBlb2Ygby5wcmVsb2FkID09PSAnYm9vbGVhbicgfHwgby5wcmVsb2FkID09PSAnbWV0YWRhdGEnKSA/IG8ucHJlbG9hZCA6IHRydWU7XG4gICAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG4gICAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICAgIHNlbGYuX3NyYyA9ICh0eXBlb2Ygby5zcmMgIT09ICdzdHJpbmcnKSA/IG8uc3JjIDogW28uc3JjXTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG4gICAgICBzZWxmLl94aHIgPSB7XG4gICAgICAgIG1ldGhvZDogby54aHIgJiYgby54aHIubWV0aG9kID8gby54aHIubWV0aG9kIDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IG8ueGhyICYmIG8ueGhyLmhlYWRlcnMgPyBvLnhoci5oZWFkZXJzIDogbnVsbCxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBvLnhociAmJiBvLnhoci53aXRoQ3JlZGVudGlhbHMgPyBvLnhoci53aXRoQ3JlZGVudGlhbHMgOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGFsbCBvdGhlciBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IDA7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYuX2VuZFRpbWVycyA9IHt9O1xuICAgICAgc2VsZi5fcXVldWUgPSBbXTtcbiAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uZW5kID0gby5vbmVuZCA/IFt7Zm46IG8ub25lbmR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25mYWRlID0gby5vbmZhZGUgPyBbe2ZuOiBvLm9uZmFkZX1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWQgPSBvLm9ubG9hZCA/IFt7Zm46IG8ub25sb2FkfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZGVycm9yID0gby5vbmxvYWRlcnJvciA/IFt7Zm46IG8ub25sb2FkZXJyb3J9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ZXJyb3IgPSBvLm9ucGxheWVycm9yID8gW3tmbjogby5vbnBsYXllcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBhdXNlID0gby5vbnBhdXNlID8gW3tmbjogby5vbnBhdXNlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGxheSA9IG8ub25wbGF5ID8gW3tmbjogby5vbnBsYXl9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zdG9wID0gby5vbnN0b3AgPyBbe2ZuOiBvLm9uc3RvcH1dIDogW107XG4gICAgICBzZWxmLl9vbm11dGUgPSBvLm9ubXV0ZSA/IFt7Zm46IG8ub25tdXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udm9sdW1lID0gby5vbnZvbHVtZSA/IFt7Zm46IG8ub252b2x1bWV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yYXRlID0gby5vbnJhdGUgPyBbe2ZuOiBvLm9ucmF0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnNlZWsgPSBvLm9uc2VlayA/IFt7Zm46IG8ub25zZWVrfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udW5sb2NrID0gby5vbnVubG9jayA/IFt7Zm46IG8ub251bmxvY2t9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yZXN1bWUgPSBbXTtcblxuICAgICAgLy8gV2ViIEF1ZGlvIG9yIEhUTUw1IEF1ZGlvP1xuICAgICAgc2VsZi5fd2ViQXVkaW8gPSBIb3dsZXIudXNpbmdXZWJBdWRpbyAmJiAhc2VsZi5faHRtbDU7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpby5cbiAgICAgIGlmICh0eXBlb2YgSG93bGVyLmN0eCAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eCAmJiBIb3dsZXIuYXV0b1VubG9jaykge1xuICAgICAgICBIb3dsZXIuX3VubG9ja0F1ZGlvKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhpcyBIb3dsIGdyb3VwIGluIHRoZSBnbG9iYWwgY29udHJvbGxlci5cbiAgICAgIEhvd2xlci5faG93bHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gSWYgdGhleSBzZWxlY3RlZCBhdXRvcGxheSwgYWRkIGEgcGxheSBldmVudCB0byB0aGUgbG9hZCBxdWV1ZS5cbiAgICAgIGlmIChzZWxmLl9hdXRvcGxheSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VyY2UgZmlsZSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAgICAgIGlmIChzZWxmLl9wcmVsb2FkICYmIHNlbGYuX3ByZWxvYWQgIT09ICdub25lJykge1xuICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGF1ZGlvIGZpbGUuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHVybCA9IG51bGw7XG5cbiAgICAgIC8vIElmIG5vIGF1ZGlvIGlzIGF2YWlsYWJsZSwgcXVpdCBpbW1lZGlhdGVseS5cbiAgICAgIGlmIChIb3dsZXIubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gYXVkaW8gc3VwcG9ydC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgb3VyIHNvdXJjZSBpcyBpbiBhbiBhcnJheS5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5fc3JjID09PSAnc3RyaW5nJykge1xuICAgICAgICBzZWxmLl9zcmMgPSBbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBzb3VyY2VzIGFuZCBwaWNrIHRoZSBmaXJzdCBvbmUgdGhhdCBpcyBjb21wYXRpYmxlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NyYy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0LCBzdHI7XG5cbiAgICAgICAgaWYgKHNlbGYuX2Zvcm1hdCAmJiBzZWxmLl9mb3JtYXRbaV0pIHtcbiAgICAgICAgICAvLyBJZiBhbiBleHRlbnNpb24gd2FzIHNwZWNpZmllZCwgdXNlIHRoYXQgaW5zdGVhZC5cbiAgICAgICAgICBleHQgPSBzZWxmLl9mb3JtYXRbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VyY2UgaXMgYSBzdHJpbmcuXG4gICAgICAgICAgc3RyID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vbi1zdHJpbmcgZm91bmQgaW4gc2VsZWN0ZWQgYXVkaW8gc291cmNlcyAtIGlnbm9yaW5nLicpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSB0aGUgVVJMIG9yIGJhc2U2NCBkYXRhIFVSSS5cbiAgICAgICAgICBleHQgPSAvXmRhdGE6YXVkaW9cXC8oW147LF0rKTsvaS5leGVjKHN0cik7XG4gICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhzdHIuc3BsaXQoJz8nLCAxKVswXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4dCkge1xuICAgICAgICAgICAgZXh0ID0gZXh0WzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9nIGEgd2FybmluZyBpZiBubyBleHRlbnNpb24gd2FzIGZvdW5kLlxuICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTm8gZmlsZSBleHRlbnNpb24gd2FzIGZvdW5kLiBDb25zaWRlciB1c2luZyB0aGUgXCJmb3JtYXRcIiBwcm9wZXJ0eSBvciBzcGVjaWZ5IGFuIGV4dGVuc2lvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZXh0ZW5zaW9uIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKGV4dCAmJiBIb3dsZXIuY29kZWNzKGV4dCkpIHtcbiAgICAgICAgICB1cmwgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGNvZGVjIHN1cHBvcnQgZm9yIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fc3JjID0gdXJsO1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgIC8vIElmIHRoZSBob3N0aW5nIHBhZ2UgaXMgSFRUUFMgYW5kIHRoZSBzb3VyY2UgaXNuJ3QsXG4gICAgICAvLyBkcm9wIGRvd24gdG8gSFRNTDUgQXVkaW8gdG8gYXZvaWQgTWl4ZWQgQ29udGVudCBlcnJvcnMuXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiB1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwOicpIHtcbiAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgc291bmQgb2JqZWN0IGFuZCBhZGQgaXQgdG8gdGhlIHBvb2wuXG4gICAgICBuZXcgU291bmQoc2VsZik7XG5cbiAgICAgIC8vIExvYWQgYW5kIGRlY29kZSB0aGUgYXVkaW8gZGF0YSBmb3IgcGxheWJhY2suXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgbG9hZEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBsYXkgYSBzb3VuZCBvciByZXN1bWUgcHJldmlvdXMgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7U3RyaW5nL051bWJlcn0gc3ByaXRlICAgU3ByaXRlIG5hbWUgZm9yIHNwcml0ZSBwbGF5YmFjayBvciBzb3VuZCBpZCB0byBjb250aW51ZSBwcmV2aW91cy5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgU291bmQgSUQuXG4gICAgICovXG4gICAgcGxheTogZnVuY3Rpb24oc3ByaXRlLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlkID0gbnVsbDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIGEgc3ByaXRlLCBzb3VuZCBpZCBvciBub3RoaW5nIHdhcyBwYXNzZWRcbiAgICAgIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZCA9IHNwcml0ZTtcbiAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmICFzZWxmLl9zcHJpdGVbc3ByaXRlXSkge1xuICAgICAgICAvLyBJZiB0aGUgcGFzc2VkIHNwcml0ZSBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBkZWZhdWx0IHNvdW5kIHNwcml0ZSAocGxheXMgdGhlIGZ1bGwgYXVkaW8gbGVuZ3RoKS5cbiAgICAgICAgc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBzaW5nbGUgcGF1c2VkIHNvdW5kIHRoYXQgaXNuJ3QgZW5kZWQuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzLCBwbGF5IHRoYXQgc291bmQuIElmIG5vdCwgY29udGludWUgYXMgdXN1YWwuXG4gICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICB2YXIgbnVtID0gMDtcbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9wYXVzZWQgJiYgIXNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAgICAgbnVtKys7XG4gICAgICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzW2ldLl9pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobnVtID09PSAxKSB7XG4gICAgICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgbm9kZSwgb3IgZ2V0IG9uZSBmcm9tIHRoZSBwb29sLlxuICAgICAgdmFyIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5faW5hY3RpdmVTb3VuZCgpO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgIGlmICghc291bmQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgc3ByaXRlIGRlZmluaXRpb24uXG4gICAgICBpZiAoaWQgJiYgIXNwcml0ZSkge1xuICAgICAgICBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlIHx8ICdfX2RlZmF1bHQnO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgd2UgbXVzdCB3YWl0IHRvIGdldCB0aGUgYXVkaW8ncyBkdXJhdGlvbi5cbiAgICAgIC8vIFdlIGFsc28gbmVlZCB0byB3YWl0IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBydW4gaW50byByYWNlIGNvbmRpdGlvbnMgd2l0aFxuICAgICAgLy8gdGhlIG9yZGVyIG9mIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICAvLyBTZXQgdGhlIHNwcml0ZSB2YWx1ZSBvbiB0aGlzIHNvdW5kLlxuICAgICAgICBzb3VuZC5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAgIC8vIE1hcmsgdGhpcyBzb3VuZCBhcyBub3QgZW5kZWQgaW4gY2FzZSBhbm90aGVyIHNvdW5kIGlzIHBsYXllZCBiZWZvcmUgdGhpcyBvbmUgbG9hZHMuXG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgc291bmQgdG8gdGhlIHF1ZXVlIHRvIGJlIHBsYXllZCBvbiBsb2FkLlxuICAgICAgICB2YXIgc291bmRJZCA9IHNvdW5kLl9pZDtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KHNvdW5kSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kSWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHBsYXkgdGhlIHNvdW5kIGlmIGFuIGlkIHdhcyBwYXNzZWQgYW5kIGl0IGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgIGlmIChpZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBwbGF5IGV2ZW50LCBpbiBvcmRlciB0byBrZWVwIGl0ZXJhdGluZyB0aHJvdWdoIHF1ZXVlLlxuICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCdwbGF5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIEF1ZGlvQ29udGV4dCBpc24ndCBzdXNwZW5kZWQsIGFuZCByZXN1bWUgaXQgaWYgaXQgaXMuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgSG93bGVyLl9hdXRvUmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBob3cgbG9uZyB0byBwbGF5IGZvciBhbmQgd2hlcmUgdG8gc3RhcnQgcGxheWluZy5cbiAgICAgIHZhciBzZWVrID0gTWF0aC5tYXgoMCwgc291bmQuX3NlZWsgPiAwID8gc291bmQuX3NlZWsgOiBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDApO1xuICAgICAgdmFyIGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgKChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDApIC0gc2Vlayk7XG4gICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuICAgICAgdmFyIHN0YXJ0ID0gc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwO1xuICAgICAgdmFyIHN0b3AgPSAoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwO1xuICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgLy8gTWFyayB0aGUgc291bmQgYXMgZW5kZWQgaW5zdGFudGx5IHNvIHRoYXQgdGhpcyBhc3luYyBwbGF5YmFja1xuICAgICAgLy8gZG9lc24ndCBnZXQgZ3JhYmJlZCBieSBhbm90aGVyIGNhbGwgdG8gcGxheSB3aGlsZSB0aGlzIG9uZSB3YWl0cyB0byBzdGFydC5cbiAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNldFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzb3VuZC5fcGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgICAgc291bmQuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHNvdW5kLl9zdG9wID0gc3RvcDtcbiAgICAgICAgc291bmQuX2xvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBFbmQgdGhlIHNvdW5kIGluc3RhbnRseSBpZiBzZWVrIGlzIGF0IHRoZSBlbmQuXG4gICAgICBpZiAoc2VlayA+PSBzdG9wKSB7XG4gICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBCZWdpbiB0aGUgYWN0dWFsIHBsYXliYWNrLlxuICAgICAgdmFyIG5vZGUgPSBzb3VuZC5fbm9kZTtcbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBXZWIgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5V2ViQXVkaW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgIHNldFBhcmFtcygpO1xuICAgICAgICAgIHNlbGYuX3JlZnJlc2hCdWZmZXIoc291bmQpO1xuXG4gICAgICAgICAgLy8gU2V0dXAgdGhlIHBsYXliYWNrIHBhcmFtcy5cbiAgICAgICAgICB2YXIgdm9sID0gKHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCkgPyAwIDogc291bmQuX3ZvbHVtZTtcbiAgICAgICAgICBub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICAgIC8vIFBsYXkgdGhlIHNvdW5kIHVzaW5nIHRoZSBzdXBwb3J0ZWQgbWV0aG9kLlxuICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3RhcnQgYSBuZXcgdGltZXIgaWYgbm9uZSBpcyBwcmVzZW50LlxuICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKEhvd2xlci5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIEhvd2xlci5jdHguc3RhdGUgIT09ICdpbnRlcnJ1cHRlZCcpIHtcbiAgICAgICAgICBwbGF5V2ViQXVkaW8oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgYXVkaW8gY29udGV4dCB0byByZXN1bWUgYmVmb3JlIHBsYXlpbmcuXG4gICAgICAgICAgc2VsZi5vbmNlKCdyZXN1bWUnLCBwbGF5V2ViQXVkaW8pO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBIVE1MNSBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlIdG1sNSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIG5vZGUubXV0ZWQgPSBzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgSG93bGVyLl9tdXRlZCB8fCBub2RlLm11dGVkO1xuICAgICAgICAgIG5vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgLy8gU29tZSBicm93c2VycyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoaXMgaXMgY2FsbGVkIHdpdGhvdXQgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHBsYXkgPSBub2RlLnBsYXkoKTtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBvbGRlciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgcHJvbWlzZXMsIGFuZCB0aHVzIGRvbid0IGhhdmUgdGhpcyBpc3N1ZS5cbiAgICAgICAgICAgIGlmIChwbGF5ICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAocGxheSBpbnN0YW5jZW9mIFByb21pc2UgfHwgdHlwZW9mIHBsYXkudGhlbiA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgICAgLy8gSW1wbGVtZW50cyBhIGxvY2sgdG8gcHJldmVudCBET01FeGNlcHRpb246IFRoZSBwbGF5KCkgcmVxdWVzdCB3YXMgaW50ZXJydXB0ZWQgYnkgYSBjYWxsIHRvIHBhdXNlKCkuXG4gICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAvLyBTZXQgcGFyYW0gdmFsdWVzIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICBzZXRQYXJhbXMoKTtcblxuICAgICAgICAgICAgICAvLyBSZWxlYXNlcyB0aGUgbG9jayBhbmQgZXhlY3V0ZXMgcXVldWVkIGFjdGlvbnMuXG4gICAgICAgICAgICAgIHBsYXlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBub2RlLl91bmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICAgICAnb24gbW9iaWxlIGRldmljZXMgYW5kIENocm9tZSB3aGVyZSBwbGF5YmFjayB3YXMgbm90IHdpdGhpbiBhIHVzZXIgaW50ZXJhY3Rpb24uJyk7XG5cbiAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlbmRlZCBhbmQgcGF1c2VkIHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgIHNldFBhcmFtcygpO1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0dGluZyByYXRlIGJlZm9yZSBwbGF5aW5nIHdvbid0IHdvcmsgaW4gSUUsIHNvIHdlIHNldCBpdCBhZ2FpbiBoZXJlLlxuICAgICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaXMgc3RpbGwgcGF1c2VkLCB0aGVuIHdlIGNhbiBhc3N1bWUgdGhlcmUgd2FzIGEgcGxheWJhY2sgaXNzdWUuXG4gICAgICAgICAgICBpZiAobm9kZS5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR1cCB0aGUgZW5kIHRpbWVyIG9uIHNwcml0ZXMgb3IgbGlzdGVuIGZvciB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICAgICAgICBpZiAoc3ByaXRlICE9PSAnX19kZWZhdWx0JyB8fCBzb3VuZC5fbG9vcCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJlIGVuZGVkIG9uIHRoaXMgYXVkaW8gbm9kZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBzdHJlYW1pbmcgYXVkaW8sIG1ha2Ugc3VyZSB0aGUgc3JjIGlzIHNldCBhbmQgbG9hZCBhZ2Fpbi5cbiAgICAgICAgaWYgKG5vZGUuc3JjID09PSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdBQUFCWFFWWkZabTEwSUJJQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQUFBQmtZWFJoQWdBQUFBRUEnKSB7XG4gICAgICAgICAgbm9kZS5zcmMgPSBzZWxmLl9zcmM7XG4gICAgICAgICAgbm9kZS5sb2FkKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQbGF5IGltbWVkaWF0ZWx5IGlmIHJlYWR5LCBvciB3YWl0IGZvciB0aGUgJ2NhbnBsYXl0aHJvdWdoJ2UgdmVudC5cbiAgICAgICAgdmFyIGxvYWRlZE5vUmVhZHlTdGF0ZSA9ICh3aW5kb3cgJiYgd2luZG93LmVqZWN0YSkgfHwgKCFub2RlLnJlYWR5U3RhdGUgJiYgSG93bGVyLl9uYXZpZ2F0b3IuaXNDb2Nvb25KUyk7XG4gICAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUgPj0gMyB8fCBsb2FkZWROb1JlYWR5U3RhdGUpIHtcbiAgICAgICAgICBwbGF5SHRtbDUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEJlZ2luIHBsYXliYWNrLlxuICAgICAgICAgICAgcGxheUh0bWw1KCk7XG5cbiAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGF1c2UgcGxheWJhY2sgYW5kIHNhdmUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gcGF1c2UgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHBhdXNlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCBvciBhIHBsYXkoKSBwcm9taXNlIGlzIHBlbmRpbmcsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBwYXVzZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGF1c2UnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBwYXVzZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlbGYuc2VlayhpZHNbaV0pO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdW5kIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAgICAgIGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJlIHRoZSBwYXVzZSBldmVudCwgdW5sZXNzIGB0cnVlYCBpcyBwYXNzZWQgYXMgdGhlIDJuZCBhcmd1bWVudC5cbiAgICAgICAgaWYgKCFhcmd1bWVudHNbMV0pIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdwYXVzZScsIHNvdW5kID8gc291bmQuX2lkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0b3AgcGxheWJhY2sgYW5kIHJlc2V0IHRvIHN0YXJ0LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBzdG9wIGFsbCBpbiBncm91cCkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKGlkLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHN0b3Agd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3N0b3AnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnN0b3AoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHN0b3BwZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291bmQncyBBdWRpb0J1ZmZlclNvdXJjZU5vZGUgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG5cbiAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIGxpdmUgc3RyZWFtLCBzdG9wIGRvd25sb2FkIG9uY2UgdGhlIGF1ZGlvIGlzIHN0b3BwZWQuXG4gICAgICAgICAgICAgIGlmIChzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhclNvdW5kKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0b3AnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0ZS91bm11dGUgYSBzaW5nbGUgc291bmQgb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgU2V0IHRvIHRydWUgdG8gbXV0ZSBhbmQgZmFsc2UgdG8gdW5tdXRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgVGhlIHNvdW5kIElEIHRvIHVwZGF0ZSAob21pdCB0byBtdXRlL3VubXV0ZSBhbGwpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQsIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gbXV0ZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdtdXRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5tdXRlKG11dGVkLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYXBwbHlpbmcgbXV0ZS91bm11dGUgdG8gYWxsIHNvdW5kcywgdXBkYXRlIHRoZSBncm91cCdzIHZhbHVlLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtdXRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fbXV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbXV0ZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIGFjdGl2ZSBmYWRlIGFuZCBzZXQgdGhlIHZvbHVtZSB0byB0aGUgZW5kIHZhbHVlLlxuICAgICAgICAgIGlmIChzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNvdW5kLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gSG93bGVyLl9tdXRlZCA/IHRydWUgOiBtdXRlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdtdXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgdm9sdW1lIG9mIHRoaXMgc291bmQgb3Igb2YgdGhlIEhvd2wgZ3JvdXAuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHZvbHVtZSgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3Mgdm9sdW1lIHZhbHVlLlxuICAgICAqICAgdm9sdW1lKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqICAgdm9sdW1lKHZvbCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgdm9sdW1lKHZvbCwgaWQpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgdm9sLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGdyb3Vwcycgdm9sdW1lLlxuICAgICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSB8fCBhcmdzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHZvbHVtZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPj0gMikge1xuICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZvbHVtZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSB2b2x1bWUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAndm9sdW1lJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHZvbHVtZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgICBpZiAoIWFyZ3NbMl0pIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gdm9sICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCd2b2x1bWUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl92b2x1bWUgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmFkZSBhIGN1cnJlbnRseSBwbGF5aW5nIHNvdW5kIGJldHdlZW4gdHdvIHZvbHVtZXMgKGlmIG5vIGlkIGlzIHBhc3NlZCwgYWxsIHNvdW5kcyB3aWxsIGZhZGUpLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIChvbWl0IHRvIGZhZGUgYWxsIHNvdW5kcykuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBmYWRlOiBmdW5jdGlvbihmcm9tLCB0bywgbGVuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGZhZGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ2ZhZGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmZhZGUoZnJvbSwgdG8sIGxlbiwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdG8vZnJvbS9sZW4gdmFsdWVzIGFyZSBudW1iZXJzLlxuICAgICAgZnJvbSA9IE1hdGgubWluKE1hdGgubWF4KDAsIHBhcnNlRmxvYXQoZnJvbSkpLCAxKTtcbiAgICAgIHRvID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgcGFyc2VGbG9hdCh0bykpLCAxKTtcbiAgICAgIGxlbiA9IHBhcnNlRmxvYXQobGVuKTtcblxuICAgICAgLy8gU2V0IHRoZSB2b2x1bWUgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAgc2VsZi52b2x1bWUoZnJvbSwgaWQpO1xuXG4gICAgICAvLyBGYWRlIHRoZSB2b2x1bWUgb2Ygb25lIG9yIGFsbCBzb3VuZHMuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBsaW5lYXIgZmFkZSBvciBmYWxsIGJhY2sgdG8gdGltZW91dHMgd2l0aCBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gU3RvcCB0aGUgcHJldmlvdXMgZmFkZSBpZiBubyBzcHJpdGUgaXMgYmVpbmcgdXNlZCAob3RoZXJ3aXNlLCB2b2x1bWUgaGFuZGxlcyB0aGlzKS5cbiAgICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8sIGxldCB0aGUgbmF0aXZlIG1ldGhvZHMgZG8gdGhlIGFjdHVhbCBmYWRlLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGN1cnJlbnRUaW1lICsgKGxlbiAvIDEwMDApO1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IGZyb207XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGZyb20sIGN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodG8sIGVuZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fc3RhcnRGYWRlSW50ZXJ2YWwoc291bmQsIGZyb20sIHRvLCBsZW4sIGlkc1tpXSwgdHlwZW9mIGlkID09PSAndW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgaW50ZXJuYWwgaW50ZXJ2YWwgdG8gZmFkZSBhIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc291bmQgUmVmZXJlbmNlIHRvIHNvdW5kIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpc0dyb3VwICAgSWYgdHJ1ZSwgc2V0IHRoZSB2b2x1bWUgb24gdGhlIGdyb3VwLlxuICAgICAqL1xuICAgIF9zdGFydEZhZGVJbnRlcnZhbDogZnVuY3Rpb24oc291bmQsIGZyb20sIHRvLCBsZW4sIGlkLCBpc0dyb3VwKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdm9sID0gZnJvbTtcbiAgICAgIHZhciBkaWZmID0gdG8gLSBmcm9tO1xuICAgICAgdmFyIHN0ZXBzID0gTWF0aC5hYnMoZGlmZiAvIDAuMDEpO1xuICAgICAgdmFyIHN0ZXBMZW4gPSBNYXRoLm1heCg0LCAoc3RlcHMgPiAwKSA/IGxlbiAvIHN0ZXBzIDogbGVuKTtcbiAgICAgIHZhciBsYXN0VGljayA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSB2YWx1ZSBiZWluZyBmYWRlZCB0by5cbiAgICAgIHNvdW5kLl9mYWRlVG8gPSB0bztcblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgdmFsdWUgb24gZWFjaCBpbnRlcnZhbCB0aWNrLlxuICAgICAgc291bmQuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIGJhc2VkIG9uIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IHRpY2suXG4gICAgICAgIHZhciB0aWNrID0gKERhdGUubm93KCkgLSBsYXN0VGljaykgLyBsZW47XG4gICAgICAgIGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdm9sICs9IGRpZmYgKiB0aWNrO1xuXG4gICAgICAgIC8vIFJvdW5kIHRvIHdpdGhpbiAyIGRlY2ltYWwgcG9pbnRzLlxuICAgICAgICB2b2wgPSBNYXRoLnJvdW5kKHZvbCAqIDEwMCkgLyAxMDA7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB2b2x1bWUgaXMgaW4gdGhlIHJpZ2h0IGJvdW5kcy5cbiAgICAgICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgdm9sID0gTWF0aC5tYXgodG8sIHZvbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gTWF0aC5taW4odG8sIHZvbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGFuZ2UgdGhlIHZvbHVtZS5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLnZvbHVtZSh2b2wsIHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwJ3Mgdm9sdW1lLlxuICAgICAgICBpZiAoaXNHcm91cCkge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdGhlIGZhZGUgaXMgY29tcGxldGUsIHN0b3AgaXQgYW5kIGZpcmUgZXZlbnQuXG4gICAgICAgIGlmICgodG8gPCBmcm9tICYmIHZvbCA8PSB0bykgfHwgKHRvID4gZnJvbSAmJiB2b2wgPj0gdG8pKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgc291bmQuX2ZhZGVUbyA9IG51bGw7XG4gICAgICAgICAgc2VsZi52b2x1bWUodG8sIHNvdW5kLl9pZCk7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHN0ZXBMZW4pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBzdG9wcyB0aGUgY3VycmVudGx5IHBsYXlpbmcgZmFkZSB3aGVuXG4gICAgICogYSBuZXcgZmFkZSBzdGFydHMsIHZvbHVtZSBpcyBjaGFuZ2VkIG9yIHRoZSBzb3VuZCBpcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3N0b3BGYWRlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgc2VsZi52b2x1bWUoc291bmQuX2ZhZGVUbywgaWQpO1xuICAgICAgICBzb3VuZC5fZmFkZVRvID0gbnVsbDtcbiAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIGlkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGxvb3AgcGFyYW1ldGVyIG9uIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIGxvb3AoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGxvb3ApIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgZm9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgbG9vcChsb29wLCBpZCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9Cb29sZWFufSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBsb29wIHZhbHVlLlxuICAgICAqL1xuICAgIGxvb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgbG9vcCwgaWQsIHNvdW5kO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBmb3IgbG9vcCBhbmQgaWQuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBncm91J3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3A7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBsb29wIHZhbHVlLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX2xvb3AgOiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIGxvb3BlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX2xvb3AgPSBsb29wO1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gbG9vcDtcbiAgICAgICAgICAgIGlmIChsb29wKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcblxuICAgICAgICAgICAgICAvLyBJZiBwbGF5aW5nLCByZXN0YXJ0IHBsYXliYWNrIHRvIGVuc3VyZSBsb29waW5nIHVwZGF0ZXMuXG4gICAgICAgICAgICAgIGlmIChzZWxmLnBsYXlpbmcoaWRzW2ldKSkge1xuICAgICAgICAgICAgICAgIHNlbGYucGF1c2UoaWRzW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXkoaWRzW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICByYXRlKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgcmF0ZShyYXRlLCBpZCkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqL1xuICAgIHJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgcmF0ZSwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcmF0ZSBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgcmF0ZSB2YWx1ZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAncmF0ZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnJhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBvdXIgcG9zaXRpb24gd2hlbiB0aGUgcmF0ZSBjaGFuZ2VkIGFuZCB1cGRhdGUgdGhlIHBsYXliYWNrXG4gICAgICAgICAgICAvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXG4gICAgICAgICAgICBpZiAoc2VsZi5wbGF5aW5nKGlkW2ldKSkge1xuICAgICAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gc2VsZi5fd2ViQXVkaW8gPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIDogc291bmQuX3BsYXlTdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdW5kLl9yYXRlID0gcmF0ZTtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSBwbGF5YmFjayByYXRlLlxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHJhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wbGF5YmFja1JhdGUgPSByYXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgdGltZXJzLlxuICAgICAgICAgICAgdmFyIHNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gKChzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgZW5kIHRpbWVyIGlmIHNvdW5kIGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRbaV1dIHx8ICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRbaV0pO1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbaWRbaV1dID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3JhdGUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcmF0ZSA6IHNlbGYuX3JhdGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBzZWVrIHBvc2l0aW9uIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHNlZWsoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKHNlZWspIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNvdW5kIG5vZGUuXG4gICAgICogICBzZWVrKHNlZWssIGlkKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICovXG4gICAgc2VlazogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBzZWVrLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHNlZWsgcG9zaXRpb24uXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc2VlayB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc2VlaycsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Vlay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XG4gICAgICAgICAgLy8gUGF1c2UgdGhlIHNvdW5kIGFuZCB1cGRhdGUgcG9zaXRpb24gZm9yIHJlc3RhcnRpbmcgcGxheWJhY2suXG4gICAgICAgICAgdmFyIHBsYXlpbmcgPSBzZWxmLnBsYXlpbmcoaWQpO1xuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdHJhY2sgYW5kIGNhbmNlbCB0aW1lci5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlZWsgcG9zaXRpb24gZm9yIEhUTUw1IEF1ZGlvLlxuICAgICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNlZWsgYW5kIGVtaXQgd2hlbiByZWFkeS5cbiAgICAgICAgICB2YXIgc2Vla0FuZEVtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGlmIHRoZSBzb3VuZCB3YXMgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICAgIHNlbGYucGxheShpZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3NlZWsnLCBpZCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBwbGF5IGxvY2sgdG8gYmUgdW5zZXQgYmVmb3JlIGVtaXR0aW5nIChIVE1MNSBBdWRpbykuXG4gICAgICAgICAgaWYgKHBsYXlpbmcgJiYgIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgZW1pdFNlZWsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGVtaXRTZWVrLCAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2Vla0FuZEVtaXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgcmVhbFRpbWUgPSBzZWxmLnBsYXlpbmcoaWQpID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSAtIHNvdW5kLl9wbGF5U3RhcnQgOiAwO1xuICAgICAgICAgICAgdmFyIHJhdGVTZWVrID0gc291bmQuX3JhdGVTZWVrID8gc291bmQuX3JhdGVTZWVrIC0gc291bmQuX3NlZWsgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9zZWVrICsgKHJhdGVTZWVrICsgcmVhbFRpbWUgKiBNYXRoLmFicyhzb3VuZC5fcmF0ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX25vZGUuY3VycmVudFRpbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHNwZWNpZmljIHNvdW5kIGlzIGN1cnJlbnRseSBwbGF5aW5nIG9yIG5vdCAoaWYgaWQgaXMgcHJvdmlkZWQpLCBvciBjaGVjayBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIHNvdW5kcyBpbiB0aGUgZ3JvdXAgaXMgcGxheWluZyBvciBub3QuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgdGhlIHdob2xlIHNvdW5kIGdyb3VwIGlzIGNoZWNrZWQuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBwbGF5aW5nIGFuZCBmYWxzZSBpZiBub3QuXG4gICAgICovXG4gICAgcGxheWluZzogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gQ2hlY2sgdGhlIHBhc3NlZCBzb3VuZCBJRCAoaWYgYW55KS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/ICFzb3VuZC5fcGF1c2VkIDogZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSwgbG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoZWNrIGlmIGFueSBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkdXJhdGlvbiBvZiB0aGlzIHNvdW5kLiBQYXNzaW5nIGEgc291bmQgaWQgd2lsbCByZXR1cm4gdGhlIHNwcml0ZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHJldHVybiBmdWxsIHNvdXJjZSBkdXJhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEF1ZGlvIGR1cmF0aW9uIGluIHNlY29uZHMuXG4gICAgICovXG4gICAgZHVyYXRpb246IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZHVyYXRpb24gPSBzZWxmLl9kdXJhdGlvbjtcblxuICAgICAgLy8gSWYgd2UgcGFzcyBhbiBJRCwgZ2V0IHRoZSBzb3VuZCBhbmQgcmV0dXJuIHRoZSBzcHJpdGUgbGVuZ3RoLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBkdXJhdGlvbiA9IHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSAvIDEwMDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkdXJhdGlvbjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBsb2FkZWQgc3RhdGUgb2YgdGhpcyBIb3dsLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gJ3VubG9hZGVkJywgJ2xvYWRpbmcnLCAnbG9hZGVkJ1xuICAgICAqL1xuICAgIHN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IHRoZSBjdXJyZW50IEhvd2wgb2JqZWN0LlxuICAgICAqIFRoaXMgd2lsbCBpbW1lZGlhdGVseSBzdG9wIGFsbCBzb3VuZCBpbnN0YW5jZXMgYXR0YWNoZWQgdG8gdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTdG9wIHBsYXlpbmcgYW55IGFjdGl2ZSBzb3VuZHMuXG4gICAgICB2YXIgc291bmRzID0gc2VsZi5fc291bmRzO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPHNvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBTdG9wIHRoZSBzb3VuZCBpZiBpdCBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgICAgaWYgKCFzb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHNlbGYuc3RvcChzb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc291cmNlIG9yIGRpc2Nvbm5lY3QuXG4gICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBTZXQgdGhlIHNvdXJjZSB0byAwLXNlY29uZCBzaWxlbmNlIHRvIHN0b3AgYW55IGRvd25sb2FkaW5nIChleGNlcHQgaW4gSUUpLlxuICAgICAgICAgIHNlbGYuX2NsZWFyU291bmQoc291bmRzW2ldLl9ub2RlKTtcblxuICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNvdW5kc1tpXS5fZXJyb3JGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzb3VuZHNbaV0uX2xvYWRGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNvdW5kc1tpXS5fZW5kRm4sIGZhbHNlKTtcblxuICAgICAgICAgIC8vIFJlbGVhc2UgdGhlIEF1ZGlvIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sLlxuICAgICAgICAgIEhvd2xlci5fcmVsZWFzZUh0bWw1QXVkaW8oc291bmRzW2ldLl9ub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVtcHR5IG91dCBhbGwgb2YgdGhlIG5vZGVzLlxuICAgICAgICBkZWxldGUgc291bmRzW2ldLl9ub2RlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdGltZXJzIGFyZSBjbGVhcmVkIG91dC5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjIHx8IHNlbGYuX3NyYy5pbmRleE9mKEhvd2xlci5faG93bHNbaV0uX3NyYykgPj0gMCkge1xuICAgICAgICAgIHJlbUNhY2hlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlICYmIHJlbUNhY2hlKSB7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBnbG9iYWwgZXJyb3JzLlxuICAgICAgSG93bGVyLm5vQXVkaW8gPSBmYWxzZTtcblxuICAgICAgLy8gQ2xlYXIgb3V0IGBzZWxmYC5cbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZiA9IG51bGw7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBvbmNlICAoSU5URVJOQUwpIE1hcmtzIGV2ZW50IHRvIGZpcmUgb25seSBvbmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQsIG9uY2UpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKG9uY2UgPyB7aWQ6IGlkLCBmbjogZm4sIG9uY2U6IG9uY2V9IDoge2lkOiBpZCwgZm46IGZufSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuIENhbGwgd2l0aG91dCBwYXJhbWV0ZXJzIHRvIHJlbW92ZSBhbGwgZXZlbnRzLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byByZW1vdmUuIExlYXZlIGVtcHR5IHRvIHJlbW92ZSBhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSByZW1vdmUgZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gQWxsb3cgcGFzc2luZyBqdXN0IGFuIGV2ZW50IGFuZCBJRC5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gZm47XG4gICAgICAgIGZuID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGZuIHx8IGlkKSB7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgcmVtb3ZlIHRoZSBwYXNzZWQgZnVuY3Rpb24uXG4gICAgICAgIGZvciAoaT0wOyBpPGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBpc0lkID0gKGlkID09PSBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIGlmIChmbiA9PT0gZXZlbnRzW2ldLmZuICYmIGlzSWQgfHwgIWZuICYmIGlzSWQpIHtcbiAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgdGhpcyB0eXBlLlxuICAgICAgICBzZWxmWydfb24nICsgZXZlbnRdID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiBldmVyeSB0eXBlLlxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGYpO1xuICAgICAgICBmb3IgKGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKChrZXlzW2ldLmluZGV4T2YoJ19vbicpID09PSAwKSAmJiBBcnJheS5pc0FycmF5KHNlbGZba2V5c1tpXV0pKSB7XG4gICAgICAgICAgICBzZWxmW2tleXNbaV1dID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQgYW5kIHJlbW92ZSBpdCBvbmNlIGZpcmVkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uY2U6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5vbihldmVudCwgZm4sIGlkLCAxKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEVtaXQgYWxsIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgYW5kIHBhc3MgdGhlIHNvdW5kIGlkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFNvdW5kIElELlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbXNnICAgTWVzc2FnZSB0byBnbyB3aXRoIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBpZCwgbXNnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCBmaXJlIGFsbCBmdW5jdGlvbnMuXG4gICAgICBmb3IgKHZhciBpPWV2ZW50cy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIC8vIE9ubHkgZmlyZSB0aGUgbGlzdGVuZXIgaWYgdGhlIGNvcnJlY3QgSUQgaXMgdXNlZC5cbiAgICAgICAgaWYgKCFldmVudHNbaV0uaWQgfHwgZXZlbnRzW2ldLmlkID09PSBpZCB8fCBldmVudCA9PT0gJ2xvYWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiwgZXZlbnRzW2ldLmZuKSwgMCk7XG5cbiAgICAgICAgICAvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChldmVudHNbaV0ub25jZSkge1xuICAgICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIGV2ZW50c1tpXS5mbiwgZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGFzcyB0aGUgZXZlbnQgdHlwZSBpbnRvIGxvYWQgcXVldWUgc28gdGhhdCBpdCBjYW4gY29udGludWUgc3RlcHBpbmcuXG4gICAgICBzZWxmLl9sb2FkUXVldWUoZXZlbnQpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUXVldWUgb2YgYWN0aW9ucyBpbml0aWF0ZWQgYmVmb3JlIHRoZSBzb3VuZCBoYXMgbG9hZGVkLlxuICAgICAqIFRoZXNlIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLCB3aXRoIHRoZSBuZXh0IG9ubHkgZmlyaW5nXG4gICAgICogYWZ0ZXIgdGhlIHByZXZpb3VzIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcgKGV2ZW4gaWYgYXN5bmMgbGlrZSBwbGF5KS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9sb2FkUXVldWU6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB0YXNrID0gc2VsZi5fcXVldWVbMF07XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoaXMgdGFzayBpZiBhIG1hdGNoaW5nIGV2ZW50IHdhcyBwYXNzZWQuXG4gICAgICAgIGlmICh0YXNrLmV2ZW50ID09PSBldmVudCkge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHRhc2sgaWYgbm8gZXZlbnQgdHlwZSBpcyBwYXNzZWQuXG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICB0YXNrLmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHBsYXliYWNrIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VuZGVkOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGU7XG5cbiAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBJRSBhbmQgdGhlcmUgd2FzIG5ldHdvcmsgbGF0ZW5jeSB3ZSBtYXkgYmUgY2xpcHBpbmdcbiAgICAgIC8vIGF1ZGlvIGJlZm9yZSBpdCBjb21wbGV0ZXMgcGxheWluZy4gTGV0cyBjaGVjayB0aGUgbm9kZSB0byBtYWtlIHN1cmUgaXRcbiAgICAgIC8vIGJlbGlldmVzIGl0IGhhcyBjb21wbGV0ZWQsIGJlZm9yZSBlbmRpbmcgdGhlIHBsYXliYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUucGF1c2VkICYmICFzb3VuZC5fbm9kZS5lbmRlZCAmJiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA8IHNvdW5kLl9zdG9wKSB7XG4gICAgICAgIHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIDEwMCk7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xuICAgICAgdmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmQuX2lkKTtcblxuICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXN0YXJ0IHRoaXMgdGltZXIgaWYgb24gYSBXZWIgQXVkaW8gbG9vcC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICB2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmsgdGhlIG5vZGUgYXMgcGF1c2VkLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxuICAgICAgICBIb3dsZXIuX2F1dG9TdXNwZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdXNpbmcgYSBzcHJpdGUsIGVuZCB0aGUgdHJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGVuZCB0aW1lciBmb3IgYSBzb3VuZCBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhclRpbWVyOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkXSkge1xuICAgICAgICAvLyBDbGVhciB0aGUgdGltZW91dCBvciByZW1vdmUgdGhlIGVuZGVkIGxpc3RlbmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuX2VuZFRpbWVyc1tpZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZW5kVGltZXJzW2lkXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW2lkXSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzZWxmLl9lbmRUaW1lcnNbaWRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzb3VuZCBpZGVudGlmaWVkIGJ5IHRoaXMgSUQsIG9yIHJldHVybiBudWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIFNvdW5kIG9iamVjdCBvciBudWxsLlxuICAgICAqL1xuICAgIF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaWQgPT09IHNlbGYuX3NvdW5kc1tpXS5faWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW5hY3RpdmUgc291bmQgZnJvbSB0aGUgcG9vbCBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfSBTb3VuZCBwbGF5YmFjayBvYmplY3QuXG4gICAgICovXG4gICAgX2luYWN0aXZlU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLl9kcmFpbigpO1xuXG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgcmV0dXJuIG5ldyBTb3VuZChzZWxmKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRHJhaW4gZXhjZXNzIGluYWN0aXZlIHNvdW5kcyBmcm9tIHRoZSBwb29sLlxuICAgICAqL1xuICAgIF9kcmFpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xuICAgICAgdmFyIGNudCA9IDA7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBsZXNzIHNvdW5kcyB0aGFuIHRoZSBtYXggcG9vbCBzaXplLCB3ZSBhcmUgZG9uZS5cbiAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChpPXNlbGYuX3NvdW5kcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKGNudCA8PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzZWxmLl9zb3VuZHNbaV0uX25vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3NvdW5kc1tpXS5fbm9kZS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBzb3VuZHMgdW50aWwgd2UgaGF2ZSB0aGUgcG9vbCBzaXplLlxuICAgICAgICAgIHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgY250LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBJRCdzIGZyb20gdGhlIHNvdW5kcyBwb29sLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgT25seSByZXR1cm4gb25lIElEIGlmIG9uZSBpcyBwYXNzZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cbiAgICAgKi9cbiAgICBfZ2V0U291bmRJZHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlkcy5wdXNoKHNlbGYuX3NvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbaWRdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSA9IEhvd2xlci5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gY2FjaGVbc2VsZi5fc3JjXTtcblxuICAgICAgLy8gQ29ubmVjdCB0byB0aGUgY29ycmVjdCBub2RlLlxuICAgICAgaWYgKHNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGxvb3BpbmcgYW5kIHBsYXliYWNrIHJhdGUuXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xuICAgICAgaWYgKHNvdW5kLl9sb29wKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcCB8fCAwO1xuICAgICAgfVxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50IG1lbW9yeSBsZWFrcyBieSBjbGVhbmluZyB1cCB0aGUgYnVmZmVyIHNvdXJjZSBhZnRlciBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgU291bmQncyBhdWRpbyBub2RlIGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYW5CdWZmZXI6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpc0lPUyA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnZlbmRvci5pbmRleE9mKCdBcHBsZScpID49IDA7XG5cbiAgICAgIGlmIChIb3dsZXIuX3NjcmF0Y2hCdWZmZXIgJiYgbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2Uub25lbmRlZCA9IG51bGw7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIGlmIChpc0lPUykge1xuICAgICAgICAgIHRyeSB7IG5vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IEhvd2xlci5fc2NyYXRjaEJ1ZmZlcjsgfSBjYXRjaChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZSA9IG51bGw7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNvdXJjZSB0byBhIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcgKGV4Y2VwdCBpbiBJRSkuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIEF1ZGlvIG5vZGUgdG8gY2xlYXIuXG4gICAgICovXG4gICAgX2NsZWFyU291bmQ6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBjaGVja0lFID0gL01TSUUgfFRyaWRlbnRcXC8vLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIGlmICghY2hlY2tJRSkge1xuICAgICAgICBub2RlLnNyYyA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQSc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob3dsIFRoZSBIb3dsIHBhcmVudCBncm91cC5cbiAgICovXG4gIHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBob3dsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBTb3VuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIC8vIEFkZCBpdHNlbGYgdG8gdGhlIHBhcmVudCdzIHBvb2wuXG4gICAgICBwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBub2RlLlxuICAgICAgc2VsZi5jcmVhdGUoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcbiAgICAgIHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XG5cbiAgICAgIGlmIChwYXJlbnQuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxuICAgICAgICBzZWxmLl9ub2RlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBzZWxmLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLl9ub2RlLmNvbm5lY3QoSG93bGVyLm1hc3RlckdhaW4pO1xuICAgICAgfSBlbHNlIGlmICghSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgLy8gR2V0IGFuIHVubG9ja2VkIEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLlxuICAgICAgICBzZWxmLl9ub2RlID0gSG93bGVyLl9vYnRhaW5IdG1sNUF1ZGlvKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxuICAgICAgICBzZWxmLl9lcnJvckZuID0gc2VsZi5fZXJyb3JMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCB0byBsZXQgdXMga25vdyB0aGUgc291bmQgaXMgcmVhZHkuXG4gICAgICAgIHNlbGYuX2xvYWRGbiA9IHNlbGYuX2xvYWRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgdGhlICdlbmRlZCcgZXZlbnQgb24gdGhlIHNvdW5kIHRvIGFjY291bnQgZm9yIGVkZ2UtY2FzZSB3aGVyZVxuICAgICAgICAvLyBhIGZpbml0ZSBzb3VuZCBoYXMgYSBkdXJhdGlvbiBvZiBJbmZpbml0eS5cbiAgICAgICAgc2VsZi5fZW5kRm4gPSBzZWxmLl9lbmRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGF1ZGlvIG5vZGUuXG4gICAgICAgIHNlbGYuX25vZGUuc3JjID0gcGFyZW50Ll9zcmM7XG4gICAgICAgIHNlbGYuX25vZGUucHJlbG9hZCA9IHBhcmVudC5fcHJlbG9hZCA9PT0gdHJ1ZSA/ICdhdXRvJyA6IHBhcmVudC5fcHJlbG9hZDtcbiAgICAgICAgc2VsZi5fbm9kZS52b2x1bWUgPSB2b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG5cbiAgICAgICAgLy8gQmVnaW4gbG9hZGluZyB0aGUgc291cmNlLlxuICAgICAgICBzZWxmLl9ub2RlLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQgdG8gdGhlIG9yaWdpbmFsIHN0YXRlIChmb3IgcmVjeWNsZSkuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIG9mIHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9yYXRlU2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIHNvIHRoYXQgaXQgaXNuJ3QgY29uZnVzZWQgd2l0aCB0aGUgcHJldmlvdXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9ICsrSG93bGVyLl9jb3VudGVyO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZXJyb3IgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2Vycm9yTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBGaXJlIGFuIGVycm9yIGV2ZW50IGFuZCBwYXNzIGJhY2sgdGhlIGNvZGUuXG4gICAgICBzZWxmLl9wYXJlbnQuX2VtaXQoJ2xvYWRlcnJvcicsIHNlbGYuX2lkLCBzZWxmLl9ub2RlLmVycm9yID8gc2VsZi5fbm9kZS5lcnJvci5jb2RlIDogMCk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGNhbnBsYXl0aHJvdWdoIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9sb2FkTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgICAgaWYgKE9iamVjdC5rZXlzKHBhcmVudC5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcGFyZW50Ll9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHBhcmVudC5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgcGFyZW50Ll9lbWl0KCdsb2FkJyk7XG4gICAgICAgIHBhcmVudC5fbG9hZFF1ZXVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGVuZGVkIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9lbmRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBPbmx5IGhhbmRsZSB0aGUgYGVuZGVkYGAgZXZlbnQgaWYgdGhlIGR1cmF0aW9uIGlzIEluZmluaXR5LlxuICAgICAgaWYgKHBhcmVudC5fZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyZW50IGR1cmF0aW9uIHRvIG1hdGNoIHRoZSByZWFsIGF1ZGlvIGR1cmF0aW9uLlxuICAgICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgICAgcGFyZW50Ll9kdXJhdGlvbiA9IE1hdGguY2VpbChzZWxmLl9ub2RlLmR1cmF0aW9uICogMTApIC8gMTA7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzcHJpdGUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcmVhbCBkdXJhdGlvbi5cbiAgICAgICAgaWYgKHBhcmVudC5fc3ByaXRlLl9fZGVmYXVsdFsxXSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICBwYXJlbnQuX3Nwcml0ZS5fX2RlZmF1bHRbMV0gPSBwYXJlbnQuX2R1cmF0aW9uICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgcmVndWxhciBlbmRlZCBtZXRob2QuXG4gICAgICAgIHBhcmVudC5fZW5kZWQoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lciBzaW5jZSB0aGUgZHVyYXRpb24gaXMgbm93IGNvcnJlY3QuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kRm4sIGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBCdWZmZXIgYSBzb3VuZCBmcm9tIFVSTCwgRGF0YSBVUkkgb3IgY2FjaGUgYW5kIGRlY29kZSB0byBhdWRpbyBzb3VyY2UgKFdlYiBBdWRpbyBBUEkpLlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqL1xuICB2YXIgbG9hZEJ1ZmZlciA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICB2YXIgdXJsID0gc2VsZi5fc3JjO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIGNhY2hlZCBhbmQgdXNlIGl0IGluc3RlYWQuXG4gICAgaWYgKGNhY2hlW3VybF0pIHtcbiAgICAgIC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGNhY2hlW3VybF0uZHVyYXRpb247XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxuICAgICAgbG9hZFNvdW5kKHNlbGYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcbiAgICAgIC8vIERlY29kZSB0aGUgYmFzZTY0IGRhdGEgVVJJIHdpdGhvdXQgWEhSLCBzaW5jZSBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICB2YXIgZGF0YSA9IGF0b2IodXJsLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGF0YVZpZXdbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG5cbiAgICAgIGRlY29kZUF1ZGlvRGF0YShkYXRhVmlldy5idWZmZXIsIHNlbGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oc2VsZi5feGhyLm1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBzZWxmLl94aHIud2l0aENyZWRlbnRpYWxzO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cbiAgICAgIC8vIEFwcGx5IGFueSBjdXN0b20gaGVhZGVycyB0byB0aGUgcmVxdWVzdC5cbiAgICAgIGlmIChzZWxmLl94aHIuaGVhZGVycykge1xuICAgICAgICBPYmplY3Qua2V5cyhzZWxmLl94aHIuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHNlbGYuX3hoci5oZWFkZXJzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZ2V0IGEgc3VjY2Vzc2Z1bCByZXNwb25zZSBiYWNrLlxuICAgICAgICB2YXIgY29kZSA9ICh4aHIuc3RhdHVzICsgJycpWzBdO1xuICAgICAgICBpZiAoY29kZSAhPT0gJzAnICYmIGNvZGUgIT09ICcyJyAmJiBjb2RlICE9PSAnMycpIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRmFpbGVkIGxvYWRpbmcgYXVkaW8gZmlsZSB3aXRoIHN0YXR1czogJyArIHhoci5zdGF0dXMgKyAnLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlY29kZUF1ZGlvRGF0YSh4aHIucmVzcG9uc2UsIHNlbGYpO1xuICAgICAgfTtcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGVycm9yLCBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZVt1cmxdO1xuICAgICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgc2FmZVhoclNlbmQoeGhyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgdGhlIFhIUiByZXF1ZXN0IHdyYXBwZWQgaW4gYSB0cnkvY2F0Y2guXG4gICAqIEBwYXJhbSAge09iamVjdH0geGhyIFhIUiB0byBzZW5kLlxuICAgKi9cbiAgdmFyIHNhZmVYaHJTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgeGhyLm9uZXJyb3IoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY29kZSBhdWRpbyBkYXRhIGZyb20gYW4gYXJyYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXIgVGhlIGF1ZGlvIGRhdGEuXG4gICAqIEBwYXJhbSAge0hvd2x9ICAgICAgICBzZWxmXG4gICAqL1xuICB2YXIgZGVjb2RlQXVkaW9EYXRhID0gZnVuY3Rpb24oYXJyYXlidWZmZXIsIHNlbGYpIHtcbiAgICAvLyBGaXJlIGEgbG9hZCBlcnJvciBpZiBzb21ldGhpbmcgYnJva2UuXG4gICAgdmFyIGVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRGVjb2RpbmcgYXVkaW8gZGF0YSBmYWlsZWQuJyk7XG4gICAgfTtcblxuICAgIC8vIExvYWQgdGhlIHNvdW5kIG9uIHN1Y2Nlc3MuXG4gICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgIGlmIChidWZmZXIgJiYgc2VsZi5fc291bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FjaGVbc2VsZi5fc3JjXSA9IGJ1ZmZlcjtcbiAgICAgICAgbG9hZFNvdW5kKHNlbGYsIGJ1ZmZlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvcigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZS5cbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIpLnRoZW4oc3VjY2VzcykuY2F0Y2goZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlciwgc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTb3VuZCBpcyBub3cgbG9hZGVkLCBzbyBmaW5pc2ggc2V0dGluZyBldmVyeXRoaW5nIHVwIGFuZCBmaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICogQHBhcmFtICB7T2JqZWN0fSBidWZmZXIgVGhlIGRlY29kZWQgYnVmZmVyIHNvdW5kIHNvdXJjZS5cbiAgICovXG4gIHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihzZWxmLCBidWZmZXIpIHtcbiAgICAvLyBTZXQgdGhlIGR1cmF0aW9uLlxuICAgIGlmIChidWZmZXIgJiYgIXNlbGYuX2R1cmF0aW9uKSB7XG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGJ1ZmZlci5kdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgaWYgKE9iamVjdC5rZXlzKHNlbGYuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxmLl9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgc2VsZi5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgfVxuXG4gICAgLy8gRmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkJyk7XG4gICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBhdWRpbyBjb250ZXh0IHdoZW4gYXZhaWxhYmxlLCBvciBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8gbW9kZS5cbiAgICovXG4gIHZhciBzZXR1cEF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIElmIHdlIGhhdmUgYWxyZWFkeSBkZXRlY3RlZCB0aGF0IFdlYiBBdWRpbyBpc24ndCBzdXBwb3J0ZWQsIGRvbid0IHJ1biB0aGlzIHN0ZXAgYWdhaW4uXG4gICAgaWYgKCFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8gYW5kIHNldHVwIHRoZSBBdWRpb0NvbnRleHQgaWYgd2UgYXJlLlxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBhdWRpbyBjb250ZXh0IGNyZWF0aW9uIHN0aWxsIGZhaWxlZCwgc2V0IHVzaW5nIHdlYiBhdWRpbyB0byBmYWxzZS5cbiAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYSB3ZWJ2aWV3IGlzIGJlaW5nIHVzZWQgb24gaU9TOCBvciBlYXJsaWVyIChyYXRoZXIgdGhhbiB0aGUgYnJvd3NlcikuXG4gICAgLy8gSWYgaXQgaXMsIGRpc2FibGUgV2ViIEF1ZGlvIGFzIGl0IGNhdXNlcyBjcmFzaGluZy5cbiAgICB2YXIgaU9TID0gKC9pUChob25lfG9kfGFkKS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5wbGF0Zm9ybSkpO1xuICAgIHZhciBhcHBWZXJzaW9uID0gSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvT1MgKFxcZCspXyhcXGQrKV8/KFxcZCspPy8pO1xuICAgIHZhciB2ZXJzaW9uID0gYXBwVmVyc2lvbiA/IHBhcnNlSW50KGFwcFZlcnNpb25bMV0sIDEwKSA6IG51bGw7XG4gICAgaWYgKGlPUyAmJiB2ZXJzaW9uICYmIHZlcnNpb24gPCA5KSB7XG4gICAgICB2YXIgc2FmYXJpID0gL3NhZmFyaS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoSG93bGVyLl9uYXZpZ2F0b3IgJiYgIXNhZmFyaSkge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgZXhwb3NlIHRoZSBtYXN0ZXIgR2Fpbk5vZGUgd2hlbiB1c2luZyBXZWIgQXVkaW8gKHVzZWZ1bCBmb3IgcGx1Z2lucyBvciBhZHZhbmNlZCB1c2FnZSkuXG4gICAgaWYgKEhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICBIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoSG93bGVyLl9tdXRlZCA/IDAgOiBIb3dsZXIuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KEhvd2xlci5jdHguZGVzdGluYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFJlLXJ1biB0aGUgc2V0dXAgb24gSG93bGVyLlxuICAgIEhvd2xlci5fc2V0dXAoKTtcbiAgfTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQU1EIChBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24pIGxpYnJhcmllcyBzdWNoIGFzIHJlcXVpcmUuanMuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgSG93bGVyOiBIb3dsZXIsXG4gICAgICAgIEhvd2w6IEhvd2xcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQ29tbW9uSlMgbGlicmFyaWVzIHN1Y2ggYXMgYnJvd3NlcmlmeS5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGV4cG9ydHMuSG93bGVyID0gSG93bGVyO1xuICAgIGV4cG9ydHMuSG93bCA9IEhvd2w7XG4gIH1cblxuICAvLyBBZGQgdG8gZ2xvYmFsIGluIE5vZGUuanMgKGZvciB0ZXN0aW5nLCBldGMpLlxuICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnbG9iYWwuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIGdsb2JhbC5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZ2xvYmFsLkhvd2wgPSBIb3dsO1xuICAgIGdsb2JhbC5Tb3VuZCA9IFNvdW5kO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7ICAvLyBEZWZpbmUgZ2xvYmFsbHkgaW4gY2FzZSBBTUQgaXMgbm90IGF2YWlsYWJsZSBvciB1bnVzZWQuXG4gICAgd2luZG93Lkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICB3aW5kb3cuSG93bGVyID0gSG93bGVyO1xuICAgIHdpbmRvdy5Ib3dsID0gSG93bDtcbiAgICB3aW5kb3cuU291bmQgPSBTb3VuZDtcbiAgfVxufSkoKTtcblxuXG4vKiFcbiAqICBTcGF0aWFsIFBsdWdpbiAtIEFkZHMgc3VwcG9ydCBmb3Igc3RlcmVvIGFuZCAzRCBhdWRpbyB3aGVyZSBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkLlxuICogIFxuICogIGhvd2xlci5qcyB2Mi4yLjNcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAyMCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU2V0dXAgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9wb3MgPSBbMCwgMCwgMF07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX29yaWVudGF0aW9uID0gWzAsIDAsIC0xLCAwLCAxLCAwXTtcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gdXBkYXRlIHRoZSBzdGVyZW8gcGFubmluZyBwb3NpdGlvbiBvZiBhbGwgY3VycmVudCBIb3dscy5cbiAgICogRnV0dXJlIEhvd2xzIHdpbGwgbm90IHVzZSB0aGlzIHZhbHVlIHVubGVzcyBleHBsaWNpdGx5IHNldC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHJldHVybiB7SG93bGVyL051bWJlcn0gICAgIFNlbGYgb3IgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHVwZGF0ZSB0aGVpciBzdGVyZW8gcGFubmluZy5cbiAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgIHNlbGYuX2hvd2xzW2ldLnN0ZXJlbyhwYW4pO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIgaW4gM0QgY2FydGVzaWFuIHNwYWNlLiBTb3VuZHMgdXNpbmdcbiAgICogM0QgcG9zaXRpb24gd2lsbCBiZSByZWxhdGl2ZSB0byB0aGUgbGlzdGVuZXIncyBwb3NpdGlvbi5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4IFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5IFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6IFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgIFNlbGYgb3IgY3VycmVudCBsaXN0ZW5lciBwb3NpdGlvbi5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMl0gOiB6O1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWS5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblouc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1syXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldFBvc2l0aW9uKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gc3BhY2UuXG4gICAqIEEgZnJvbnQgYW5kIHVwIHZlY3RvciBtdXN0IGJlIHByb3ZpZGVkLiBUaGUgZnJvbnQgaXMgdGhlIGRpcmVjdGlvbiB0aGVcbiAgICogZmFjZSBvZiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcsIGFuZCB1cCBpcyB0aGUgZGlyZWN0aW9uIHRoZSB0b3Agb2YgdGhlXG4gICAqIGxpc3RlbmVyIGlzIHBvaW50aW5nLiBUaHVzLCB0aGVzZSB2YWx1ZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGF0IHJpZ2h0IGFuZ2xlc1xuICAgKiBmcm9tIGVhY2ggb3RoZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geFVwIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHlVcCBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6VXAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBvcmllbnRhdGlvbiB2ZWN0b3JzLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHZhciBvciA9IHNlbGYuX29yaWVudGF0aW9uO1xuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IG9yWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBvclsyXSA6IHo7XG4gICAgeFVwID0gKHR5cGVvZiB4VXAgIT09ICdudW1iZXInKSA/IG9yWzNdIDogeFVwO1xuICAgIHlVcCA9ICh0eXBlb2YgeVVwICE9PSAnbnVtYmVyJykgPyBvcls0XSA6IHlVcDtcbiAgICB6VXAgPSAodHlwZW9mIHpVcCAhPT0gJ251bWJlcicpID8gb3JbNV0gOiB6VXA7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6LCB4VXAsIHlVcCwgelVwXTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFguc2V0VGFyZ2V0QXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRZLnNldFRhcmdldEF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWi5zZXRUYXJnZXRBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBYLnNldFRhcmdldEF0VGltZSh4VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWS5zZXRUYXJnZXRBdFRpbWUoeVVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFouc2V0VGFyZ2V0QXRUaW1lKHpVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge0hvd2x9XG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IG8ub3JpZW50YXRpb24gfHwgWzEsIDAsIDBdO1xuICAgICAgc2VsZi5fc3RlcmVvID0gby5zdGVyZW8gfHwgbnVsbDtcbiAgICAgIHNlbGYuX3BvcyA9IG8ucG9zIHx8IG51bGw7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogMCxcbiAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiAnaW52ZXJzZScsXG4gICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogMTAwMDAsXG4gICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogJ0hSVEYnLFxuICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IDEsXG4gICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogMVxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25zdGVyZW8gPSBvLm9uc3RlcmVvID8gW3tmbjogby5vbnN0ZXJlb31dIDogW107XG4gICAgICBzZWxmLl9vbnBvcyA9IG8ub25wb3MgPyBbe2ZuOiBvLm9ucG9zfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ub3JpZW50YXRpb24gPSBvLm9ub3JpZW50YXRpb24gPyBbe2ZuOiBvLm9ub3JpZW50YXRpb259XSA6IFtdO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG8pO1xuICAgIH07XG4gIH0pKEhvd2wucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBzdGVyZW8gcGFubmluZyBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGFsbCBpbiB0aGUgZ3JvdXAuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuICBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBzdGVyZW8gcGFuIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdzdGVyZW8nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RlcmVvKHBhbiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIFBhbm5lclN0ZXJlb05vZGUgc3VwcG9ydCBhbmQgZmFsbGJhY2sgdG8gUGFubmVyTm9kZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIHZhciBwYW5uZXJUeXBlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lciA9PT0gJ3VuZGVmaW5lZCcpID8gJ3NwYXRpYWwnIDogJ3N0ZXJlbyc7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fc3RlcmVvID0gcGFuO1xuICAgICAgICBzZWxmLl9wb3MgPSBbcGFuLCAwLCAwXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9zdGVyZW87XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzdHJlbyBwYW5uaW5nIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3BhbiwgMCwgMF07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBmYWxsaW5nIGJhY2ssIG1ha2Ugc3VyZSB0aGUgcGFubmluZ01vZGVsIGlzIGVxdWFscG93ZXIuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgPSAnZXF1YWxwb3dlcic7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCAhc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsIHBhbm5lclR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFubmVyVHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUocGFuLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHBhbiwgMCwgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnc3RlcmVvJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3N0ZXJlbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSAzRCBzcGF0aWFsIHBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgZ3JvdXAgcmVsYXRpdmUgdG8gdGhlIGdsb2JhbCBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIHBvc2l0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBvc2l0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdwb3MnLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucG9zKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyAwIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyAtMC41IDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIHBvc2l0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCBzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgncG9zJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3BvcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGF1ZGlvIHNvdXJjZSBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIGNvb3JkaW5hdGVcbiAgICogc3BhY2UuIERlcGVuZGluZyBvbiBob3cgZGlyZWN0aW9uIHRoZSBzb3VuZCBpcywgYmFzZWQgb24gdGhlIGBjb25lYCBhdHRyaWJ1dGVzLFxuICAgKiBhIHNvdW5kIHBvaW50aW5nIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIgY2FuIGJlIHF1aWV0IG9yIHNpbGVudC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIG9yaWVudGF0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugb3JpZW50YXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ29yaWVudGF0aW9uJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLm9yaWVudGF0aW9uKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMl0gOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fb3JpZW50YXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIG9yaWVudGF0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRWYWx1ZUF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnb3JpZW50YXRpb24nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fb3JpZW50YXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcGFubmVyIG5vZGUncyBhdHRyaWJ1dGVzIGZvciBhIHNvdW5kIG9yIGdyb3VwIG9mIHNvdW5kcy5cbiAgICogVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbCB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAqICAgcGFubmVyQXR0cigpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIobykgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICogICBwYW5uZXJBdHRyKG8sIGlkKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICpcbiAgICogICBBdHRyaWJ1dGVzOlxuICAgKiAgICAgY29uZUlubmVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIGFuIGFuZ2xlLCBpbiBkZWdyZWVzLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBpbnNpZGUgb2Ygd2hpY2ggdGhlcmUgd2lsbCBiZSBubyB2b2x1bWUgcmVkdWN0aW9uLlxuICAgKiAgICAgY29uZU91dGVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIGFuIGFuZ2xlLCBpbiBkZWdyZWVzLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBvdXRzaWRlIG9mIHdoaWNoIHRoZSB2b2x1bWUgd2lsbCBiZSByZWR1Y2VkIHRvIGEgY29uc3RhbnQgdmFsdWUgb2YgYGNvbmVPdXRlckdhaW5gLlxuICAgKiAgICAgY29uZU91dGVyR2FpbiAtICgwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIHRoZSBnYWluIG91dHNpZGUgb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgYGNvbmVPdXRlckFuZ2xlYC4gSXQgaXMgYSBsaW5lYXIgdmFsdWUgaW4gdGhlIHJhbmdlIGBbMCwgMV1gLlxuICAgKiAgICAgZGlzdGFuY2VNb2RlbCAtICgnaW52ZXJzZScgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyBhbGdvcml0aG0gdXNlZCB0byByZWR1Y2Ugdm9sdW1lIGFzIGF1ZGlvIG1vdmVzIGF3YXkgZnJvbVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLiBDYW4gYmUgYGxpbmVhcmAsIGBpbnZlcnNlYCBvciBgZXhwb25lbnRpYWwuXG4gICAqICAgICBtYXhEaXN0YW5jZSAtICgxMDAwMCBieSBkZWZhdWx0KSBUaGUgbWF4aW11bSBkaXN0YW5jZSBiZXR3ZWVuIHNvdXJjZSBhbmQgbGlzdGVuZXIsIGFmdGVyIHdoaWNoIHRoZSB2b2x1bWVcbiAgICogICAgICAgICAgICAgICAgICAgd2lsbCBub3QgYmUgcmVkdWNlZCBhbnkgZnVydGhlci5cbiAgICogICAgIHJlZkRpc3RhbmNlIC0gKDEgYnkgZGVmYXVsdCkgQSByZWZlcmVuY2UgZGlzdGFuY2UgZm9yIHJlZHVjaW5nIHZvbHVtZSBhcyBzb3VyY2UgbW92ZXMgZnVydGhlciBmcm9tIHRoZSBsaXN0ZW5lci5cbiAgICogICAgICAgICAgICAgICAgICAgVGhpcyBpcyBzaW1wbHkgYSB2YXJpYWJsZSBvZiB0aGUgZGlzdGFuY2UgbW9kZWwgYW5kIGhhcyBhIGRpZmZlcmVudCBlZmZlY3QgZGVwZW5kaW5nIG9uIHdoaWNoIG1vZGVsXG4gICAqICAgICAgICAgICAgICAgICAgIGlzIHVzZWQgYW5kIHRoZSBzY2FsZSBvZiB5b3VyIGNvb3JkaW5hdGVzLiBHZW5lcmFsbHksIHZvbHVtZSB3aWxsIGJlIGVxdWFsIHRvIDEgYXQgdGhpcyBkaXN0YW5jZS5cbiAgICogICAgIHJvbGxvZmZGYWN0b3IgLSAoMSBieSBkZWZhdWx0KSBIb3cgcXVpY2tseSB0aGUgdm9sdW1lIHJlZHVjZXMgYXMgc291cmNlIG1vdmVzIGZyb20gbGlzdGVuZXIuIFRoaXMgaXMgc2ltcGx5IGFcbiAgICogICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZSBvZiB0aGUgZGlzdGFuY2UgbW9kZWwgYW5kIGNhbiBiZSBpbiB0aGUgcmFuZ2Ugb2YgYFswLCAxXWAgd2l0aCBgbGluZWFyYCBhbmQgYFswLCDiiJ5dYFxuICAgKiAgICAgICAgICAgICAgICAgICAgIHdpdGggYGludmVyc2VgIGFuZCBgZXhwb25lbnRpYWxgLlxuICAgKiAgICAgcGFubmluZ01vZGVsIC0gKCdIUlRGJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIHdoaWNoIHNwYXRpYWxpemF0aW9uIGFsZ29yaXRobSBpcyB1c2VkIHRvIHBvc2l0aW9uIGF1ZGlvLlxuICAgKiAgICAgICAgICAgICAgICAgICAgIENhbiBiZSBgSFJURmAgb3IgYGVxdWFscG93ZXJgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtIb3dsL09iamVjdH0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGFubmVyIGF0dHJpYnV0ZXMuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wYW5uZXJBdHRyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBvLCBpZCwgc291bmQ7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICByZXR1cm4gc2VsZi5fcGFubmVyQXR0cjtcbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG8gPSBhcmdzWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdSdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmICghby5wYW5uZXJBdHRyKSB7XG4gICAgICAgICAgICBvLnBhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiBvLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogby5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgICAgY29uZU91dGVyR2Fpbjogby5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiBvLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICAgIG1heERpc3RhbmNlOiBvLm1heERpc3RhbmNlLFxuICAgICAgICAgICAgICByZWZEaXN0YW5jZTogby5yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgICAgcm9sbG9mZkZhY3Rvcjogby5yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgICAgICBwYW5uaW5nTW9kZWw6IG8ucGFubmluZ01vZGVsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgOiBzZWxmLl9jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZSA6IHNlbGYuX2NvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lT3V0ZXJHYWluIDogc2VsZi5fY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCA6IHNlbGYuX2Rpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIubWF4RGlzdGFuY2UgOiBzZWxmLl9tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSA6IHNlbGYuX3JlZkRpc3RhbmNlLFxuICAgICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yIDogc2VsZi5fcm9sbG9mZkZhY3RvcixcbiAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA6IHNlbGYuX3Bhbm5pbmdNb2RlbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9wYW5uZXJBdHRyIDogc2VsZi5fcGFubmVyQXR0cjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICBvID0gYXJnc1swXTtcbiAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWVzIG9mIHRoZSBzcGVjaWZpZWQgc291bmRzLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgdmFsdWVzIGludG8gdGhlIHNvdW5kLlxuICAgICAgICB2YXIgcGEgPSBzb3VuZC5fcGFubmVyQXR0cjtcbiAgICAgICAgcGEgPSB7XG4gICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiBwYS5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IHBhLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogcGEuY29uZU91dGVyR2FpbixcbiAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6IHBhLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiBwYS5tYXhEaXN0YW5jZSxcbiAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IHBhLnJlZkRpc3RhbmNlLFxuICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogcGEucm9sbG9mZkZhY3RvcixcbiAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6IHBhLnBhbm5pbmdNb2RlbFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFubmVyIHZhbHVlcyBvciBjcmVhdGUgYSBuZXcgcGFubmVyIGlmIG5vbmUgZXhpc3RzLlxuICAgICAgICB2YXIgcGFubmVyID0gc291bmQuX3Bhbm5lcjtcbiAgICAgICAgaWYgKHBhbm5lcikge1xuICAgICAgICAgIHBhbm5lci5jb25lSW5uZXJBbmdsZSA9IHBhLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgICAgIHBhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHBhLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgICAgIHBhbm5lci5jb25lT3V0ZXJHYWluID0gcGEuY29uZU91dGVyR2FpbjtcbiAgICAgICAgICBwYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHBhLmRpc3RhbmNlTW9kZWw7XG4gICAgICAgICAgcGFubmVyLm1heERpc3RhbmNlID0gcGEubWF4RGlzdGFuY2U7XG4gICAgICAgICAgcGFubmVyLnJlZkRpc3RhbmNlID0gcGEucmVmRGlzdGFuY2U7XG4gICAgICAgICAgcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBwYS5yb2xsb2ZmRmFjdG9yO1xuICAgICAgICAgIHBhbm5lci5wYW5uaW5nTW9kZWwgPSBwYS5wYW5uaW5nTW9kZWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlLlxuICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgU291bmQgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIFNvdW5kIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlIFNvdW5kJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXG4gICAgICAvLyBJZiBhIHN0ZXJlbyBvciBwb3NpdGlvbiB3YXMgc3BlY2lmaWVkLCBzZXQgaXQgdXAuXG4gICAgICBpZiAoc2VsZi5fc3RlcmVvKSB7XG4gICAgICAgIHBhcmVudC5zdGVyZW8oc2VsZi5fc3RlcmVvKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcG9zKSB7XG4gICAgICAgIHBhcmVudC5wb3Moc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSwgc2VsZi5faWQpO1xuICAgICAgfVxuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIFNvdW5kLnJlc2V0IG1ldGhvZCB0byBjbGVhbiB1cCBwcm9wZXJ0aWVzIGZyb20gdGhlIHNwYXRpYWwgcGx1Z2luLlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIFNvdW5kIHJlc2V0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUucmVzZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIHNwYXRpYWwgcGx1Z2luIHByb3BlcnRpZXMgb24gdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBJZiBhIHN0ZXJlbyBvciBwb3NpdGlvbiB3YXMgc3BlY2lmaWVkLCBzZXQgaXQgdXAuXG4gICAgICBpZiAoc2VsZi5fc3RlcmVvKSB7XG4gICAgICAgIHBhcmVudC5zdGVyZW8oc2VsZi5fc3RlcmVvKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcG9zKSB7XG4gICAgICAgIHBhcmVudC5wb3Moc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSwgc2VsZi5faWQpO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wYW5uZXIpIHtcbiAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgcGFubmVyLlxuICAgICAgICBzZWxmLl9wYW5uZXIuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgc2VsZi5fcGFubmVyID0gdW5kZWZpbmVkO1xuICAgICAgICBwYXJlbnQuX3JlZnJlc2hCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbXBsZXRlIHJlc2V0dGluZyBvZiB0aGUgc291bmQuXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLnJlc2V0KTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBhbmQgc2F2ZSBpdCBvbiB0aGUgc291bmQuXG4gICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBTcGVjaWZpYyBzb3VuZCB0byBzZXR1cCBwYW5uaW5nIG9uLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUeXBlIG9mIHBhbm5lciB0byBjcmVhdGU6ICdzdGVyZW8nIG9yICdzcGF0aWFsJy5cbiAgICovXG4gIHZhciBzZXR1cFBhbm5lciA9IGZ1bmN0aW9uKHNvdW5kLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgJ3NwYXRpYWwnO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgcGFubmVyIG5vZGUuXG4gICAgaWYgKHR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZUlubmVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckdhaW4gPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJHYWluO1xuICAgICAgc291bmQuX3Bhbm5lci5kaXN0YW5jZU1vZGVsID0gc291bmQuX3Bhbm5lckF0dHIuZGlzdGFuY2VNb2RlbDtcbiAgICAgIHNvdW5kLl9wYW5uZXIubWF4RGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5tYXhEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucmVmRGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5yZWZEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucm9sbG9mZkZhY3RvciA9IHNvdW5kLl9wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3I7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbm5pbmdNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbDtcblxuICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1swXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oc291bmQuX3Bvc1swXSwgc291bmQuX3Bvc1sxXSwgc291bmQuX3Bvc1syXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblswXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblsxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblsyXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHNvdW5kLl9vcmllbnRhdGlvblswXSwgc291bmQuX29yaWVudGF0aW9uWzFdLCBzb3VuZC5fb3JpZW50YXRpb25bMl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9zdGVyZW8sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgIH1cblxuICAgIHNvdW5kLl9wYW5uZXIuY29ubmVjdChzb3VuZC5fbm9kZSk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIGNvbm5lY3Rpb25zLlxuICAgIGlmICghc291bmQuX3BhdXNlZCkge1xuICAgICAgc291bmQuX3BhcmVudC5wYXVzZShzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkLCB0cnVlKTtcbiAgICB9XG4gIH07XG59KSgpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiZXhwb3J0IGVudW0gVGltZXIge1xyXG4gICAgUG9tb2Rvcm8gPSBcIlBvbW9kb3JvXCIsXHJcbiAgICBMb25nQnJlYWsgPSBcIkxvbmcgQnJlYWtcIixcclxuICAgIFNob3J0QnJlYWsgPSBcIlNob3J0IEJyZWFrXCJcclxufSIsImV4cG9ydCBjbGFzcyBTZXR0aW5ncyB7XHJcbiAgICBzdGF0aWMgZXhpc3RzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc3RvcmUoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbG9hZChrZXk6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGxvYWRCb29sZWFuKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoU2V0dGluZ3MubG9hZChrZXkpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZXhpc3Qoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gU2V0dGluZ3MubG9hZChrZXkpICE9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0b3JlSWZOdWxsKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgaWYgKCFTZXR0aW5ncy5leGlzdChrZXkpKSB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgSG93bCB9IGZyb20gJ2hvd2xlcic7XHJcbmltcG9ydCB7IFNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFRpbWVyIH0gZnJvbSAnLi90aW1lcic7XHJcblxyXG5jbGFzcyBCb2xvZ25lc2Uge1xyXG4gICAgYWxhcm06IGFueTtcclxuICAgIHRpbWVyOiBFbGVtZW50O1xyXG4gICAgdGltZXJTdWI6IEVsZW1lbnQ7XHJcbiAgICB0aW1lOiBudW1iZXI7XHJcbiAgICBpbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQ7XHJcblxyXG4gICAgdGltZXJUeXBlOiBUaW1lcjtcclxuICAgIGNvdW50ZXI6IG51bWJlcjtcclxuICAgIGRpc3BsYXk6IG51bWJlcjtcclxuICAgIHN1Yl9kaXM6IG51bWJlcjtcclxuICAgIGlzX3RpY2tpbmc6IGJvb2xlYW47XHJcblxyXG4gICAgcG9tb2Rvcm9CdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgbG9uZ0JyZWFrQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHNob3J0QnJlYWtCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgIHBvbW9kb3JvQXV0b0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcG9tb2Rvcm9CcmVha3NJbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICBpbmZpbml0ZUFsYXJtQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICB0YWJUaW1lckNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgbm90aWZpY2F0aW9uQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgYWxhcm1PdmVybGF5OiBFbGVtZW50O1xyXG5cclxuICAgIG5vdGlmaWNhdGlvbjogTm90aWZpY2F0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuaW5pdFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3dvcmtlci5qcycpLnRoZW4oZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpbWVyVHlwZSA9IFRpbWVyLlBvbW9kb3JvO1xyXG4gICAgICAgIHRoaXMudGltZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpbWVyXCIpO1xyXG4gICAgICAgIHRoaXMudGltZXJTdWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpbWVyLXN1YlwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb21vZG9yb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9tb2Rvcm8tYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMudXBkYXRlVGltZXIoU2V0dGluZ3MubG9hZChcInBvbW9kb3JvXCIpLCBUaW1lci5Qb21vZG9ybykpO1xyXG5cclxuICAgICAgICB0aGlzLmxvbmdCcmVha0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbC1icmVhay1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5sb25nQnJlYWtCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMudXBkYXRlVGltZXIoU2V0dGluZ3MubG9hZChcImxvbmctYnJlYWtcIiksIFRpbWVyLkxvbmdCcmVhaykpO1xyXG5cclxuICAgICAgICB0aGlzLnNob3J0QnJlYWtCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3MtYnJlYWstYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuc2hvcnRCcmVha0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy51cGRhdGVUaW1lcihTZXR0aW5ncy5sb2FkKFwic2hvcnQtYnJlYWtcIiksIFRpbWVyLlNob3J0QnJlYWspKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb21vZG9yb0F1dG9DaGVja2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9tb2Rvcm8tYXV0by1tb2RlXCIpO1xyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9BdXRvQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwicG9tb2Rvcm9fYXV0b1wiLCB0aGlzLnBvbW9kb3JvQXV0b0NoZWNrYm94LmNoZWNrZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBvbW9kb3JvQnJlYWtzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvbW9kb3JvLWJyZWFrc1wiKTtcclxuICAgICAgICB0aGlzLnBvbW9kb3JvQnJlYWtzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwibWF4X2JyZWFrXCIsIHRoaXMucG9tb2Rvcm9CcmVha3NJbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwiY3VyX2JyZWFrXCIsIDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBvbW9kb3JvQXV0b0NoZWNrYm94LmNoZWNrZWQgPSBKU09OLnBhcnNlKFNldHRpbmdzLmxvYWQoXCJwb21vZG9yb19hdXRvXCIpKTtcclxuICAgICAgICB0aGlzLnBvbW9kb3JvQnJlYWtzSW5wdXQudmFsdWUgPSBTZXR0aW5ncy5sb2FkKFwibWF4X2JyZWFrXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmFsYXJtT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWxhcm0tb3ZlcmxheVwiKTtcclxuICAgICAgICB0aGlzLmFsYXJtT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVDU1MoXCIjdGVzdFwiLCBcImJvdW5jZU91dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsYXJtT3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWxhcm0uZmFkZShTZXR0aW5ncy5sb2FkKFwidm9sdW1lXCIpLCAwLCAyMDAwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZpbml0ZUFsYXJtQ2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luZmluaXRlLWFsYXJtXCIpO1xyXG4gICAgICAgIHRoaXMuaW5maW5pdGVBbGFybUNoZWNrYm94LmNoZWNrZWQgPSBTZXR0aW5ncy5sb2FkQm9vbGVhbihcImluZmluaXRlLWFsYXJtXCIpO1xyXG4gICAgICAgIHRoaXMuaW5maW5pdGVBbGFybUNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZShcImluZmluaXRlLWFsYXJtXCIsIHRoaXMuaW5maW5pdGVBbGFybUNoZWNrYm94LmNoZWNrZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRhYlRpbWVyQ2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RhYi10aW1lclwiKTtcclxuICAgICAgICB0aGlzLnRhYlRpbWVyQ2hlY2tib3guY2hlY2tlZCA9IFNldHRpbmdzLmxvYWRCb29sZWFuKFwidGFiLXRpbWVyXCIpO1xyXG4gICAgICAgIHRoaXMudGFiVGltZXJDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJ0YWItdGltZXJcIiwgdGhpcy50YWJUaW1lckNoZWNrYm94LmNoZWNrZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbkNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbmFibGUtbm90aWZpY2F0aW9uXCIpO1xyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uQ2hlY2tib3guY2hlY2tlZCA9IFNldHRpbmdzLmxvYWRCb29sZWFuKFwiZW5hYmxlLW5vdGlmaWNhdGlvblwiKTtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbkNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwiZW5hYmxlLW5vdGlmaWNhdGlvblwiLCB0aGlzLm5vdGlmaWNhdGlvbkNoZWNrYm94LmNoZWNrZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN0YXJ0VGltZXIoKSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdG9wXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN0b3BUaW1lcigpKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Jlc2V0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnJlc2V0VGltZXIoKSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2V0dGluZ3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMub3ZlcmxheUZhZGVJbigpKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NldHRpbmdzLWNsb3NlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLm92ZXJsYXlGYWRlT3V0KCkpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2MtcG9tb2Rvcm9cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwicG9tb2Rvcm9cIiwgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYy1wb21vZG9yb1wiKSkudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2MtbC1icmVha1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJsb25nLWJyZWFrXCIsICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2MtbC1icmVha1wiKSkudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Mtcy1icmVha1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJzaG9ydC1icmVha1wiLCAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjLXMtYnJlYWtcIikpLnZhbHVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdXN0b20tYWxhcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwiYWxhcm1cIiwgKDxIVE1MU2VsZWN0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2N1c3RvbS1hbGFybVwiKSkudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZvbHVtZS1jb250cm9sXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZShcInZvbHVtZVwiLCAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2b2x1bWUtY29udHJvbFwiKSkudmFsdWUpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWxhcm0tcHJldmlld1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgSG93bCh7XHJcbiAgICAgICAgICAgICAgICB2b2x1bWU6IFNldHRpbmdzLmxvYWQoXCJ2b2x1bWVcIiksXHJcbiAgICAgICAgICAgICAgICBodG1sNTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNyYzogWydzb3VuZHMvJyArIFNldHRpbmdzLmxvYWQoXCJhbGFybVwiKSArICcubXAzJ11cclxuICAgICAgICAgICAgfSkucGxheSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyXCIpLmZvckVhY2goZWxlbSA9PiB0aGlzLnJlZ2lzdGVyQnV0dG9uaGFuZGxlKGVsZW0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmRleEFsYXJtcygpO1xyXG4gICAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NldHRpbmdzLWJ1dHRvblwiKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIExPQUQgU0VUVElOR1MgKi9cclxuICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjLXBvbW9kb3JvXCIpKS52YWx1ZSA9IFNldHRpbmdzLmxvYWQoXCJwb21vZG9yb1wiKTtcclxuICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjLWwtYnJlYWtcIikpLnZhbHVlID0gU2V0dGluZ3MubG9hZChcImxvbmctYnJlYWtcIik7XHJcbiAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYy1zLWJyZWFrXCIpKS52YWx1ZSA9IFNldHRpbmdzLmxvYWQoXCJzaG9ydC1icmVha1wiKTtcclxuICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2b2x1bWUtY29udHJvbFwiKSkudmFsdWUgPSBTZXR0aW5ncy5sb2FkKFwidm9sdW1lXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZXIodGhpcy50aW1lLCBUaW1lci5Qb21vZG9ybyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFRpbWVyKCkge1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IHRoaXMudGltZSAqIDYwO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSA9IHRoaXMudGltZTtcclxuICAgICAgICB0aGlzLnN1Yl9kaXMgPSAwO1xyXG4gICAgICAgIHRoaXMuaXNfdGlja2luZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0VGltZXIoKSB7XHJcbiAgICAgICAgbGV0IHByZTogc3RyaW5nO1xyXG4gICAgICAgIGxldCBzdWI6IHN0cmluZztcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzX3RpY2tpbmcpIHtcclxuICAgICAgICAgICAgaWYgKFNldHRpbmdzLmxvYWQoXCJhbGFybVwiKSAhPSBcIi1cIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGFybSA9IG5ldyBIb3dsKHtcclxuICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IFNldHRpbmdzLmxvYWQoXCJ2b2x1bWVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbDU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IFNldHRpbmdzLmxvYWRCb29sZWFuKFwiaW5maW5pdGUtYWxhcm1cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBbJ3NvdW5kcy8nICsgU2V0dGluZ3MubG9hZChcImFsYXJtXCIpICsgJy5tcDMnXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNfdGlja2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIgPSB0aGlzLmNvdW50ZXIgLSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ID0gTWF0aC5mbG9vcih0aGlzLmNvdW50ZXIgLyA2MCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3ViX2RpcyA9PSAwKSB0aGlzLnN1Yl9kaXMgPSA2MDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ViX2Rpcy0tO1xyXG5cclxuICAgICAgICAgICAgICAgIHByZSA9IHRoaXMuZGlzcGxheS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgc3ViID0gdGhpcy5zdWJfZGlzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJfZGlzIDwgMTApIHN1YiA9IFwiMFwiICsgdGhpcy5zdWJfZGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheSA8IDEwKSBwcmUgPSAwICsgdGhpcy5kaXNwbGF5LnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lci50ZXh0Q29udGVudCA9IHByZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZXJTdWIudGV4dENvbnRlbnQgPSBzdWI7XHJcbiAgICAgICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJ0YWItdGltZXJcIikpIHRoaXMucmVmcmVzaFRpdGxlKHByZSArIFwiOlwiICsgc3ViKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ZXIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsYXJtLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJpbmZpbml0ZS1hbGFybVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsYXJtT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVDU1MoXCIjYWxhcm0tb3ZlcmxheVwiLCBcImJvdW5jZUluRG93blwiLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnBhcnNlKFNldHRpbmdzLmxvYWQoXCJwb21vZG9yb19hdXRvXCIpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50aW1lclR5cGUgPT0gVGltZXIuUG9tb2Rvcm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwiY3VyX2JyZWFrXCIsICtTZXR0aW5ncy5sb2FkKFwiY3VyX2JyZWFrXCIpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZChcImN1cl9icmVha1wiKSA8IFNldHRpbmdzLmxvYWQoXCJtYXhfYnJlYWtcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3J0QnJlYWtCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZChcImN1cl9icmVha1wiKSA+PSBTZXR0aW5ncy5sb2FkKFwibWF4X2JyZWFrXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJjdXJfYnJlYWtcIiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb25nQnJlYWtCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGltZXJUeXBlID09IFRpbWVyLlNob3J0QnJlYWsgfHwgdGhpcy50aW1lclR5cGUgPT0gVGltZXIuTG9uZ0JyZWFrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbW9kb3JvQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUaXRsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTZXR0aW5ncy5sb2FkQm9vbGVhbihcImVuYWJsZS1ub3RpZmljYXRpb25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3ROb3RpZmljYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0b3BUaW1lcigpIHtcclxuICAgICAgICB0aGlzLmlzX3RpY2tpbmcgPSBmYWxzZTtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VGltZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRpbWVyKHRoaXMudGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVGltZXIodDogbnVtYmVyLCB0eXBlPzogVGltZXIpIHtcclxuICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWUgPSB0O1xyXG4gICAgICAgIHRoaXMudGltZXJUeXBlID0gdHlwZTtcclxuXHJcbiAgICAgICAgdmFyIHZhbHVlID0gdC50b1N0cmluZygpO1xyXG4gICAgICAgIGlmICh0IDwgMTApIHZhbHVlID0gMCArIHZhbHVlO1xyXG4gICAgICAgIHRoaXMudGltZXIudGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnRpbWVyU3ViLnRleHRDb250ZW50ID0gXCIwMFwiO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRUaW1lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyQnV0dG9uaGFuZGxlKGVsZW1lbnQ6IEVsZW1lbnQpIHtcclxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZXJcIikuZm9yRWFjaChlbGVtID0+IGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2YXRlZFwiKSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjdGl2YXRlZFwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvdmVybGF5RmFkZUluKCkge1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheVwiKTtcclxuXHJcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlQ1NTKFwiI292ZXJsYXlcIiwgXCJib3VuY2VJbkRvd25cIiwgbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcmxheUZhZGVPdXQoKSB7XHJcbiAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5XCIpO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1hdGVDU1MoXCIjb3ZlcmxheVwiLCBcImJvdW5jZU91dFVwXCIsICgpID0+IHtcclxuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pc190aWNraW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEN1cnJlbnRBbGFybSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRlQ1NTKGVsZW1lbnQ6IHN0cmluZywgYW5pbWF0aW9uTmFtZTogc3RyaW5nLCBjYWxsYmFjazogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudClcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgYW5pbWF0aW9uTmFtZSlcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQW5pbWF0aW9uRW5kKCkge1xyXG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGVkJywgYW5pbWF0aW9uTmFtZSlcclxuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBoYW5kbGVBbmltYXRpb25FbmQpXHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBjYWxsYmFjaygpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGhhbmRsZUFuaW1hdGlvbkVuZClcclxuICAgIH1cclxuXHJcbiAgICBpbmRleEFsYXJtcygpIHtcclxuICAgICAgICBjb25zdCBhbGFybXMgPSBbXCItXCIsIFwiT3dsXCIsIFwiRHVja1wiXTtcclxuICAgICAgICBhbGFybXMuZm9yRWFjaChhID0+IHtcclxuICAgICAgICAgICAgdmFyIGFsciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIGFsci52YWx1ZSA9IGEudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgYWxyLnRleHQgPSBhO1xyXG5cclxuICAgICAgICAgICAgaWYgKFNldHRpbmdzLmxvYWQoXCJhbGFybVwiKSA9PT0gYS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBhbHIuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoPEhUTUxTZWxlY3RFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3VzdG9tLWFsYXJtXCIpKS5hZGQoYWxyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoQ3VycmVudEFsYXJtKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVyVHlwZSA9PSBUaW1lci5Qb21vZG9ybykge1xyXG4gICAgICAgICAgICB0aGlzLnBvbW9kb3JvQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy50aW1lclR5cGUgPT0gVGltZXIuTG9uZ0JyZWFrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9uZ0JyZWFrQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy50aW1lclR5cGUgPT0gVGltZXIuU2hvcnRCcmVhaykge1xyXG4gICAgICAgICAgICB0aGlzLnNob3J0QnJlYWtCdXR0b24uY2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaFRpdGxlKHRpbWU6IHN0cmluZykge1xyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJCb2xvZ25lc2VUaW1lIC0gXCIgKyB0aW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VGl0bGUoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIkJvbG9nbmVzZVRpbWVcIjtcclxuICAgIH1cclxuXHJcbiAgICBpbml0U2V0dGluZ3MoKSB7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJwb21vZG9yb1wiLCAyNSk7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJsb25nLWJyZWFrXCIsIDIwKTtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcInNob3J0LWJyZWFrXCIsIDUpO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwiYWxhcm1cIiwgXCJvd2xcIik7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJ2b2x1bWVcIiwgMC41KTtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcInBvbW9kb3JvX2F1dG9cIiwgZmFsc2UpO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwibWF4X2JyZWFrXCIsIDQpO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwiY3VyX2JyZWFrXCIsIDApO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwidGFiLXRpbWVyXCIsIGZhbHNlKTtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcImluZmluaXRlLWFsYXJtXCIsIGZhbHNlKTtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcImVuYWJsZS1ub3RpZmljYXRpb25cIiwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdE5vdGlmaWNhdGlvbigpIHtcclxuICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09IFwiZ3JhbnRlZFwiKSB7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IHRoaXMudGltZXJUeXBlLnRvU3RyaW5nKCkgKyBcIiBmaW5pc2hlZCFcIjtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBcIllvdXIgdGltZXIgaGFzIGZpbmlzaGVkIVwiO1xyXG4gICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJwb21vZG9yb19hdXRvXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9ICtTZXR0aW5ncy5sb2FkKFwiY3VyX2JyZWFrXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSArU2V0dGluZ3MubG9hZChcIm1heF9icmVha1wiKTtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gbSAtIGM7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dCA9IFwiSnVzdCBcIiArIGQgKyBcIiBtb3JlIHBvbW9kb3JvIHNlc3Npb24ocykgdGlsbCBhIGxvbmcgYnJlYWshXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAoZCA9PT0gbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIllvdSd2ZSBlYXJuZWQgeW91IGEgbG9uZyBicmVhayFcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKHRpdGxlLCB7XHJcbiAgICAgICAgICAgICAgICBib2R5OiB0ZXh0LFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJ2FuZHJvaWQtY2hyb21lLTE5MngxOTIucG5nJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCB0aW1lciA9IFNldHRpbmdzLmxvYWQoXCJwb21vZG9yb1wiKVxyXG4gICAgbmV3IEJvbG9nbmVzZSh0aW1lciAhPSBudWxsID8gdGltZXIgOiBcIjI1XCIpO1xyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9