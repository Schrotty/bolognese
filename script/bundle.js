!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t,o){(function(o){var n;
/*!
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var n=t._howls[o]._getSoundIds(),r=0;r<n.length;r++){var a=t._howls[o]._soundById(n[r]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||i;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,i.ctx.currentTime);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var n=t._howls[o]._getSoundIds(),r=0;r<n.length;r++){var a=t._howls[o]._soundById(n[r]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},unload:function(){for(var e=this||i,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var o=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=n&&parseInt(n[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!o&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(o){for(var n=0;n<e.html5PoolSize;n++)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(o){e.noAudio=!0}for(n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),a=0;a<i.length;a++){var s=e._howls[n]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var o=0;o<e._howls.length;o++)e._howls[o]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||i;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var o=0;o<e._howls[t]._sounds.length;o++)if(!e._howls[t]._sounds[o]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then((function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())})))}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var i=new r,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return i.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=i.usingWebAudio&&!t._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(i.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var o,n;if(this._format&&this._format[t])o=this._format[t];else{if("string"!=typeof(n=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(o=/^data:audio\/([^;,]+);/i.exec(n))||(o=/\.([^.]+)$/.exec(n.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&i.codecs(o)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&d(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var o=this,n=null;if("number"==typeof e)n=e,e=null;else{if("string"==typeof e&&"loaded"===o._state&&!o._sprite[e])return null;if(void 0===e&&(e="__default",!o._playLock)){for(var r=0,a=0;a<o._sounds.length;a++)o._sounds[a]._paused&&!o._sounds[a]._ended&&(r++,n=o._sounds[a]._id);1===r?e=null:n=null}}var s=n?o._soundById(n):o._inactiveSound();if(!s)return null;if(n&&!e&&(e=s._sprite||"__default"),"loaded"!==o._state){s._sprite=e,s._ended=!1;var u=s._id;return o._queue.push({event:"play",action:function(){o.play(u)}}),u}if(n&&!s._paused)return t||o._loadQueue("play"),s._id;o._webAudio&&i._autoResume();var d=Math.max(0,s._seek>0?s._seek:o._sprite[e][0]/1e3),l=Math.max(0,(o._sprite[e][0]+o._sprite[e][1])/1e3-d),c=1e3*l/Math.abs(s._rate),_=o._sprite[e][0]/1e3,p=(o._sprite[e][0]+o._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=d,s._start=_,s._stop=p,s._loop=!(!s._loop&&!o._sprite[e][2])};if(!(d>=p)){var h=s._node;if(o._webAudio){var m=function(){o._playLock=!1,f(),o._refreshBuffer(s);var e=s._muted||o._muted?0:s._volume;h.gain.setValueAtTime(e,i.ctx.currentTime),s._playStart=i.ctx.currentTime,void 0===h.bufferSource.start?s._loop?h.bufferSource.noteGrainOn(0,d,86400):h.bufferSource.noteGrainOn(0,d,l):s._loop?h.bufferSource.start(0,d,86400):h.bufferSource.start(0,d,l),c!==1/0&&(o._endTimers[s._id]=setTimeout(o._ended.bind(o,s),c)),t||setTimeout((function(){o._emit("play",s._id),o._loadQueue()}),0)};"running"===i.state?m():(o._playLock=!0,o.once("resume",m),o._clearTimer(s._id))}else{var v=function(){h.currentTime=d,h.muted=s._muted||o._muted||i._muted||h.muted,h.volume=s._volume*i.volume(),h.playbackRate=s._rate;try{var n=h.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(o._playLock=!0,f(),n.then((function(){o._playLock=!1,h._unlocked=!0,t||(o._emit("play",s._id),o._loadQueue())})).catch((function(){o._playLock=!1,o._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(o._playLock=!1,f(),o._emit("play",s._id),o._loadQueue()),h.playbackRate=s._rate,h.paused)return void o._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?o._endTimers[s._id]=setTimeout(o._ended.bind(o,s),c):(o._endTimers[s._id]=function(){o._ended(s),h.removeEventListener("ended",o._endTimers[s._id],!1)},h.addEventListener("ended",o._endTimers[s._id],!1))}catch(e){o._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=o._src,h.load());var y=window&&window.ejecta||!h.readyState&&i._navigator.isCocoonJS;if(h.readyState>=3||y)v();else{o._playLock=!0;var g=function(){v(),h.removeEventListener(i._canPlayEvent,g,!1)};h.addEventListener(i._canPlayEvent,g,!1),o._clearTimer(s._id)}}return s._id}o._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var o=t._getSoundIds(e),n=0;n<o.length;n++){t._clearTimer(o[n]);var r=t._soundById(o[n]);if(r&&!r._paused&&(r._seek=t.seek(o[n]),r._rateSeek=0,r._paused=!0,t._stopFade(o[n]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var n=o._getSoundIds(e),r=0;r<n.length;r++){o._clearTimer(n[r]);var i=o._soundById(n[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,o._stopFade(n[r]),i._node&&(o._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),o._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&o._clearSound(i._node))),t||o._emit("stop",i._id))}return o},mute:function(e,t){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(e,t)}}),o;if(void 0===t){if("boolean"!=typeof e)return o._muted;o._muted=e}for(var n=o._getSoundIds(t),r=0;r<n.length;r++){var a=o._soundById(n[r]);a&&(a._muted=e,a._interval&&o._stopFade(a._id),o._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,i.ctx.currentTime):a._node&&(a._node.muted=!!i._muted||e),o._emit("mute",a._id))}return o},volume:function(){var e,t,o,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]){var a=n._getSoundIds(),s=a.indexOf(r[0]);s>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(o=t?n._soundById(t):n._sounds[0])?o._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)(o=n._soundById(t[u]))&&(o._volume=e,r[2]||n._stopFade(t[u]),n._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e,i.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=e*i.volume()),n._emit("volume",o._id));return n},fade:function(e,t,o,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,o,n)}}),r;e=parseFloat(e),t=parseFloat(t),o=parseFloat(o),r.volume(e,n);for(var a=r._getSoundIds(n),s=0;s<a.length;s++){var u=r._soundById(a[s]);if(u){if(n||r._stopFade(a[s]),r._webAudio&&!u._muted){var d=i.ctx.currentTime,l=d+o/1e3;u._volume=e,u._node.gain.setValueAtTime(e,d),u._node.gain.linearRampToValueAtTime(t,l)}r._startFadeInterval(u,e,t,o,a[s],void 0===n)}}return r},_startFadeInterval:function(e,t,o,n,r,i){var a=this,s=t,u=o-t,d=Math.abs(u/.01),l=Math.max(4,d>0?n/d:n),c=Date.now();e._fadeTo=o,e._interval=setInterval((function(){var r=(Date.now()-c)/n;c=Date.now(),s+=u*r,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?e._volume=s:a.volume(s,e._id,!0),i&&(a._volume=s),(o<t&&s<=o||o>t&&s>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(o,e._id),a._emit("fade",e._id))}),l)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,o,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(o=n._soundById(parseInt(r[0],10)))&&o._loop;e=r[0],n._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=n._getSoundIds(t),a=0;a<i.length;a++)(o=n._soundById(i[a]))&&(o._loop=e,n._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e,e&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop)));return n},rate:function(){var e,t,o,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var a=n._getSoundIds(),s=a.indexOf(r[0]);s>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(o=n._soundById(t))?o._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)if(o=n._soundById(t[u])){n.playing(t[u])&&(o._rateSeek=n.seek(t[u]),o._playStart=n._webAudio?i.ctx.currentTime:o._playStart),o._rate=e,n._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.setValueAtTime(e,i.ctx.currentTime):o._node&&(o._node.playbackRate=e);var d=n.seek(t[u]),l=(n._sprite[o._sprite][0]+n._sprite[o._sprite][1])/1e3-d,c=1e3*l/Math.abs(o._rate);!n._endTimers[t[u]]&&o._paused||(n._clearTimer(t[u]),n._endTimers[t[u]]=setTimeout(n._ended.bind(n,o),c)),n._emit("rate",o._id)}return n},seek:function(){var e,t,o=this,n=arguments;if(0===n.length)t=o._sounds[0]._id;else if(1===n.length){var r=o._getSoundIds(),a=r.indexOf(n[0]);a>=0?t=parseInt(n[0],10):o._sounds.length&&(t=o._sounds[0]._id,e=parseFloat(n[0]))}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(void 0===t)return o;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"seek",action:function(){o.seek.apply(o,n)}}),o;var s=o._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(o._webAudio){var u=o.playing(t)?i.ctx.currentTime-s._playStart:0,d=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(d+u*Math.abs(s._rate))}return s._node.currentTime}var l=o.playing(t);l&&o.pause(t,!0),s._seek=e,s._ended=!1,o._clearTimer(t),o._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var c=function(){o._emit("seek",t),l&&o.play(t,!0)};if(l&&!o._webAudio){var _=function(){o._playLock?setTimeout(_,0):c()};setTimeout(_,0)}else c()}return o},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var o=0;o<this._sounds.length;o++)if(!this._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this._duration,o=this._soundById(e);return o&&(t=this._sprite[o._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,o=0;o<t.length;o++)t[o]._paused||e.stop(t[o]._id),e._webAudio||(e._clearSound(t[o]._node),t[o]._node.removeEventListener("error",t[o]._errorFn,!1),t[o]._node.removeEventListener(i._canPlayEvent,t[o]._loadFn,!1),i._releaseHtml5Audio(t[o]._node)),delete t[o]._node,e._clearTimer(t[o]._id);var n=i._howls.indexOf(e);n>=0&&i._howls.splice(n,1);var r=!0;for(o=0;o<i._howls.length;o++)if(i._howls[o]._src===e._src||e._src.indexOf(i._howls[o]._src)>=0){r=!1;break}return u&&r&&delete u[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,o,n){var r=this["_on"+e];return"function"==typeof t&&r.push(n?{id:o,fn:t,once:n}:{id:o,fn:t}),this},off:function(e,t,o){var n=this["_on"+e],r=0;if("number"==typeof t&&(o=t,t=null),t||o)for(r=0;r<n.length;r++){var i=o===n[r].id;if(t===n[r].fn&&i||!t&&i){n.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(this[a[r]])&&(this[a[r]]=[])}return this},once:function(e,t,o){return this.on(e,t,o,1),this},_emit:function(e,t,o){for(var n=this["_on"+e],r=n.length-1;r>=0;r--)n[r].id&&n[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,o)}.bind(this,n[r].fn),0),n[r].once&&this.off(e,n[r].fn,n[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var o=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&o&&this.stop(e._id,!0).play(e._id),this._webAudio&&o){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var n=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),n)}return this._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),i._autoSuspend()),this._webAudio||o||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,o=0;if(!(this._sounds.length<e)){for(o=0;o<this._sounds.length;o++)this._sounds[o]._ended&&t++;for(o=this._sounds.length-1;o>=0;o--){if(t<=e)return;this._sounds[o]._ended&&(this._webAudio&&this._sounds[o]._node&&this._sounds[o]._node.disconnect(0),this._sounds.splice(o,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],o=0;o<this._sounds.length;o++)t.push(this._sounds[o]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),this},_cleanBuffer:function(e){var t=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=i._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=i._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),this._node.gain.setValueAtTime(t,i.ctx.currentTime),this._node.paused=!0,this._node.connect(i.masterGain)):i.noAudio||(this._node=i._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(i._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*i.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(i._canPlayEvent,this._loadFn,!1)}};var u={},d=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var o=atob(t.split(",")[1]),n=new Uint8Array(o.length),r=0;r<o.length;++r)n[r]=o.charCodeAt(r);c(n.buffer,e)}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.withCredentials=e._xhrWithCredentials,i.responseType="arraybuffer",i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?c(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},l(i)}},l=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var o=function(){t._emit("loaderror",null,"Decoding audio data failed.")},n=function(e){e&&t._sounds.length>0?(u[t._src]=e,_(t,e)):o()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(n).catch(o):i.ctx.decodeAudioData(e,n,o)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(e){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),t=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=t?parseInt(t[1],10):null;if(e&&o&&o<9){var n=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());(i._navigator&&i._navigator.standalone&&!n||i._navigator&&!i._navigator.standalone&&!n)&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0===(n=function(){return{Howler:i,Howl:a}}.apply(t,[]))||(e.exports=n),t.Howler=i,t.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=i,window.Howl=a,window.Sound=s):void 0!==o&&(o.HowlerGlobal=r,o.Howler=i,o.Howl=a,o.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,o){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,o="number"!=typeof o?this._pos[2]:o,"number"!=typeof e?this._pos:(this._pos=[e,t,o],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,o,n,r,i){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,o="number"!=typeof o?a[2]:o,n="number"!=typeof n?a[3]:n,r="number"!=typeof r?a[4]:r,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(this._orientation=[e,t,o,n,r,i],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,o,n,r,i),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,o){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,o)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===o){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var i=n._getSoundIds(o),a=0;a<i.length;a++){var s=n._soundById(i[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",s._id)}}return n},Howl.prototype.pos=function(e,o,n,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,o,n,r)}}),i;if(o="number"!=typeof o?0:o,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,o,n]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,o,n],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setPosition(e,o,n)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,o,n,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,o,n,r)}}),i;if(o="number"!=typeof o?i._orientation[1]:o,n="number"!=typeof n?i._orientation[2]:n,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,o,n]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,o,n],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setOrientation(e,o,n)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,o,n,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(n=r._soundById(parseInt(i[0],10)))?n._pannerAttr:r._pannerAttr;e=i[0],void 0===o&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===i.length&&(e=i[0],o=parseInt(i[1],10));for(var a=r._getSoundIds(o),s=0;s<a.length;s++)if(n=r._soundById(a[s])){var u=n._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var d=n._panner;d?(d.coneInnerAngle=u.coneInnerAngle,d.coneOuterAngle=u.coneOuterAngle,d.coneOuterGain=u.coneOuterGain,d.distanceModel=u.distanceModel,d.maxDistance=u.maxDistance,d.refDistance=u.refDistance,d.rolloffFactor=u.rolloffFactor,d.panningModel=u.panningModel):(n._pos||(n._pos=r._pos||[0,0,-.5]),t(n,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,o(1))},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){"use strict";o.r(t);var n,r=o(0),i=function(){function e(){}return e.exists=function(){return localStorage.length>0},e.store=function(e,t){localStorage.setItem(e,t)},e.load=function(e){return localStorage.getItem(e)},e.loadBoolean=function(t){return JSON.parse(e.load(t))},e.exist=function(t){return null!=e.load(t)},e.storeIfNull=function(t,o){e.exist(t)||e.store(t,o)},e}();!function(e){e.Pomodoro="Pomodoro",e.LongBreak="Long Break",e.ShortBreak="Short Break"}(n||(n={}));var a=function(){function e(e){var t=this;"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/worker.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),this.initSettings(),this.timerType=n.Pomodoro,this.timer=document.querySelector("#timer"),this.timerSub=document.querySelector("#timer-sub"),this.pomodoroButton=document.querySelector("#pomodoro-button"),this.pomodoroButton.addEventListener("click",(function(){return t.updateTimer(i.load("pomodoro"),n.Pomodoro)})),this.longBreakButton=document.querySelector("#l-break-button"),this.longBreakButton.addEventListener("click",(function(){return t.updateTimer(i.load("long-break"),n.LongBreak)})),this.shortBreakButton=document.querySelector("#s-break-button"),this.shortBreakButton.addEventListener("click",(function(){return t.updateTimer(i.load("short-break"),n.ShortBreak)})),this.pomodoroAutoCheckbox=document.querySelector("#pomodoro-auto-mode"),this.pomodoroAutoCheckbox.addEventListener("change",(function(){i.store("pomodoro_auto",t.pomodoroAutoCheckbox.checked)})),this.pomodoroBreaksInput=document.querySelector("#pomodoro-breaks"),this.pomodoroBreaksInput.addEventListener("change",(function(){i.store("max_break",t.pomodoroBreaksInput.value),i.store("cur_break",0)})),this.pomodoroAutoCheckbox.checked=JSON.parse(i.load("pomodoro_auto")),this.pomodoroBreaksInput.value=i.load("max_break"),this.alarmOverlay=document.querySelector("#alarm-overlay"),this.alarmOverlay.addEventListener("click",(function(){t.animateCSS("#test","bounceOut",(function(){t.alarmOverlay.classList.add("hidden")})),t.alarm.fade(i.load("volume"),0,2e3)})),this.infiniteAlarmCheckbox=document.querySelector("#infinite-alarm"),this.infiniteAlarmCheckbox.checked=i.loadBoolean("infinite-alarm"),this.infiniteAlarmCheckbox.addEventListener("change",(function(){i.store("infinite-alarm",t.infiniteAlarmCheckbox.checked)})),this.tabTimerCheckbox=document.querySelector("#tab-timer"),this.tabTimerCheckbox.checked=i.loadBoolean("tab-timer"),this.tabTimerCheckbox.addEventListener("change",(function(){i.store("tab-timer",t.tabTimerCheckbox.checked)})),this.notificationCheckbox=document.querySelector("#enable-notification"),this.notificationCheckbox.checked=i.loadBoolean("enable-notification"),this.notificationCheckbox.addEventListener("change",(function(){"default"===Notification.permission&&Notification.requestPermission(),i.store("enable-notification",t.notificationCheckbox.checked)})),document.querySelector("#start").addEventListener("click",(function(){return t.startTimer()})),document.querySelector("#stop").addEventListener("click",(function(){return t.stopTimer()})),document.querySelector("#reset").addEventListener("click",(function(){return t.resetTimer()})),document.querySelector("#settings").addEventListener("click",(function(){return t.overlayFadeIn()})),document.querySelector("#settings-close").addEventListener("click",(function(){return t.overlayFadeOut()})),document.querySelector("#c-pomodoro").addEventListener("change",(function(){i.store("pomodoro",document.querySelector("#c-pomodoro").value)})),document.querySelector("#c-l-break").addEventListener("change",(function(){i.store("long-break",document.querySelector("#c-l-break").value)})),document.querySelector("#c-s-break").addEventListener("change",(function(){i.store("short-break",document.querySelector("#c-s-break").value)})),document.querySelector("#custom-alarm").addEventListener("change",(function(){i.store("alarm",document.querySelector("#custom-alarm").value)})),document.querySelector("#volume-control").addEventListener("change",(function(){i.store("volume",document.querySelector("#volume-control").value)})),document.querySelector("#alarm-preview").addEventListener("click",(function(){new r.Howl({volume:i.load("volume"),html5:!0,src:["sounds/"+i.load("alarm")+".mp3"]}).play()})),document.querySelectorAll(".timer").forEach((function(e){return t.registerButtonhandle(e)})),this.indexAlarms(),window.localStorage||document.querySelector("#settings-button").remove(),document.querySelector("#c-pomodoro").value=i.load("pomodoro"),document.querySelector("#c-l-break").value=i.load("long-break"),document.querySelector("#c-s-break").value=i.load("short-break"),document.querySelector("#volume-control").value=i.load("volume"),this.time=e,this.updateTimer(this.time,n.Pomodoro)}return e.prototype.initTimer=function(){this.counter=60*this.time,this.display=this.time,this.sub_dis=0,this.is_ticking=!1},e.prototype.startTimer=function(){var e,t,o=this;this.is_ticking||("-"!=i.load("alarm")&&(this.alarm=new r.Howl({volume:i.load("volume"),html5:!1,loop:i.loadBoolean("infinite-alarm"),src:["sounds/"+i.load("alarm")+".mp3"]})),this.is_ticking=!0,this.interval=setInterval((function(){o.counter=o.counter-1,o.display=Math.floor(o.counter/60),0==o.sub_dis&&(o.sub_dis=60),o.sub_dis--,e=o.display.toString(),t=o.sub_dis.toString(),o.sub_dis<10&&(t="0"+o.sub_dis),o.display<10&&(e=0+o.display.toString()),o.timer.textContent=e,o.timerSub.textContent=t,i.loadBoolean("tab-timer")&&o.refreshTitle(e+":"+t),0===o.counter&&(o.alarm.play(),o.stopTimer(),i.loadBoolean("infinite-alarm")&&(o.alarmOverlay.classList.remove("hidden"),o.animateCSS("#alarm-overlay","bounceInDown",null)),i.loadBoolean("pomodoro_auto")&&(o.timerType!=n.ShortBreak&&o.timerType!==n.LongBreak||o.pomodoroButton.click(),o.timerType==n.Pomodoro&&(i.store("cur_break",+i.load("cur_break")+1),i.load("cur_break")<i.load("max_break")&&o.shortBreakButton.click(),i.load("cur_break")>=i.load("max_break")&&(i.store("cur_break",0),o.longBreakButton.click()))),o.resetTitle(),i.loadBoolean("enable-notification")&&o.constructNotification())}),1e3))},e.prototype.stopTimer=function(){this.is_ticking=!1,clearInterval(this.interval)},e.prototype.resetTimer=function(){this.stopTimer(),this.updateTimer(this.time)},e.prototype.updateTimer=function(e,t){this.stopTimer(),this.time=e,this.timerType=t;var o=e.toString();e<10&&(o=0+o),this.timer.textContent=o,this.timerSub.textContent="00",this.initTimer()},e.prototype.registerButtonhandle=function(e){e.addEventListener("click",(function(){document.querySelectorAll(".timer").forEach((function(e){return e.classList.remove("activated")})),e.classList.add("activated")}))},e.prototype.overlayFadeIn=function(){document.querySelector("#overlay").classList.remove("hidden"),this.animateCSS("#overlay","bounceInDown",null)},e.prototype.overlayFadeOut=function(){var e=document.querySelector("#overlay");this.animateCSS("#overlay","bounceOutUp",(function(){e.classList.add("hidden")})),this.is_ticking||this.refreshCurrentAlarm()},e.prototype.animateCSS=function(e,t,o){var n=document.querySelector(e);n.classList.add("animated",t),n.addEventListener("animationend",(function e(){n.classList.remove("animated",t),n.removeEventListener("animationend",e),"function"==typeof o&&o()}))},e.prototype.indexAlarms=function(){["-","Owl","Duck"].forEach((function(e){var t=document.createElement("option");t.value=e.toLowerCase(),t.text=e,i.load("alarm")===e.toLowerCase()&&(t.selected=!0),document.querySelector("#custom-alarm").add(t)}))},e.prototype.refreshCurrentAlarm=function(){this.timerType==n.Pomodoro&&this.pomodoroButton.click(),this.timerType==n.LongBreak&&this.longBreakButton.click(),this.timerType==n.ShortBreak&&this.shortBreakButton.click()},e.prototype.refreshTitle=function(e){document.title="BologneseTime - "+e},e.prototype.resetTitle=function(){document.title="BologneseTime"},e.prototype.initSettings=function(){i.storeIfNull("pomodoro",25),i.storeIfNull("long-break",20),i.storeIfNull("short-break",5),i.storeIfNull("alarm","owl"),i.storeIfNull("volume",.5),i.storeIfNull("pomodoro_auto",!1),i.storeIfNull("max_break",4),i.storeIfNull("cur_break",0),i.storeIfNull("tab-timer",!1),i.storeIfNull("infinite-alarm",!1),i.storeIfNull("enable-notification",!1)},e.prototype.constructNotification=function(){if("granted"===Notification.permission){var e=this.timerType.toString()+" finished!",t="Your timer has finished!";if(i.loadBoolean("pomodoro_auto")){var o=+i.load("cur_break"),n=+i.load("max_break"),r=n-o;t="Just "+r+" more pomodoro session(s) till a long break!",r===n&&(t="You've earned you a long break!")}this.notification=new Notification(e,{body:t,icon:"android-chrome-192x192.png"})}},e}();window.addEventListener("DOMContentLoaded",(function(){new a(i.load("pomodoro"))}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy90cy90aW1lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2V0dGluZ3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiSG93bGVyR2xvYmFsIiwidGhpcyIsImluaXQiLCJzZWxmIiwiSG93bGVyIiwiX2NvdW50ZXIiLCJfaHRtbDVBdWRpb1Bvb2wiLCJodG1sNVBvb2xTaXplIiwiX2NvZGVjcyIsIl9ob3dscyIsIl9tdXRlZCIsIl92b2x1bWUiLCJfY2FuUGxheUV2ZW50IiwiX25hdmlnYXRvciIsIndpbmRvdyIsIm5hdmlnYXRvciIsIm1hc3RlckdhaW4iLCJub0F1ZGlvIiwidXNpbmdXZWJBdWRpbyIsImF1dG9TdXNwZW5kIiwiY3R4IiwiYXV0b1VubG9jayIsIl9zZXR1cCIsInZvbHVtZSIsInZvbCIsInBhcnNlRmxvYXQiLCJzZXR1cEF1ZGlvQ29udGV4dCIsImdhaW4iLCJzZXRWYWx1ZUF0VGltZSIsImN1cnJlbnRUaW1lIiwibGVuZ3RoIiwiX3dlYkF1ZGlvIiwiaWRzIiwiX2dldFNvdW5kSWRzIiwiaiIsInNvdW5kIiwiX3NvdW5kQnlJZCIsIl9ub2RlIiwibXV0ZSIsIm11dGVkIiwidW5sb2FkIiwiY2xvc2UiLCJjb2RlY3MiLCJleHQiLCJyZXBsYWNlIiwic3RhdGUiLCJfYXV0b1N1c3BlbmQiLCJBdWRpbyIsIm9uY2FucGxheXRocm91Z2giLCJlIiwiX3NldHVwQ29kZWNzIiwiYXVkaW9UZXN0IiwiZXJyIiwiY2FuUGxheVR5cGUiLCJtcGVnVGVzdCIsImNoZWNrT3BlcmEiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsImlzT2xkT3BlcmEiLCJwYXJzZUludCIsInNwbGl0IiwibXAzIiwibXBlZyIsIm9wdXMiLCJvZ2ciLCJvZ2EiLCJ3YXYiLCJhYWMiLCJjYWYiLCJtNGEiLCJtcDQiLCJ3ZWJhIiwid2VibSIsImRvbGJ5IiwiZmxhYyIsIl91bmxvY2tBdWRpbyIsIl9hdWRpb1VubG9ja2VkIiwiX21vYmlsZVVubG9hZGVkIiwic2FtcGxlUmF0ZSIsIl9zY3JhdGNoQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwidW5sb2NrIiwiYXVkaW9Ob2RlIiwiX3VubG9ja2VkIiwiX3JlbGVhc2VIdG1sNUF1ZGlvIiwibG9hZCIsIl9hdXRvUmVzdW1lIiwic291cmNlIiwiY3JlYXRlQnVmZmVyU291cmNlIiwiYnVmZmVyIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwic3RhcnQiLCJub3RlT24iLCJyZXN1bWUiLCJvbmVuZGVkIiwiZGlzY29ubmVjdCIsImRvY3VtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9lbWl0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vYnRhaW5IdG1sNUF1ZGlvIiwicG9wIiwidGVzdFBsYXkiLCJwbGF5IiwiUHJvbWlzZSIsInRoZW4iLCJjYXRjaCIsImNvbnNvbGUiLCJ3YXJuIiwiYXVkaW8iLCJwdXNoIiwic3VzcGVuZCIsIl9zb3VuZHMiLCJfcGF1c2VkIiwiX3N1c3BlbmRUaW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJfcmVzdW1lQWZ0ZXJTdXNwZW5kIiwiSG93bCIsInNyYyIsImVycm9yIiwiX2F1dG9wbGF5IiwiYXV0b3BsYXkiLCJfZm9ybWF0IiwiZm9ybWF0IiwiX2h0bWw1IiwiaHRtbDUiLCJfbG9vcCIsImxvb3AiLCJfcG9vbCIsInBvb2wiLCJfcHJlbG9hZCIsInByZWxvYWQiLCJfcmF0ZSIsInJhdGUiLCJfc3ByaXRlIiwic3ByaXRlIiwiX3NyYyIsInVuZGVmaW5lZCIsIl94aHJXaXRoQ3JlZGVudGlhbHMiLCJ4aHJXaXRoQ3JlZGVudGlhbHMiLCJfZHVyYXRpb24iLCJfc3RhdGUiLCJfZW5kVGltZXJzIiwiX3F1ZXVlIiwiX3BsYXlMb2NrIiwiX29uZW5kIiwib25lbmQiLCJmbiIsIl9vbmZhZGUiLCJvbmZhZGUiLCJfb25sb2FkIiwib25sb2FkIiwiX29ubG9hZGVycm9yIiwib25sb2FkZXJyb3IiLCJfb25wbGF5ZXJyb3IiLCJvbnBsYXllcnJvciIsIl9vbnBhdXNlIiwib25wYXVzZSIsIl9vbnBsYXkiLCJvbnBsYXkiLCJfb25zdG9wIiwib25zdG9wIiwiX29ubXV0ZSIsIm9ubXV0ZSIsIl9vbnZvbHVtZSIsIm9udm9sdW1lIiwiX29ucmF0ZSIsIm9ucmF0ZSIsIl9vbnNlZWsiLCJvbnNlZWsiLCJfb251bmxvY2siLCJvbnVubG9jayIsIl9vbnJlc3VtZSIsImV2ZW50IiwiYWN0aW9uIiwidXJsIiwic3RyIiwiZXhlYyIsInRvTG93ZXJDYXNlIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInNsaWNlIiwiU291bmQiLCJsb2FkQnVmZmVyIiwiaW50ZXJuYWwiLCJpZCIsIm51bSIsIl9lbmRlZCIsIl9pZCIsIl9pbmFjdGl2ZVNvdW5kIiwic291bmRJZCIsIl9sb2FkUXVldWUiLCJzZWVrIiwiTWF0aCIsIm1heCIsIl9zZWVrIiwiZHVyYXRpb24iLCJ0aW1lb3V0IiwiYWJzIiwic3RvcCIsInNldFBhcmFtcyIsIl9zdGFydCIsIl9zdG9wIiwibm9kZSIsInBsYXlXZWJBdWRpbyIsIl9yZWZyZXNoQnVmZmVyIiwiX3BsYXlTdGFydCIsImJ1ZmZlclNvdXJjZSIsIm5vdGVHcmFpbk9uIiwiSW5maW5pdHkiLCJvbmNlIiwiX2NsZWFyVGltZXIiLCJwbGF5SHRtbDUiLCJwbGF5YmFja1JhdGUiLCJwYXVzZWQiLCJsb2FkZWROb1JlYWR5U3RhdGUiLCJlamVjdGEiLCJyZWFkeVN0YXRlIiwiaXNDb2Nvb25KUyIsImxpc3RlbmVyIiwicGF1c2UiLCJfcmF0ZVNlZWsiLCJfc3RvcEZhZGUiLCJub3RlT2ZmIiwiX2NsZWFuQnVmZmVyIiwiaXNOYU4iLCJhcmd1bWVudHMiLCJfY2xlYXJTb3VuZCIsIl9pbnRlcnZhbCIsImFyZ3MiLCJpbmRleCIsImluZGV4T2YiLCJhcHBseSIsImZhZGUiLCJmcm9tIiwidG8iLCJsZW4iLCJlbmQiLCJsaW5lYXJSYW1wVG9WYWx1ZUF0VGltZSIsIl9zdGFydEZhZGVJbnRlcnZhbCIsImlzR3JvdXAiLCJkaWZmIiwic3RlcHMiLCJzdGVwTGVuIiwibGFzdFRpY2siLCJEYXRlIiwibm93IiwiX2ZhZGVUbyIsInNldEludGVydmFsIiwidGljayIsIm1pbiIsInJvdW5kIiwiY2xlYXJJbnRlcnZhbCIsImNhbmNlbFNjaGVkdWxlZFZhbHVlcyIsImxvb3BTdGFydCIsImxvb3BFbmQiLCJwbGF5aW5nIiwicmVhbFRpbWUiLCJyYXRlU2VlayIsInNlZWtBbmRFbWl0IiwiZW1pdFNlZWsiLCJzb3VuZHMiLCJfZXJyb3JGbiIsIl9sb2FkRm4iLCJzcGxpY2UiLCJyZW1DYWNoZSIsImNhY2hlIiwib24iLCJldmVudHMiLCJvZmYiLCJpc0lkIiwia2V5cyIsIkFycmF5IiwiaXNBcnJheSIsIm1zZyIsInRhc2siLCJzaGlmdCIsImVuZGVkIiwiX2RyYWluIiwicmVzZXQiLCJsaW1pdCIsImNudCIsIl9wYW5uZXIiLCJpc0lPUyIsInZlbmRvciIsInRlc3QiLCJob3dsIiwiX3BhcmVudCIsInBhcmVudCIsImNyZWF0ZUdhaW4iLCJjcmVhdGVHYWluTm9kZSIsIl9lcnJvckxpc3RlbmVyIiwiX2xvYWRMaXN0ZW5lciIsImNvZGUiLCJjZWlsIiwiX19kZWZhdWx0IiwibG9hZFNvdW5kIiwiZGF0YSIsImF0b2IiLCJkYXRhVmlldyIsIlVpbnQ4QXJyYXkiLCJjaGFyQ29kZUF0IiwiZGVjb2RlQXVkaW9EYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvbmVycm9yIiwic2FmZVhoclNlbmQiLCJzZW5kIiwiYXJyYXlidWZmZXIiLCJzdWNjZXNzIiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiaU9TIiwicGxhdGZvcm0iLCJhcHBWZXJzaW9uIiwidmVyc2lvbiIsInNhZmFyaSIsInN0YW5kYWxvbmUiLCJnbG9iYWwiLCJfc3VwZXIiLCJfcG9zIiwiX29yaWVudGF0aW9uIiwic3RlcmVvIiwicGFuIiwicG9zIiwieCIsInkiLCJ6IiwicG9zaXRpb25YIiwic2V0VGFyZ2V0QXRUaW1lIiwicG9zaXRpb25ZIiwicG9zaXRpb25aIiwic2V0UG9zaXRpb24iLCJvcmllbnRhdGlvbiIsInhVcCIsInlVcCIsInpVcCIsIm9yIiwiZm9yd2FyZFgiLCJmb3J3YXJkWSIsImZvcndhcmRaIiwidXBYIiwidXBZIiwidXBaIiwic2V0T3JpZW50YXRpb24iLCJfc3RlcmVvIiwiX3Bhbm5lckF0dHIiLCJjb25lSW5uZXJBbmdsZSIsImNvbmVPdXRlckFuZ2xlIiwiY29uZU91dGVyR2FpbiIsImRpc3RhbmNlTW9kZWwiLCJtYXhEaXN0YW5jZSIsInBhbm5pbmdNb2RlbCIsInJlZkRpc3RhbmNlIiwicm9sbG9mZkZhY3RvciIsIl9vbnN0ZXJlbyIsIm9uc3RlcmVvIiwiX29ucG9zIiwib25wb3MiLCJfb25vcmllbnRhdGlvbiIsIm9ub3JpZW50YXRpb24iLCJwYW5uZXJUeXBlIiwiY3JlYXRlU3RlcmVvUGFubmVyIiwic2V0dXBQYW5uZXIiLCJvcmllbnRhdGlvblgiLCJvcmllbnRhdGlvblkiLCJvcmllbnRhdGlvbloiLCJwYW5uZXJBdHRyIiwiX2NvbmVJbm5lckFuZ2xlIiwiX2NvbmVPdXRlckFuZ2xlIiwiX2NvbmVPdXRlckdhaW4iLCJfZGlzdGFuY2VNb2RlbCIsIl9tYXhEaXN0YW5jZSIsIl9yZWZEaXN0YW5jZSIsIl9yb2xsb2ZmRmFjdG9yIiwiX3Bhbm5pbmdNb2RlbCIsInBhIiwicGFubmVyIiwidHlwZSIsImNyZWF0ZVBhbm5lciIsImciLCJGdW5jdGlvbiIsIlRpbWVyIiwiZXhpc3RzIiwibG9jYWxTdG9yYWdlIiwic3RvcmUiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsImxvYWRCb29sZWFuIiwiSlNPTiIsInBhcnNlIiwiU2V0dGluZ3MiLCJleGlzdCIsInN0b3JlSWZOdWxsIiwidGltZSIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsInJlZ2lzdHJhdGlvbiIsImxvZyIsInNjb3BlIiwiaW5pdFNldHRpbmdzIiwidGltZXJUeXBlIiwiUG9tb2Rvcm8iLCJ0aW1lciIsInF1ZXJ5U2VsZWN0b3IiLCJ0aW1lclN1YiIsInBvbW9kb3JvQnV0dG9uIiwidXBkYXRlVGltZXIiLCJsb25nQnJlYWtCdXR0b24iLCJMb25nQnJlYWsiLCJzaG9ydEJyZWFrQnV0dG9uIiwiU2hvcnRCcmVhayIsInBvbW9kb3JvQXV0b0NoZWNrYm94IiwiY2hlY2tlZCIsInBvbW9kb3JvQnJlYWtzSW5wdXQiLCJhbGFybU92ZXJsYXkiLCJhbmltYXRlQ1NTIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWxhcm0iLCJpbmZpbml0ZUFsYXJtQ2hlY2tib3giLCJ0YWJUaW1lckNoZWNrYm94Iiwibm90aWZpY2F0aW9uQ2hlY2tib3giLCJOb3RpZmljYXRpb24iLCJwZXJtaXNzaW9uIiwicmVxdWVzdFBlcm1pc3Npb24iLCJzdGFydFRpbWVyIiwic3RvcFRpbWVyIiwicmVzZXRUaW1lciIsIm92ZXJsYXlGYWRlSW4iLCJvdmVybGF5RmFkZU91dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsInJlZ2lzdGVyQnV0dG9uaGFuZGxlIiwiaW5kZXhBbGFybXMiLCJyZW1vdmUiLCJpbml0VGltZXIiLCJjb3VudGVyIiwiZGlzcGxheSIsInN1Yl9kaXMiLCJpc190aWNraW5nIiwicHJlIiwic3ViIiwiaW50ZXJ2YWwiLCJmbG9vciIsInRvU3RyaW5nIiwidGV4dENvbnRlbnQiLCJyZWZyZXNoVGl0bGUiLCJjbGljayIsInJlc2V0VGl0bGUiLCJjb25zdHJ1Y3ROb3RpZmljYXRpb24iLCJlbGVtZW50IiwiYnRuIiwicmVmcmVzaEN1cnJlbnRBbGFybSIsImFuaW1hdGlvbk5hbWUiLCJjYWxsYmFjayIsImhhbmRsZUFuaW1hdGlvbkVuZCIsImEiLCJhbHIiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsInNlbGVjdGVkIiwidGl0bGUiLCJub3RpZmljYXRpb24iLCJib2R5IiwiaWNvbiJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlB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LEVBQUlDLEVBRVorZSxFQUFPLFFBQVU5ZSxFQUFJLCtDQUNqQkEsSUFBTUYsSUFDTmdmLEVBQU8sbUNBSWZuZCxLQUFLc2QsYUFBZSxJQUFJekMsYUFBYXdDLEVBQU8sQ0FDeENFLEtBQU1KLEVBQ05LLEtBQU0saUNBSXRCLEVBeFdBLEdBMFdBM2MsT0FBT3NGLGlCQUFpQixvQkFBb0IsV0FDeEMsSUFBSSxFQUFVMFMsRUFBU3pULEtBQUsiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiLyohXG4gKiAgaG93bGVyLmpzIHYyLjEuM1xuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDE5LCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuIEFsbCBjb250YWluZWQgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcHBseVxuICAgKiB0byBhbGwgc291bmRzIHRoYXQgYXJlIGN1cnJlbnRseSBwbGF5aW5nIG9yIHdpbGwgYmUgaW4gdGhlIGZ1dHVyZS5cbiAgICovXG4gIHZhciBIb3dsZXJHbG9iYWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBDcmVhdGUgYSBnbG9iYWwgSUQgY291bnRlci5cbiAgICAgIHNlbGYuX2NvdW50ZXIgPSAxMDAwO1xuXG4gICAgICAvLyBQb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMuXG4gICAgICBzZWxmLl9odG1sNUF1ZGlvUG9vbCA9IFtdO1xuICAgICAgc2VsZi5odG1sNVBvb2xTaXplID0gMTA7XG5cbiAgICAgIC8vIEludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7fTtcbiAgICAgIHNlbGYuX2hvd2xzID0gW107XG4gICAgICBzZWxmLl9tdXRlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5fdm9sdW1lID0gMTtcbiAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5dGhyb3VnaCc7XG4gICAgICBzZWxmLl9uYXZpZ2F0b3IgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvcikgPyB3aW5kb3cubmF2aWdhdG9yIDogbnVsbDtcblxuICAgICAgLy8gUHVibGljIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLm1hc3RlckdhaW4gPSBudWxsO1xuICAgICAgc2VsZi5ub0F1ZGlvID0gZmFsc2U7XG4gICAgICBzZWxmLnVzaW5nV2ViQXVkaW8gPSB0cnVlO1xuICAgICAgc2VsZi5hdXRvU3VzcGVuZCA9IHRydWU7XG4gICAgICBzZWxmLmN0eCA9IG51bGw7XG5cbiAgICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRoZSBhdXRvIGF1ZGlvIHVubG9ja2VyLlxuICAgICAgc2VsZi5hdXRvVW5sb2NrID0gdHJ1ZTtcblxuICAgICAgLy8gU2V0dXAgdGhlIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICBzZWxmLl9zZXR1cCgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgZ2xvYmFsIHZvbHVtZSBmb3IgYWxsIHNvdW5kcy5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gdm9sIFZvbHVtZSBmcm9tIDAuMCB0byAxLjAuXG4gICAgICogQHJldHVybiB7SG93bGVyL0Zsb2F0fSAgICAgUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24odm9sKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdm9sID0gcGFyc2VGbG9hdCh2b2wpO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAvLyBEb24ndCB1cGRhdGUgYW55IG9mIHRoZSBub2RlcyBpZiB3ZSBhcmUgbXV0ZWQuXG4gICAgICAgIGlmIChzZWxmLl9tdXRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB1c2luZyBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBhZGp1c3QgdGhlIG1hc3RlciBnYWluLlxuICAgICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgY2hhbmdlIHZvbHVtZSBmb3IgYWxsIEhUTUw1IGF1ZGlvIG5vZGVzLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoYW5nZSB0aGUgdm9sdW1lcy5cbiAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiB2b2w7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIG11dGluZyBhbmQgdW5tdXRpbmcgZ2xvYmFsbHkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgSXMgbXV0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgLy8gV2l0aCBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBtdXRlIHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc2VsZi5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBtdXRlIGFsbCBIVE1MNSBBdWRpbyBub2Rlcy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIG1hcmsgdGhlIGF1ZGlvIG5vZGUgYXMgbXV0ZWQuXG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSAobXV0ZWQpID8gdHJ1ZSA6IHNvdW5kLl9tdXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSBhbGwgY3VycmVudGx5IGxvYWRlZCBIb3dsIG9iamVjdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0udW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgdG8gbWFrZSBzdXJlIGl0IGlzIGZ1bGx5IHJlc2V0LlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbyAmJiBzZWxmLmN0eCAmJiB0eXBlb2Ygc2VsZi5jdHguY2xvc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LmNsb3NlKCk7XG4gICAgICAgIHNlbGYuY3R4ID0gbnVsbDtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBjb2RlYyBzdXBwb3J0IG9mIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV4dCBBdWRpbyBmaWxlIGV4dGVudGlvbi5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNvZGVjczogZnVuY3Rpb24oZXh0KSB7XG4gICAgICByZXR1cm4gKHRoaXMgfHwgSG93bGVyKS5fY29kZWNzW2V4dC5yZXBsYWNlKC9eeC0vLCAnJyldO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIHN1c3BlbmQvcmVzdW1lIHN0YXRlIG9mIHRoZSBBdWRpb0NvbnRleHQuXG4gICAgICBzZWxmLnN0YXRlID0gc2VsZi5jdHggPyBzZWxmLmN0eC5zdGF0ZSB8fCAnc3VzcGVuZGVkJyA6ICdzdXNwZW5kZWQnO1xuXG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IGJlZ2luIHRoZSAzMC1zZWNvbmQgc3VzcGVuZCBwcm9jZXNzXG4gICAgICBzZWxmLl9hdXRvU3VzcGVuZCgpO1xuXG4gICAgICAvLyBDaGVjayBpZiBhdWRpbyBpcyBhdmFpbGFibGUuXG4gICAgICBpZiAoIXNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAvLyBObyBhdWRpbyBpcyBhdmFpbGFibGUgb24gdGhpcyBzeXN0ZW0gaWYgbm9BdWRpbyBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbnBsYXl0aHJvdWdoIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVzdC5vbmNhbnBsYXl0aHJvdWdoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRlc3QgdG8gbWFrZSBzdXJlIGF1ZGlvIGlzbid0IGRpc2FibGVkIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgaWYgKHRlc3QubXV0ZWQpIHtcbiAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAvLyBDaGVjayBmb3Igc3VwcG9ydGVkIGNvZGVjcy5cbiAgICAgIGlmICghc2VsZi5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX3NldHVwQ29kZWNzKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgYnJvd3NlciBzdXBwb3J0IGZvciB2YXJpb3VzIGNvZGVjcyBhbmQgY2FjaGUgdGhlIHJlc3VsdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cENvZGVjczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdmFyIGF1ZGlvVGVzdCA9IG51bGw7XG5cbiAgICAgIC8vIE11c3Qgd3JhcCBpbiBhIHRyeS9jYXRjaCBiZWNhdXNlIElFMTEgaW4gc2VydmVyIG1vZGUgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgdHJ5IHtcbiAgICAgICAgYXVkaW9UZXN0ID0gKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpID8gbmV3IEF1ZGlvKCkgOiBudWxsO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF1ZGlvVGVzdCB8fCB0eXBlb2YgYXVkaW9UZXN0LmNhblBsYXlUeXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICB2YXIgbXBlZ1Rlc3QgPSBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wZWc7JykucmVwbGFjZSgvXm5vJC8sICcnKTtcblxuICAgICAgLy8gT3BlcmEgdmVyc2lvbiA8MzMgaGFzIG1peGVkIE1QMyBzdXBwb3J0LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciBhbmQgYmxvY2sgaXQuXG4gICAgICB2YXIgY2hlY2tPcGVyYSA9IHNlbGYuX25hdmlnYXRvciAmJiBzZWxmLl9uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUFJcXC8oWzAtNl0uKS9nKTtcbiAgICAgIHZhciBpc09sZE9wZXJhID0gKGNoZWNrT3BlcmEgJiYgcGFyc2VJbnQoY2hlY2tPcGVyYVswXS5zcGxpdCgnLycpWzFdLCAxMCkgPCAzMyk7XG5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHtcbiAgICAgICAgbXAzOiAhISghaXNPbGRPcGVyYSAmJiAobXBlZ1Rlc3QgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDM7JykucmVwbGFjZSgvXm5vJC8sICcnKSkpLFxuICAgICAgICBtcGVnOiAhIW1wZWdUZXN0LFxuICAgICAgICBvcHVzOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJvcHVzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2c6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdhdjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdjsgY29kZWNzPVwiMVwiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgYWFjOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGNhZjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtY2FmOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YTogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbXA0OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJtOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBkb2xieTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsgY29kZWNzPVwiZWMtM1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgZmxhYzogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWZsYWM7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9mbGFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU29tZSBicm93c2Vycy9kZXZpY2VzIHdpbGwgb25seSBhbGxvdyBhdWRpbyB0byBiZSBwbGF5ZWQgYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIEF0dGVtcHQgdG8gYXV0b21hdGljYWxseSB1bmxvY2sgYXVkaW8gb24gdGhlIGZpcnN0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQ29uY2VwdCBmcm9tOiBodHRwOi8vcGF1bGJha2F1cy5jb20vdHV0b3JpYWxzL2h0bWw1L3dlYi1hdWRpby1vbi1pb3MvXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF91bmxvY2tBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBPbmx5IHJ1biB0aGlzIGlmIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQgYW5kIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gdW5sb2NrZWQuXG4gICAgICBpZiAoc2VsZi5fYXVkaW9VbmxvY2tlZCB8fCAhc2VsZi5jdHgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9hdWRpb1VubG9ja2VkID0gZmFsc2U7XG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU29tZSBtb2JpbGUgZGV2aWNlcy9wbGF0Zm9ybXMgaGF2ZSBkaXN0b3J0aW9uIGlzc3VlcyB3aGVuIG9wZW5pbmcvY2xvc2luZyB0YWJzIGFuZC9vciB3ZWIgdmlld3MuXG4gICAgICAvLyBCdWdzIGluIHRoZSBicm93c2VyIChlc3BlY2lhbGx5IE1vYmlsZSBTYWZhcmkpIGNhbiBjYXVzZSB0aGUgc2FtcGxlUmF0ZSB0byBjaGFuZ2UgZnJvbSA0NDEwMCB0byA0ODAwMC5cbiAgICAgIC8vIEJ5IGNhbGxpbmcgSG93bGVyLnVubG9hZCgpLCB3ZSBjcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHdpdGggdGhlIGNvcnJlY3Qgc2FtcGxlUmF0ZS5cbiAgICAgIGlmICghc2VsZi5fbW9iaWxlVW5sb2FkZWQgJiYgc2VsZi5jdHguc2FtcGxlUmF0ZSAhPT0gNDQxMDApIHtcbiAgICAgICAgc2VsZi5fbW9iaWxlVW5sb2FkZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTY3JhdGNoIGJ1ZmZlciBmb3IgZW5hYmxpbmcgaU9TIHRvIGRpc3Bvc2Ugb2Ygd2ViIGF1ZGlvIGJ1ZmZlcnMgY29ycmVjdGx5LCBhcyBwZXI6XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0MTE5Njg0XG4gICAgICBzZWxmLl9zY3JhdGNoQnVmZmVyID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcblxuICAgICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCBvbiB0b3VjaCBzdGFydCB0byBjcmVhdGUgYW5kIHBsYXkgYSBidWZmZXIsXG4gICAgICAvLyB0aGVuIGNoZWNrIGlmIHRoZSBhdWRpbyBhY3R1YWxseSBwbGF5ZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICAvLyBhdWRpbyBoYXMgbm93IGJlZW4gdW5sb2NrZWQgb24gaU9TLCBBbmRyb2lkLCBldGMuXG4gICAgICB2YXIgdW5sb2NrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyBDcmVhdGUgYSBwb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMgdGhhdCBjYW5cbiAgICAgICAgLy8gYmUgdXNlZCBmb3IgcGxheWluZyBzb3VuZHMgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLiBIVE1MNVxuICAgICAgICAvLyBBdWRpbyBvYmplY3RzIG11c3QgYmUgaW5kaXZpZHVhbGx5IHVubG9ja2VkLCBhcyBvcHBvc2VkXG4gICAgICAgIC8vIHRvIHRoZSBXZWJBdWRpbyBBUEkgd2hpY2ggb25seSBuZWVkcyBhIHNpbmdsZSBhY3RpdmF0aW9uLlxuICAgICAgICAvLyBUaGlzIG11c3Qgb2NjdXIgYmVmb3JlIFdlYkF1ZGlvIHNldHVwIG9yIHRoZSBzb3VyY2Uub25lbmRlZFxuICAgICAgICAvLyBldmVudCB3aWxsIG5vdCBmaXJlLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5odG1sNVBvb2xTaXplOyBpKyspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGF1ZGlvTm9kZSA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBNYXJrIHRoaXMgQXVkaW8gb2JqZWN0IGFzIHVubG9ja2VkIHRvIGVuc3VyZSBpdCBjYW4gZ2V0IHJldHVybmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgdW5sb2NrZWQgcG9vbCB3aGVuIHJlbGVhc2VkLlxuICAgICAgICAgICAgYXVkaW9Ob2RlLl91bmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgYXVkaW8gbm9kZSB0byB0aGUgcG9vbC5cbiAgICAgICAgICAgIHNlbGYuX3JlbGVhc2VIdG1sNUF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW55IGFzc2lnbmVkIGF1ZGlvIG5vZGVzIGFuZCB1bmxvY2sgdGhlbS5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCB1bmxvY2sgdGhlIGF1ZGlvIG5vZGVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5fdW5sb2NrZWQpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmxvYWQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpeCBBbmRyb2lkIGNhbiBub3QgcGxheSBpbiBzdXNwZW5kIHN0YXRlLlxuICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgdmFyIHNvdXJjZSA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBzb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjtcbiAgICAgICAgc291cmNlLmNvbm5lY3Qoc2VsZi5jdHguZGVzdGluYXRpb24pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc291cmNlLm5vdGVPbigwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxsaW5nIHJlc3VtZSgpIG9uIGEgc3RhY2sgaW5pdGlhdGVkIGJ5IHVzZXIgZ2VzdHVyZSBpcyB3aGF0IGFjdHVhbGx5IHVubG9ja3MgdGhlIGF1ZGlvIG9uIEFuZHJvaWQgQ2hyb21lID49IDU1LlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0dXAgYSB0aW1lb3V0IHRvIGNoZWNrIHRoYXQgd2UgYXJlIHVubG9ja2VkIG9uIHRoZSBuZXh0IGV2ZW50IGxvb3AuXG4gICAgICAgIHNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc291cmNlLmRpc2Nvbm5lY3QoMCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHVubG9ja2VkIHN0YXRlIGFuZCBwcmV2ZW50IHRoaXMgY2hlY2sgZnJvbSBoYXBwZW5pbmcgYWdhaW4uXG4gICAgICAgICAgc2VsZi5fYXVkaW9VbmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRvdWNoIHN0YXJ0IGxpc3RlbmVyLlxuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgICAgICAvLyBMZXQgYWxsIHNvdW5kcyBrbm93IHRoYXQgYXVkaW8gaGFzIGJlZW4gdW5sb2NrZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgndW5sb2NrJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYSB0b3VjaCBzdGFydCBsaXN0ZW5lciB0byBhdHRlbXB0IGFuIHVubG9jayBpbi5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLiBJZiBub25lIGFyZSBsZWZ0LFxuICAgICAqIHJldHVybiBhIG5ldyBBdWRpbyBvYmplY3QgYW5kIHRocm93IGEgd2FybmluZy5cbiAgICAgKiBAcmV0dXJuIHtBdWRpb30gSFRNTDUgQXVkaW8gb2JqZWN0LlxuICAgICAqL1xuICAgIF9vYnRhaW5IdG1sNUF1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbmV4dCBvYmplY3QgZnJvbSB0aGUgcG9vbCBpZiBvbmUgZXhpc3RzLlxuICAgICAgaWYgKHNlbGYuX2h0bWw1QXVkaW9Qb29sLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc2VsZi5faHRtbDVBdWRpb1Bvb2wucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIC8vLkNoZWNrIGlmIHRoZSBhdWRpbyBpcyBsb2NrZWQgYW5kIHRocm93IGEgd2FybmluZy5cbiAgICAgIHZhciB0ZXN0UGxheSA9IG5ldyBBdWRpbygpLnBsYXkoKTtcbiAgICAgIGlmICh0ZXN0UGxheSAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHRlc3RQbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgdGVzdFBsYXkudGhlbiA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdGVzdFBsYXkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdIVE1MNSBBdWRpbyBwb29sIGV4aGF1c3RlZCwgcmV0dXJuaW5nIHBvdGVudGlhbGx5IGxvY2tlZCBhdWRpbyBvYmplY3QuJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEF1ZGlvKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBhY3RpdmF0ZWQgSFRNTDUgQXVkaW8gb2JqZWN0IHRvIHRoZSBwb29sLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfcmVsZWFzZUh0bWw1QXVkaW86IGZ1bmN0aW9uKGF1ZGlvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBEb24ndCBhZGQgYXVkaW8gdG8gdGhlIHBvb2wgaWYgd2UgZG9uJ3Qga25vdyBpZiBpdCBoYXMgYmVlbiB1bmxvY2tlZC5cbiAgICAgIGlmIChhdWRpby5fdW5sb2NrZWQpIHtcbiAgICAgICAgc2VsZi5faHRtbDVBdWRpb1Bvb2wucHVzaChhdWRpbyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHN1c3BlbmQgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgYWZ0ZXIgbm8gc291bmQgaGFzIHBsYXllZCBmb3IgMzAgc2Vjb25kcy5cbiAgICAgKiBUaGlzIHNhdmVzIHByb2Nlc3NpbmcvZW5lcmd5IGFuZCBmaXhlcyB2YXJpb3VzIGJyb3dzZXItc3BlY2lmaWMgYnVncyB3aXRoIGF1ZGlvIGdldHRpbmcgc3R1Y2suXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvU3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCB8fCAhc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnN1c3BlbmQgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBzb3VuZHMgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxzZWxmLl9ob3dsc1tpXS5fc291bmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl9zb3VuZHNbal0uX3BhdXNlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gc291bmQgaGFzIHBsYXllZCBhZnRlciAzMCBzZWNvbmRzLCBzdXNwZW5kIHRoZSBjb250ZXh0LlxuICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kaW5nJztcbiAgICAgICAgc2VsZi5jdHguc3VzcGVuZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kZWQnO1xuXG4gICAgICAgICAgaWYgKHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZDtcbiAgICAgICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSwgMzAwMDApO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSByZXN1bWUgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgd2hlbiBhIG5ldyBzb3VuZCBpcyBwbGF5ZWQuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvUmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHtcbiAgICAgICAgc2VsZi5jdHgucmVzdW1lKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3J1bm5pbmcnO1xuXG4gICAgICAgICAgLy8gRW1pdCB0byBhbGwgSG93bHMgdGhhdCB0aGUgYXVkaW8gaGFzIHJlc3VtZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgncmVzdW1lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGluZycpIHtcbiAgICAgICAgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNldHVwIHRoZSBnbG9iYWwgYXVkaW8gY29udHJvbGxlci5cbiAgdmFyIEhvd2xlciA9IG5ldyBIb3dsZXJHbG9iYWwoKTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGF1ZGlvIGdyb3VwIGNvbnRyb2xsZXIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgKi9cbiAgdmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgbm8gc291cmNlIGlzIHByb3ZpZGVkLlxuICAgIGlmICghby5zcmMgfHwgby5zcmMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBbiBhcnJheSBvZiBzb3VyY2UgZmlsZXMgbXVzdCBiZSBwYXNzZWQgd2l0aCBhbnkgbmV3IEhvd2wuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZi5pbml0KG8pO1xuICB9O1xuICBIb3dsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IEhvd2wgZ3JvdXAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2F1dG9wbGF5ID0gby5hdXRvcGxheSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2Zvcm1hdCA9ICh0eXBlb2Ygby5mb3JtYXQgIT09ICdzdHJpbmcnKSA/IG8uZm9ybWF0IDogW28uZm9ybWF0XTtcbiAgICAgIHNlbGYuX2h0bWw1ID0gby5odG1sNSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX211dGVkID0gby5tdXRlIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX3Bvb2wgPSBvLnBvb2wgfHwgNTtcbiAgICAgIHNlbGYuX3ByZWxvYWQgPSAodHlwZW9mIG8ucHJlbG9hZCA9PT0gJ2Jvb2xlYW4nKSA/IG8ucHJlbG9hZCA6IHRydWU7XG4gICAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG4gICAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICAgIHNlbGYuX3NyYyA9ICh0eXBlb2Ygby5zcmMgIT09ICdzdHJpbmcnKSA/IG8uc3JjIDogW28uc3JjXTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG4gICAgICBzZWxmLl94aHJXaXRoQ3JlZGVudGlhbHMgPSBvLnhocldpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcblxuICAgICAgLy8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gMDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZi5fZW5kVGltZXJzID0ge307XG4gICAgICBzZWxmLl9xdWV1ZSA9IFtdO1xuICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25lbmQgPSBvLm9uZW5kID8gW3tmbjogby5vbmVuZH1dIDogW107XG4gICAgICBzZWxmLl9vbmZhZGUgPSBvLm9uZmFkZSA/IFt7Zm46IG8ub25mYWRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZCA9IG8ub25sb2FkID8gW3tmbjogby5vbmxvYWR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkZXJyb3IgPSBvLm9ubG9hZGVycm9yID8gW3tmbjogby5vbmxvYWRlcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXllcnJvciA9IG8ub25wbGF5ZXJyb3IgPyBbe2ZuOiBvLm9ucGxheWVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe2ZuOiBvLm9ucGF1c2V9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe2ZuOiBvLm9ucGxheX1dIDogW107XG4gICAgICBzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7Zm46IG8ub25zdG9wfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tmbjogby5vbm11dGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tmbjogby5vbnZvbHVtZX1dIDogW107XG4gICAgICBzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7Zm46IG8ub25yYXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tmbjogby5vbnNlZWt9XSA6IFtdO1xuICAgICAgc2VsZi5fb251bmxvY2sgPSBvLm9udW5sb2NrID8gW3tmbjogby5vbnVubG9ja31dIDogW107XG4gICAgICBzZWxmLl9vbnJlc3VtZSA9IFtdO1xuXG4gICAgICAvLyBXZWIgQXVkaW8gb3IgSFRNTDUgQXVkaW8/XG4gICAgICBzZWxmLl93ZWJBdWRpbyA9IEhvd2xlci51c2luZ1dlYkF1ZGlvICYmICFzZWxmLl9odG1sNTtcblxuICAgICAgLy8gQXV0b21hdGljYWxseSB0cnkgdG8gZW5hYmxlIGF1ZGlvLlxuICAgICAgaWYgKHR5cGVvZiBIb3dsZXIuY3R4ICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4ICYmIEhvd2xlci5hdXRvVW5sb2NrKSB7XG4gICAgICAgIEhvd2xlci5fdW5sb2NrQXVkaW8oKTtcbiAgICAgIH1cblxuICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGlzIEhvd2wgZ3JvdXAgaW4gdGhlIGdsb2JhbCBjb250cm9sbGVyLlxuICAgICAgSG93bGVyLl9ob3dscy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBJZiB0aGV5IHNlbGVjdGVkIGF1dG9wbGF5LCBhZGQgYSBwbGF5IGV2ZW50IHRvIHRoZSBsb2FkIHF1ZXVlLlxuICAgICAgaWYgKHNlbGYuX2F1dG9wbGF5KSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdXJjZSBmaWxlIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICAgICAgaWYgKHNlbGYuX3ByZWxvYWQpIHtcbiAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBhdWRpbyBmaWxlLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBsb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB1cmwgPSBudWxsO1xuXG4gICAgICAvLyBJZiBubyBhdWRpbyBpcyBhdmFpbGFibGUsIHF1aXQgaW1tZWRpYXRlbHkuXG4gICAgICBpZiAoSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGF1ZGlvIHN1cHBvcnQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIG91ciBzb3VyY2UgaXMgaW4gYW4gYXJyYXkuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuX3NyYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VsZi5fc3JjID0gW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgc291cmNlcyBhbmQgcGljayB0aGUgZmlyc3Qgb25lIHRoYXQgaXMgY29tcGF0aWJsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zcmMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGV4dCwgc3RyO1xuXG4gICAgICAgIGlmIChzZWxmLl9mb3JtYXQgJiYgc2VsZi5fZm9ybWF0W2ldKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXh0ZW5zaW9uIHdhcyBzcGVjaWZpZWQsIHVzZSB0aGF0IGluc3RlYWQuXG4gICAgICAgICAgZXh0ID0gc2VsZi5fZm9ybWF0W2ldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291cmNlIGlzIGEgc3RyaW5nLlxuICAgICAgICAgIHN0ciA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdOb24tc3RyaW5nIGZvdW5kIGluIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMgLSBpZ25vcmluZy4nKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpbGUgZXh0ZW5zaW9uIGZyb20gdGhlIFVSTCBvciBiYXNlNjQgZGF0YSBVUkkuXG4gICAgICAgICAgZXh0ID0gL15kYXRhOmF1ZGlvXFwvKFteOyxdKyk7L2kuZXhlYyhzdHIpO1xuICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICBleHQgPSAvXFwuKFteLl0rKSQvLmV4ZWMoc3RyLnNwbGl0KCc/JywgMSlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IGV4dFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvZyBhIHdhcm5pbmcgaWYgbm8gZXh0ZW5zaW9uIHdhcyBmb3VuZC5cbiAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGZpbGUgZXh0ZW5zaW9uIHdhcyBmb3VuZC4gQ29uc2lkZXIgdXNpbmcgdGhlIFwiZm9ybWF0XCIgcHJvcGVydHkgb3Igc3BlY2lmeSBhbiBleHRlbnNpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGV4dGVuc2lvbiBpcyBhdmFpbGFibGUuXG4gICAgICAgIGlmIChleHQgJiYgSG93bGVyLmNvZGVjcyhleHQpKSB7XG4gICAgICAgICAgdXJsID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBjb2RlYyBzdXBwb3J0IGZvciBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX3NyYyA9IHVybDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAvLyBJZiB0aGUgaG9zdGluZyBwYWdlIGlzIEhUVFBTIGFuZCB0aGUgc291cmNlIGlzbid0LFxuICAgICAgLy8gZHJvcCBkb3duIHRvIEhUTUw1IEF1ZGlvIHRvIGF2b2lkIE1peGVkIENvbnRlbnQgZXJyb3JzLlxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgdXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cDonKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNvdW5kIG9iamVjdCBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxuICAgICAgbmV3IFNvdW5kKHNlbGYpO1xuXG4gICAgICAvLyBMb2FkIGFuZCBkZWNvZGUgdGhlIGF1ZGlvIGRhdGEgZm9yIHBsYXliYWNrLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIGxvYWRCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQbGF5IGEgc291bmQgb3IgcmVzdW1lIHByZXZpb3VzIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge1N0cmluZy9OdW1iZXJ9IHNwcml0ZSAgIFNwcml0ZSBuYW1lIGZvciBzcHJpdGUgcGxheWJhY2sgb3Igc291bmQgaWQgdG8gY29udGludWUgcHJldmlvdXMuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgIFNvdW5kIElELlxuICAgICAqL1xuICAgIHBsYXk6IGZ1bmN0aW9uKHNwcml0ZSwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpZCA9IG51bGw7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiBhIHNwcml0ZSwgc291bmQgaWQgb3Igbm90aGluZyB3YXMgcGFzc2VkXG4gICAgICBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBzcHJpdGU7XG4gICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdzdHJpbmcnICYmIHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAhc2VsZi5fc3ByaXRlW3Nwcml0ZV0pIHtcbiAgICAgICAgLy8gSWYgdGhlIHBhc3NlZCBzcHJpdGUgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZGVmYXVsdCBzb3VuZCBzcHJpdGUgKHBsYXlzIHRoZSBmdWxsIGF1ZGlvIGxlbmd0aCkuXG4gICAgICAgIHNwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgc2luZ2xlIHBhdXNlZCBzb3VuZCB0aGF0IGlzbid0IGVuZGVkLiBcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMsIHBsYXkgdGhhdCBzb3VuZC4gSWYgbm90LCBjb250aW51ZSBhcyB1c3VhbC4gIFxuICAgICAgICBpZiAoIXNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkICYmICFzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgICAgIG51bSsrO1xuICAgICAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1tpXS5faWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG51bSA9PT0gMSkge1xuICAgICAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNlbGVjdGVkIG5vZGUsIG9yIGdldCBvbmUgZnJvbSB0aGUgcG9vbC5cbiAgICAgIHZhciBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX2luYWN0aXZlU291bmQoKTtcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICBpZiAoIXNvdW5kKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIHNwcml0ZSBkZWZpbml0aW9uLlxuICAgICAgaWYgKGlkICYmICFzcHJpdGUpIHtcbiAgICAgICAgc3ByaXRlID0gc291bmQuX3Nwcml0ZSB8fCAnX19kZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdCB0byBnZXQgdGhlIGF1ZGlvJ3MgZHVyYXRpb24uXG4gICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gd2FpdCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgcnVuIGludG8gcmFjZSBjb25kaXRpb25zIHdpdGhcbiAgICAgIC8vIHRoZSBvcmRlciBvZiBmdW5jdGlvbiBjYWxscy5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgLy8gU2V0IHRoZSBzcHJpdGUgdmFsdWUgb24gdGhpcyBzb3VuZC5cbiAgICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgICAvLyBNYXJrIHRoaXMgc291bmQgYXMgbm90IGVuZGVkIGluIGNhc2UgYW5vdGhlciBzb3VuZCBpcyBwbGF5ZWQgYmVmb3JlIHRoaXMgb25lIGxvYWRzLlxuICAgICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBBZGQgdGhlIHNvdW5kIHRvIHRoZSBxdWV1ZSB0byBiZSBwbGF5ZWQgb24gbG9hZC5cbiAgICAgICAgdmFyIHNvdW5kSWQgPSBzb3VuZC5faWQ7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShzb3VuZElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzb3VuZElkO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBwbGF5IHRoZSBzb3VuZCBpZiBhbiBpZCB3YXMgcGFzc2VkIGFuZCBpdCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICBpZiAoaWQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgcGxheSBldmVudCwgaW4gb3JkZXIgdG8ga2VlcCBpdGVyYXRpbmcgdGhyb3VnaCBxdWV1ZS5cbiAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgncGxheScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBBdWRpb0NvbnRleHQgaXNuJ3Qgc3VzcGVuZGVkLCBhbmQgcmVzdW1lIGl0IGlmIGl0IGlzLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIEhvd2xlci5fYXV0b1Jlc3VtZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgaG93IGxvbmcgdG8gcGxheSBmb3IgYW5kIHdoZXJlIHRvIHN0YXJ0IHBsYXlpbmcuXG4gICAgICB2YXIgc2VlayA9IE1hdGgubWF4KDAsIHNvdW5kLl9zZWVrID4gMCA/IHNvdW5kLl9zZWVrIDogc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwKTtcbiAgICAgIHZhciBkdXJhdGlvbiA9IE1hdGgubWF4KDAsICgoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWspO1xuICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgIHZhciBzdGFydCA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMDtcbiAgICAgIHZhciBzdG9wID0gKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG5cbiAgICAgIC8vIE1hcmsgdGhlIHNvdW5kIGFzIGVuZGVkIGluc3RhbnRseSBzbyB0aGF0IHRoaXMgYXN5bmMgcGxheWJhY2tcbiAgICAgIC8vIGRvZXNuJ3QgZ2V0IGdyYWJiZWQgYnkgYW5vdGhlciBjYWxsIHRvIHBsYXkgd2hpbGUgdGhpcyBvbmUgd2FpdHMgdG8gc3RhcnQuXG4gICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBzb3VuZC5cbiAgICAgIHZhciBzZXRQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgIHNvdW5kLl9zdGFydCA9IHN0YXJ0O1xuICAgICAgICBzb3VuZC5fc3RvcCA9IHN0b3A7XG4gICAgICAgIHNvdW5kLl9sb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuICAgICAgfTtcblxuICAgICAgLy8gRW5kIHRoZSBzb3VuZCBpbnN0YW50bHkgaWYgc2VlayBpcyBhdCB0aGUgZW5kLlxuICAgICAgaWYgKHNlZWsgPj0gc3RvcCkge1xuICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQmVnaW4gdGhlIGFjdHVhbCBwbGF5YmFjay5cbiAgICAgIHZhciBub2RlID0gc291bmQuX25vZGU7XG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gV2ViIEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheVdlYkF1ZGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICBzZXRQYXJhbXMoKTtcbiAgICAgICAgICBzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcblxuICAgICAgICAgIC8vIFNldHVwIHRoZSBwbGF5YmFjayBwYXJhbXMuXG4gICAgICAgICAgdmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XG4gICAgICAgICAgbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAvLyBQbGF5IHRoZSBzb3VuZCB1c2luZyB0aGUgc3VwcG9ydGVkIG1ldGhvZC5cbiAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHRpbWVyIGlmIG5vbmUgaXMgcHJlc2VudC5cbiAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChIb3dsZXIuc3RhdGUgPT09ICdydW5uaW5nJykge1xuICAgICAgICAgIHBsYXlXZWJBdWRpbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhdWRpbyBjb250ZXh0IHRvIHJlc3VtZSBiZWZvcmUgcGxheWluZy5cbiAgICAgICAgICBzZWxmLm9uY2UoJ3Jlc3VtZScsIHBsYXlXZWJBdWRpbyk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIEhUTUw1IEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheUh0bWw1ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgbm9kZS5tdXRlZCA9IHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBIb3dsZXIuX211dGVkIHx8IG5vZGUubXV0ZWQ7XG4gICAgICAgICAgbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgIG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XG5cbiAgICAgICAgICAvLyBTb21lIGJyb3dzZXJzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhpcyBpcyBjYWxsZWQgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcGxheSA9IG5vZGUucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0IG9sZGVyIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBwcm9taXNlcywgYW5kIHRodXMgZG9uJ3QgaGF2ZSB0aGlzIGlzc3VlLlxuICAgICAgICAgICAgaWYgKHBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIChwbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgcGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAvLyBJbXBsZW1lbnRzIGEgbG9jayB0byBwcmV2ZW50IERPTUV4Y2VwdGlvbjogVGhlIHBsYXkoKSByZXF1ZXN0IHdhcyBpbnRlcnJ1cHRlZCBieSBhIGNhbGwgdG8gcGF1c2UoKS5cbiAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIC8vIFNldCBwYXJhbSB2YWx1ZXMgaW1tZWRpYXRlbHkuXG4gICAgICAgICAgICAgIHNldFBhcmFtcygpO1xuXG4gICAgICAgICAgICAgIC8vIFJlbGVhc2VzIHRoZSBsb2NrIGFuZCBleGVjdXRlcyBxdWV1ZWQgYWN0aW9ucy5cbiAgICAgICAgICAgICAgcGxheVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIG5vZGUuX3VubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgJ1BsYXliYWNrIHdhcyB1bmFibGUgdG8gc3RhcnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSBhbiBpc3N1ZSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xuXG4gICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZW5kZWQgYW5kIHBhdXNlZCB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICBzZXRQYXJhbXMoKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR0aW5nIHJhdGUgYmVmb3JlIHBsYXlpbmcgd29uJ3Qgd29yayBpbiBJRSwgc28gd2Ugc2V0IGl0IGFnYWluIGhlcmUuXG4gICAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgbm9kZSBpcyBzdGlsbCBwYXVzZWQsIHRoZW4gd2UgY2FuIGFzc3VtZSB0aGVyZSB3YXMgYSBwbGF5YmFjayBpc3N1ZS5cbiAgICAgICAgICAgIGlmIChub2RlLnBhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsICdQbGF5YmFjayB3YXMgdW5hYmxlIHRvIHN0YXJ0LiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgYW4gaXNzdWUgJyArXG4gICAgICAgICAgICAgICAgJ29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldHVwIHRoZSBlbmQgdGltZXIgb24gc3ByaXRlcyBvciBsaXN0ZW4gZm9yIHRoZSBlbmRlZCBldmVudC5cbiAgICAgICAgICAgIGlmIChzcHJpdGUgIT09ICdfX2RlZmF1bHQnIHx8IHNvdW5kLl9sb29wKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIEZpcmUgZW5kZWQgb24gdGhpcyBhdWRpbyBub2RlLlxuICAgICAgICAgICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcblxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIHN0cmVhbWluZyBhdWRpbywgbWFrZSBzdXJlIHRoZSBzcmMgaXMgc2V0IGFuZCBsb2FkIGFnYWluLlxuICAgICAgICBpZiAobm9kZS5zcmMgPT09ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQScpIHtcbiAgICAgICAgICBub2RlLnNyYyA9IHNlbGYuX3NyYztcbiAgICAgICAgICBub2RlLmxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBsYXkgaW1tZWRpYXRlbHkgaWYgcmVhZHksIG9yIHdhaXQgZm9yIHRoZSAnY2FucGxheXRocm91Z2gnZSB2ZW50LlxuICAgICAgICB2YXIgbG9hZGVkTm9SZWFkeVN0YXRlID0gKHdpbmRvdyAmJiB3aW5kb3cuZWplY3RhKSB8fCAoIW5vZGUucmVhZHlTdGF0ZSAmJiBIb3dsZXIuX25hdmlnYXRvci5pc0NvY29vbkpTKTtcbiAgICAgICAgaWYgKG5vZGUucmVhZHlTdGF0ZSA+PSAzIHx8IGxvYWRlZE5vUmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHBsYXlIdG1sNSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gQmVnaW4gcGxheWJhY2suXG4gICAgICAgICAgICBwbGF5SHRtbDUoKTtcblxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBwbGF5YmFjayBhbmQgc2F2ZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBwYXVzZSBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgcGF1c2U6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkIG9yIGEgcGxheSgpIHByb21pc2UgaXMgcGVuZGluZywgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHBhdXNlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwYXVzZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHBhdXNlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VsZi5zZWVrKGlkc1tpXSk7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmUgdGhlIHBhdXNlIGV2ZW50LCB1bmxlc3MgYHRydWVgIGlzIHBhc3NlZCBhcyB0aGUgMm5kIGFyZ3VtZW50LlxuICAgICAgICBpZiAoIWFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BhdXNlJywgc291bmQgPyBzb3VuZC5faWQgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcCBwbGF5YmFjayBhbmQgcmVzZXQgdG8gc3RhcnQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHN0b3AgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oaWQsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc3RvcCB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc3RvcCcsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgc3RvcHBlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VuZCdzIEF1ZGlvQnVmZmVyU291cmNlTm9kZSBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAgICAgICAgICBpZiAoc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcblxuICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbGl2ZSBzdHJlYW0sIHN0b3AgZG93bmxvYWQgb25jZSB0aGUgYXVkaW8gaXMgc3RvcHBlZC5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFyU291bmQoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRlL3VubXV0ZSBhIHNpbmdsZSBzb3VuZCBvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBTZXQgdG8gdHJ1ZSB0byBtdXRlIGFuZCBmYWxzZSB0byB1bm11dGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBUaGUgc291bmQgSUQgdG8gdXBkYXRlIChvbWl0IHRvIG11dGUvdW5tdXRlIGFsbCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBtdXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCd8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ211dGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLm11dGUobXV0ZWQsIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhcHBseWluZyBtdXRlL3VubXV0ZSB0byBhbGwgc291bmRzLCB1cGRhdGUgdGhlIGdyb3VwJ3MgdmFsdWUuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIG11dGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9tdXRlZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBtdXRlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgYWN0aXZlIGZhZGUgYW5kIHNldCB0aGUgdm9sdW1lIHRvIHRoZSBlbmQgdmFsdWUuXG4gICAgICAgICAgaWYgKHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoc291bmQuX2lkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc291bmQuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSBIb3dsZXIuX211dGVkID8gdHJ1ZSA6IG11dGVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ211dGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSB2b2x1bWUgb2YgdGhpcyBzb3VuZCBvciBvZiB0aGUgSG93bCBncm91cC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgdm9sdW1lKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2b2x1bWUgdmFsdWUuXG4gICAgICogICB2b2x1bWUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCB2b2x1bWUuXG4gICAgICogICB2b2x1bWUodm9sKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICB2b2x1bWUodm9sLCBpZCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciB2b2wsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ3JvdXBzJyB2b2x1bWUuXG4gICAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxIHx8IGFyZ3MubGVuZ3RoID09PSAyICYmIHR5cGVvZiBhcmdzWzFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgdm9sdW1lLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdm9sdW1lLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHZvbHVtZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCd8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICd2b2x1bWUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgdm9sdW1lLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICAgIGlmICghYXJnc1syXSkge1xuICAgICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZFtpXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSB2b2wgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3ZvbHVtZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX3NvdW5kc1swXTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3ZvbHVtZSA6IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGYWRlIGEgY3VycmVudGx5IHBsYXlpbmcgc291bmQgYmV0d2VlbiB0d28gdm9sdW1lcyAoaWYgbm8gaWQgaXMgcGFzc2VkLCBhbGwgc291bmRzIHdpbGwgZmFkZSkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgKG9taXQgdG8gZmFkZSBhbGwgc291bmRzKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGZhZGU6IGZ1bmN0aW9uKGZyb20sIHRvLCBsZW4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gZmFkZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnZmFkZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZmFkZShmcm9tLCB0bywgbGVuLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0by9mcm9tL2xlbiB2YWx1ZXMgYXJlIG51bWJlcnMuXG4gICAgICBmcm9tID0gcGFyc2VGbG9hdChmcm9tKTtcbiAgICAgIHRvID0gcGFyc2VGbG9hdCh0byk7XG4gICAgICBsZW4gPSBwYXJzZUZsb2F0KGxlbik7XG5cbiAgICAgIC8vIFNldCB0aGUgdm9sdW1lIHRvIHRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgIHNlbGYudm9sdW1lKGZyb20sIGlkKTtcblxuICAgICAgLy8gRmFkZSB0aGUgdm9sdW1lIG9mIG9uZSBvciBhbGwgc291bmRzLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbGluZWFyIGZhZGUgb3IgZmFsbCBiYWNrIHRvIHRpbWVvdXRzIHdpdGggSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFN0b3AgdGhlIHByZXZpb3VzIGZhZGUgaWYgbm8gc3ByaXRlIGlzIGJlaW5nIHVzZWQgKG90aGVyd2lzZSwgdm9sdW1lIGhhbmRsZXMgdGhpcykuXG4gICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvLCBsZXQgdGhlIG5hdGl2ZSBtZXRob2RzIGRvIHRoZSBhY3R1YWwgZmFkZS5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBjdXJyZW50VGltZSArIChsZW4gLyAxMDAwKTtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSBmcm9tO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShmcm9tLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRvLCBlbmQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX3N0YXJ0RmFkZUludGVydmFsKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZHNbaV0sIHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGludGVybmFsIGludGVydmFsIHRvIGZhZGUgYSBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHNvdW5kIFJlZmVyZW5jZSB0byBzb3VuZCB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaXNHcm91cCAgIElmIHRydWUsIHNldCB0aGUgdm9sdW1lIG9uIHRoZSBncm91cC5cbiAgICAgKi9cbiAgICBfc3RhcnRGYWRlSW50ZXJ2YWw6IGZ1bmN0aW9uKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZCwgaXNHcm91cCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHZvbCA9IGZyb207XG4gICAgICB2YXIgZGlmZiA9IHRvIC0gZnJvbTtcbiAgICAgIHZhciBzdGVwcyA9IE1hdGguYWJzKGRpZmYgLyAwLjAxKTtcbiAgICAgIHZhciBzdGVwTGVuID0gTWF0aC5tYXgoNCwgKHN0ZXBzID4gMCkgPyBsZW4gLyBzdGVwcyA6IGxlbik7XG4gICAgICB2YXIgbGFzdFRpY2sgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBTdG9yZSB0aGUgdmFsdWUgYmVpbmcgZmFkZWQgdG8uXG4gICAgICBzb3VuZC5fZmFkZVRvID0gdG87XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIHZhbHVlIG9uIGVhY2ggaW50ZXJ2YWwgdGljay5cbiAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBiYXNlZCBvbiB0aGUgdGltZSBzaW5jZSB0aGUgbGFzdCB0aWNrLlxuICAgICAgICB2YXIgdGljayA9IChEYXRlLm5vdygpIC0gbGFzdFRpY2spIC8gbGVuO1xuICAgICAgICBsYXN0VGljayA9IERhdGUubm93KCk7XG4gICAgICAgIHZvbCArPSBkaWZmICogdGljaztcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHZvbHVtZSBpcyBpbiB0aGUgcmlnaHQgYm91bmRzLlxuICAgICAgICB2b2wgPSBNYXRoLm1heCgwLCB2b2wpO1xuICAgICAgICB2b2wgPSBNYXRoLm1pbigxLCB2b2wpO1xuXG4gICAgICAgIC8vIFJvdW5kIHRvIHdpdGhpbiAyIGRlY2ltYWwgcG9pbnRzLlxuICAgICAgICB2b2wgPSBNYXRoLnJvdW5kKHZvbCAqIDEwMCkgLyAxMDA7XG5cbiAgICAgICAgLy8gQ2hhbmdlIHRoZSB2b2x1bWUuXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZC5faWQsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCdzIHZvbHVtZS5cbiAgICAgICAgaWYgKGlzR3JvdXApIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHRoZSBmYWRlIGlzIGNvbXBsZXRlLCBzdG9wIGl0IGFuZCBmaXJlIGV2ZW50LlxuICAgICAgICBpZiAoKHRvIDwgZnJvbSAmJiB2b2wgPD0gdG8pIHx8ICh0byA+IGZyb20gJiYgdm9sID49IHRvKSkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgIHNvdW5kLl9mYWRlVG8gPSBudWxsO1xuICAgICAgICAgIHNlbGYudm9sdW1lKHRvLCBzb3VuZC5faWQpO1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9LCBzdGVwTGVuKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgc3RvcHMgdGhlIGN1cnJlbnRseSBwbGF5aW5nIGZhZGUgd2hlblxuICAgICAqIGEgbmV3IGZhZGUgc3RhcnRzLCB2b2x1bWUgaXMgY2hhbmdlZCBvciB0aGUgc291bmQgaXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9zdG9wRmFkZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIHNlbGYudm9sdW1lKHNvdW5kLl9mYWRlVG8sIGlkKTtcbiAgICAgICAgc291bmQuX2ZhZGVUbyA9IG51bGw7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBpZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBsb29wIHBhcmFtZXRlciBvbiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBsb29wKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChsb29wKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIGZvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIGxvb3AobG9vcCwgaWQpIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvQm9vbGVhbn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgbG9vcCB2YWx1ZS5cbiAgICAgKi9cbiAgICBsb29wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxvb3AsIGlkLCBzb3VuZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgZm9yIGxvb3AgYW5kIGlkLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgZ3JvdSdzIGxvb3AgdmFsdWUuXG4gICAgICAgIHJldHVybiBzZWxmLl9sb29wO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICAgIHNlbGYuX2xvb3AgPSBsb29wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9sb29wIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBsb29wZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9sb29wID0gbG9vcDtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBwbGF5YmFjayByYXRlIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHJhdGUoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKHJhdGUpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICByYXRlKHJhdGUsIGlkKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICovXG4gICAgcmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciByYXRlLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCByYXRlIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyByYXRlIHZhbHVlLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBsYXliYWNrIHJhdGUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiByYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwbGF5YmFjayByYXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICdyYXRlJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYucmF0ZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCByYXRlLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3JhdGUgPSByYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIG91ciBwb3NpdGlvbiB3aGVuIHRoZSByYXRlIGNoYW5nZWQgYW5kIHVwZGF0ZSB0aGUgcGxheWJhY2tcbiAgICAgICAgICAgIC8vIHN0YXJ0IHBvc2l0aW9uIHNvIHdlIGNhbiBwcm9wZXJseSBhZGp1c3QgdGhlIHNlZWsgcG9zaXRpb24gZm9yIHRpbWUgZWxhcHNlZC5cbiAgICAgICAgICAgIGlmIChzZWxmLnBsYXlpbmcoaWRbaV0pKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBzZWxmLl93ZWJBdWRpbyA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgOiBzb3VuZC5fcGxheVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291bmQuX3JhdGUgPSByYXRlO1xuXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIHBsYXliYWNrIHJhdGUuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUocmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBsYXliYWNrUmF0ZSA9IHJhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0aW1lcnMuXG4gICAgICAgICAgICB2YXIgc2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAoKHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWs7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAgICAgICAvLyBTdGFydCBhIG5ldyBlbmQgdGltZXIgaWYgc291bmQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gfHwgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZFtpXSk7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgncmF0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9yYXRlIDogc2VsZi5fcmF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHNlZWsgcG9zaXRpb24gb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgc2VlaygpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoc2VlaykgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc291bmQgbm9kZS5cbiAgICAgKiAgIHNlZWsoc2VlaywgaWQpIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBzZWVrOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHNlZWssIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyBzZWVrIHBvc2l0aW9uLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCkge1xuICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIElELCBiYWlsIG91dC5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHNlZWsgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3NlZWsnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnNlZWsuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIHNlZWsgPj0gMCkge1xuICAgICAgICAgIC8vIFBhdXNlIHRoZSBzb3VuZCBhbmQgdXBkYXRlIHBvc2l0aW9uIGZvciByZXN0YXJ0aW5nIHBsYXliYWNrLlxuICAgICAgICAgIHZhciBwbGF5aW5nID0gc2VsZi5wbGF5aW5nKGlkKTtcbiAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTW92ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRyYWNrIGFuZCBjYW5jZWwgdGltZXIuXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWQpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWVrIHBvc2l0aW9uIGZvciBIVE1MNSBBdWRpby5cbiAgICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTZWVrIGFuZCBlbWl0IHdoZW4gcmVhZHkuXG4gICAgICAgICAgdmFyIHNlZWtBbmRFbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdzZWVrJywgaWQpO1xuXG4gICAgICAgICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBpZiB0aGUgc291bmQgd2FzIHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgICBzZWxmLnBsYXkoaWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgcGxheSBsb2NrIHRvIGJlIHVuc2V0IGJlZm9yZSBlbWl0dGluZyAoSFRNTDUgQXVkaW8pLlxuICAgICAgICAgIGlmIChwbGF5aW5nICYmICFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIGVtaXRTZWVrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICAgICAgICBzZWVrQW5kRW1pdCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZW1pdFNlZWssIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIHJlYWxUaW1lID0gc2VsZi5wbGF5aW5nKGlkKSA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgLSBzb3VuZC5fcGxheVN0YXJ0IDogMDtcbiAgICAgICAgICAgIHZhciByYXRlU2VlayA9IHNvdW5kLl9yYXRlU2VlayA/IHNvdW5kLl9yYXRlU2VlayAtIHNvdW5kLl9zZWVrIDogMDtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fc2VlayArIChyYXRlU2VlayArIHJlYWxUaW1lICogTWF0aC5hYnMoc291bmQuX3JhdGUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzcGVjaWZpYyBzb3VuZCBpcyBjdXJyZW50bHkgcGxheWluZyBvciBub3QgKGlmIGlkIGlzIHByb3ZpZGVkKSwgb3IgY2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBzb3VuZHMgaW4gdGhlIGdyb3VwIGlzIHBsYXlpbmcgb3Igbm90LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHRoZSB3aG9sZSBzb3VuZCBncm91cCBpcyBjaGVja2VkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgcGxheWluZyBhbmQgZmFsc2UgaWYgbm90LlxuICAgICAqL1xuICAgIHBsYXlpbmc6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIENoZWNrIHRoZSBwYXNzZWQgc291bmQgSUQgKGlmIGFueSkuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyAhc291bmQuX3BhdXNlZCA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UsIGxvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGVjayBpZiBhbnkgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5fc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhpcyBzb3VuZC4gUGFzc2luZyBhIHNvdW5kIGlkIHdpbGwgcmV0dXJuIHRoZSBzcHJpdGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCByZXR1cm4gZnVsbCBzb3VyY2UgZHVyYXRpb24uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBBdWRpbyBkdXJhdGlvbiBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGR1cmF0aW9uOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGR1cmF0aW9uID0gc2VsZi5fZHVyYXRpb247XG5cbiAgICAgIC8vIElmIHdlIHBhc3MgYW4gSUQsIGdldCB0aGUgc291bmQgYW5kIHJldHVybiB0aGUgc3ByaXRlIGxlbmd0aC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0gLyAxMDAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbG9hZGVkIHN0YXRlIG9mIHRoaXMgSG93bC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICd1bmxvYWRlZCcsICdsb2FkaW5nJywgJ2xvYWRlZCdcbiAgICAgKi9cbiAgICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSB0aGUgY3VycmVudCBIb3dsIG9iamVjdC5cbiAgICAgKiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgc3RvcCBhbGwgc291bmQgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgc291bmRzLlxuICAgICAgdmFyIHNvdW5kcyA9IHNlbGYuX3NvdW5kcztcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gU3RvcCB0aGUgc291bmQgaWYgaXQgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICAgIGlmICghc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICBzZWxmLnN0b3Aoc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNvdXJjZSBvciBkaXNjb25uZWN0LlxuICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBzb3VyY2UgdG8gMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cbiAgICAgICAgICBzZWxmLl9jbGVhclNvdW5kKHNvdW5kc1tpXS5fbm9kZSk7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzb3VuZHNbaV0uX2Vycm9yRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc291bmRzW2ldLl9sb2FkRm4sIGZhbHNlKTtcblxuICAgICAgICAgIC8vIFJlbGVhc2UgdGhlIEF1ZGlvIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sLlxuICAgICAgICAgIEhvd2xlci5fcmVsZWFzZUh0bWw1QXVkaW8oc291bmRzW2ldLl9ub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVtcHR5IG91dCBhbGwgb2YgdGhlIG5vZGVzLlxuICAgICAgICBkZWxldGUgc291bmRzW2ldLl9ub2RlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdGltZXJzIGFyZSBjbGVhcmVkIG91dC5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjIHx8IHNlbGYuX3NyYy5pbmRleE9mKEhvd2xlci5faG93bHNbaV0uX3NyYykgPj0gMCkge1xuICAgICAgICAgIHJlbUNhY2hlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlICYmIHJlbUNhY2hlKSB7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBnbG9iYWwgZXJyb3JzLlxuICAgICAgSG93bGVyLm5vQXVkaW8gPSBmYWxzZTtcblxuICAgICAgLy8gQ2xlYXIgb3V0IGBzZWxmYC5cbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZiA9IG51bGw7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBvbmNlICAoSU5URVJOQUwpIE1hcmtzIGV2ZW50IHRvIGZpcmUgb25seSBvbmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQsIG9uY2UpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKG9uY2UgPyB7aWQ6IGlkLCBmbjogZm4sIG9uY2U6IG9uY2V9IDoge2lkOiBpZCwgZm46IGZufSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuIENhbGwgd2l0aG91dCBwYXJhbWV0ZXJzIHRvIHJlbW92ZSBhbGwgZXZlbnRzLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byByZW1vdmUuIExlYXZlIGVtcHR5IHRvIHJlbW92ZSBhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSByZW1vdmUgZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gQWxsb3cgcGFzc2luZyBqdXN0IGFuIGV2ZW50IGFuZCBJRC5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gZm47XG4gICAgICAgIGZuID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGZuIHx8IGlkKSB7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgcmVtb3ZlIHRoZSBwYXNzZWQgZnVuY3Rpb24uXG4gICAgICAgIGZvciAoaT0wOyBpPGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBpc0lkID0gKGlkID09PSBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIGlmIChmbiA9PT0gZXZlbnRzW2ldLmZuICYmIGlzSWQgfHwgIWZuICYmIGlzSWQpIHtcbiAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgdGhpcyB0eXBlLlxuICAgICAgICBzZWxmWydfb24nICsgZXZlbnRdID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiBldmVyeSB0eXBlLlxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGYpO1xuICAgICAgICBmb3IgKGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKChrZXlzW2ldLmluZGV4T2YoJ19vbicpID09PSAwKSAmJiBBcnJheS5pc0FycmF5KHNlbGZba2V5c1tpXV0pKSB7XG4gICAgICAgICAgICBzZWxmW2tleXNbaV1dID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQgYW5kIHJlbW92ZSBpdCBvbmNlIGZpcmVkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uY2U6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5vbihldmVudCwgZm4sIGlkLCAxKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEVtaXQgYWxsIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgYW5kIHBhc3MgdGhlIHNvdW5kIGlkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFNvdW5kIElELlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbXNnICAgTWVzc2FnZSB0byBnbyB3aXRoIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBpZCwgbXNnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCBmaXJlIGFsbCBmdW5jdGlvbnMuXG4gICAgICBmb3IgKHZhciBpPWV2ZW50cy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIC8vIE9ubHkgZmlyZSB0aGUgbGlzdGVuZXIgaWYgdGhlIGNvcnJlY3QgSUQgaXMgdXNlZC5cbiAgICAgICAgaWYgKCFldmVudHNbaV0uaWQgfHwgZXZlbnRzW2ldLmlkID09PSBpZCB8fCBldmVudCA9PT0gJ2xvYWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiwgZXZlbnRzW2ldLmZuKSwgMCk7XG5cbiAgICAgICAgICAvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChldmVudHNbaV0ub25jZSkge1xuICAgICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIGV2ZW50c1tpXS5mbiwgZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGFzcyB0aGUgZXZlbnQgdHlwZSBpbnRvIGxvYWQgcXVldWUgc28gdGhhdCBpdCBjYW4gY29udGludWUgc3RlcHBpbmcuXG4gICAgICBzZWxmLl9sb2FkUXVldWUoZXZlbnQpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUXVldWUgb2YgYWN0aW9ucyBpbml0aWF0ZWQgYmVmb3JlIHRoZSBzb3VuZCBoYXMgbG9hZGVkLlxuICAgICAqIFRoZXNlIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLCB3aXRoIHRoZSBuZXh0IG9ubHkgZmlyaW5nXG4gICAgICogYWZ0ZXIgdGhlIHByZXZpb3VzIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcgKGV2ZW4gaWYgYXN5bmMgbGlrZSBwbGF5KS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9sb2FkUXVldWU6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB0YXNrID0gc2VsZi5fcXVldWVbMF07XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoaXMgdGFzayBpZiBhIG1hdGNoaW5nIGV2ZW50IHdhcyBwYXNzZWQuXG4gICAgICAgIGlmICh0YXNrLmV2ZW50ID09PSBldmVudCkge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHRhc2sgaWYgbm8gZXZlbnQgdHlwZSBpcyBwYXNzZWQuXG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICB0YXNrLmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHBsYXliYWNrIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VuZGVkOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGU7XG5cbiAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBJRSBhbmQgdGhlcmUgd2FzIG5ldHdvcmsgbGF0ZW5jeSB3ZSBtYXkgYmUgY2xpcHBpbmdcbiAgICAgIC8vIGF1ZGlvIGJlZm9yZSBpdCBjb21wbGV0ZXMgcGxheWluZy4gTGV0cyBjaGVjayB0aGUgbm9kZSB0byBtYWtlIHN1cmUgaXRcbiAgICAgIC8vIGJlbGlldmVzIGl0IGhhcyBjb21wbGV0ZWQsIGJlZm9yZSBlbmRpbmcgdGhlIHBsYXliYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUucGF1c2VkICYmICFzb3VuZC5fbm9kZS5lbmRlZCAmJiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA8IHNvdW5kLl9zdG9wKSB7XG4gICAgICAgIHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIDEwMCk7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xuICAgICAgdmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmQuX2lkKTtcblxuICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXN0YXJ0IHRoaXMgdGltZXIgaWYgb24gYSBXZWIgQXVkaW8gbG9vcC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICB2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmsgdGhlIG5vZGUgYXMgcGF1c2VkLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxuICAgICAgICBIb3dsZXIuX2F1dG9TdXNwZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdXNpbmcgYSBzcHJpdGUsIGVuZCB0aGUgdHJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGVuZCB0aW1lciBmb3IgYSBzb3VuZCBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhclRpbWVyOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkXSkge1xuICAgICAgICAvLyBDbGVhciB0aGUgdGltZW91dCBvciByZW1vdmUgdGhlIGVuZGVkIGxpc3RlbmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuX2VuZFRpbWVyc1tpZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZW5kVGltZXJzW2lkXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW2lkXSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzZWxmLl9lbmRUaW1lcnNbaWRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzb3VuZCBpZGVudGlmaWVkIGJ5IHRoaXMgSUQsIG9yIHJldHVybiBudWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIFNvdW5kIG9iamVjdCBvciBudWxsLlxuICAgICAqL1xuICAgIF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaWQgPT09IHNlbGYuX3NvdW5kc1tpXS5faWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW5hY3RpdmUgc291bmQgZnJvbSB0aGUgcG9vbCBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfSBTb3VuZCBwbGF5YmFjayBvYmplY3QuXG4gICAgICovXG4gICAgX2luYWN0aXZlU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLl9kcmFpbigpO1xuXG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgcmV0dXJuIG5ldyBTb3VuZChzZWxmKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRHJhaW4gZXhjZXNzIGluYWN0aXZlIHNvdW5kcyBmcm9tIHRoZSBwb29sLlxuICAgICAqL1xuICAgIF9kcmFpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xuICAgICAgdmFyIGNudCA9IDA7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBsZXNzIHNvdW5kcyB0aGFuIHRoZSBtYXggcG9vbCBzaXplLCB3ZSBhcmUgZG9uZS5cbiAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChpPXNlbGYuX3NvdW5kcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKGNudCA8PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzZWxmLl9zb3VuZHNbaV0uX25vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3NvdW5kc1tpXS5fbm9kZS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBzb3VuZHMgdW50aWwgd2UgaGF2ZSB0aGUgcG9vbCBzaXplLlxuICAgICAgICAgIHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgY250LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBJRCdzIGZyb20gdGhlIHNvdW5kcyBwb29sLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgT25seSByZXR1cm4gb25lIElEIGlmIG9uZSBpcyBwYXNzZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cbiAgICAgKi9cbiAgICBfZ2V0U291bmRJZHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlkcy5wdXNoKHNlbGYuX3NvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbaWRdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSA9IEhvd2xlci5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gY2FjaGVbc2VsZi5fc3JjXTtcblxuICAgICAgLy8gQ29ubmVjdCB0byB0aGUgY29ycmVjdCBub2RlLlxuICAgICAgaWYgKHNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGxvb3BpbmcgYW5kIHBsYXliYWNrIHJhdGUuXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xuICAgICAgaWYgKHNvdW5kLl9sb29wKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcCB8fCAwO1xuICAgICAgfVxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50IG1lbW9yeSBsZWFrcyBieSBjbGVhbmluZyB1cCB0aGUgYnVmZmVyIHNvdXJjZSBhZnRlciBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgU291bmQncyBhdWRpbyBub2RlIGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYW5CdWZmZXI6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpc0lPUyA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnZlbmRvci5pbmRleE9mKCdBcHBsZScpID49IDA7XG5cbiAgICAgIGlmIChIb3dsZXIuX3NjcmF0Y2hCdWZmZXIgJiYgbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2Uub25lbmRlZCA9IG51bGw7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIGlmIChpc0lPUykge1xuICAgICAgICAgIHRyeSB7IG5vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IEhvd2xlci5fc2NyYXRjaEJ1ZmZlcjsgfSBjYXRjaChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZSA9IG51bGw7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNvdXJjZSB0byBhIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcgKGV4Y2VwdCBpbiBJRSkuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIEF1ZGlvIG5vZGUgdG8gY2xlYXIuXG4gICAgICovXG4gICAgX2NsZWFyU291bmQ6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBjaGVja0lFID0gL01TSUUgfFRyaWRlbnRcXC8vLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIGlmICghY2hlY2tJRSkge1xuICAgICAgICBub2RlLnNyYyA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQSc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob3dsIFRoZSBIb3dsIHBhcmVudCBncm91cC5cbiAgICovXG4gIHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBob3dsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBTb3VuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIC8vIEFkZCBpdHNlbGYgdG8gdGhlIHBhcmVudCdzIHBvb2wuXG4gICAgICBwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBub2RlLlxuICAgICAgc2VsZi5jcmVhdGUoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcbiAgICAgIHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XG5cbiAgICAgIGlmIChwYXJlbnQuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxuICAgICAgICBzZWxmLl9ub2RlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBzZWxmLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLl9ub2RlLmNvbm5lY3QoSG93bGVyLm1hc3RlckdhaW4pO1xuICAgICAgfSBlbHNlIGlmICghSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgLy8gR2V0IGFuIHVubG9ja2VkIEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLlxuICAgICAgICBzZWxmLl9ub2RlID0gSG93bGVyLl9vYnRhaW5IdG1sNUF1ZGlvKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxuICAgICAgICBzZWxmLl9lcnJvckZuID0gc2VsZi5fZXJyb3JMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCB0byBsZXQgdXMga25vdyB0aGUgc291bmQgaXMgcmVhZHkuXG4gICAgICAgIHNlbGYuX2xvYWRGbiA9IHNlbGYuX2xvYWRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBuZXcgYXVkaW8gbm9kZS5cbiAgICAgICAgc2VsZi5fbm9kZS5zcmMgPSBwYXJlbnQuX3NyYztcbiAgICAgICAgc2VsZi5fbm9kZS5wcmVsb2FkID0gJ2F1dG8nO1xuICAgICAgICBzZWxmLl9ub2RlLnZvbHVtZSA9IHZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcblxuICAgICAgICAvLyBCZWdpbiBsb2FkaW5nIHRoZSBzb3VyY2UuXG4gICAgICAgIHNlbGYuX25vZGUubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZCB0byB0aGUgb3JpZ2luYWwgc3RhdGUgKGZvciByZWN5Y2xlKS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3JhdGVTZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgc28gdGhhdCBpdCBpc24ndCBjb25mdXNlZCB3aXRoIHRoZSBwcmV2aW91cyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlcnJvciBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZXJyb3JMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIEZpcmUgYW4gZXJyb3IgZXZlbnQgYW5kIHBhc3MgYmFjayB0aGUgY29kZS5cbiAgICAgIHNlbGYuX3BhcmVudC5fZW1pdCgnbG9hZGVycm9yJywgc2VsZi5faWQsIHNlbGYuX25vZGUuZXJyb3IgPyBzZWxmLl9ub2RlLmVycm9yLmNvZGUgOiAwKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gY2FucGxheXRocm91Z2ggbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2xvYWRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgICBpZiAoT2JqZWN0LmtleXMocGFyZW50Ll9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBwYXJlbnQuX2R1cmF0aW9uICogMTAwMF19O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Ll9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgcGFyZW50Ll9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICBwYXJlbnQuX2VtaXQoJ2xvYWQnKTtcbiAgICAgICAgcGFyZW50Ll9sb2FkUXVldWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBCdWZmZXIgYSBzb3VuZCBmcm9tIFVSTCwgRGF0YSBVUkkgb3IgY2FjaGUgYW5kIGRlY29kZSB0byBhdWRpbyBzb3VyY2UgKFdlYiBBdWRpbyBBUEkpLlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqL1xuICB2YXIgbG9hZEJ1ZmZlciA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICB2YXIgdXJsID0gc2VsZi5fc3JjO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIGNhY2hlZCBhbmQgdXNlIGl0IGluc3RlYWQuXG4gICAgaWYgKGNhY2hlW3VybF0pIHtcbiAgICAgIC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGNhY2hlW3VybF0uZHVyYXRpb247XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxuICAgICAgbG9hZFNvdW5kKHNlbGYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcbiAgICAgIC8vIERlY29kZSB0aGUgYmFzZTY0IGRhdGEgVVJJIHdpdGhvdXQgWEhSLCBzaW5jZSBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICB2YXIgZGF0YSA9IGF0b2IodXJsLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGF0YVZpZXdbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG5cbiAgICAgIGRlY29kZUF1ZGlvRGF0YShkYXRhVmlldy5idWZmZXIsIHNlbGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gc2VsZi5feGhyV2l0aENyZWRlbnRpYWxzO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBnZXQgYSBzdWNjZXNzZnVsIHJlc3BvbnNlIGJhY2suXG4gICAgICAgIHZhciBjb2RlID0gKHhoci5zdGF0dXMgKyAnJylbMF07XG4gICAgICAgIGlmIChjb2RlICE9PSAnMCcgJiYgY29kZSAhPT0gJzInICYmIGNvZGUgIT09ICczJykge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdGYWlsZWQgbG9hZGluZyBhdWRpbyBmaWxlIHdpdGggc3RhdHVzOiAnICsgeGhyLnN0YXR1cyArICcuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVjb2RlQXVkaW9EYXRhKHhoci5yZXNwb25zZSwgc2VsZik7XG4gICAgICB9O1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IsIHN3aXRjaCB0byBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICAgICAgZGVsZXRlIGNhY2hlW3VybF07XG4gICAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBzYWZlWGhyU2VuZCh4aHIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2VuZCB0aGUgWEhSIHJlcXVlc3Qgd3JhcHBlZCBpbiBhIHRyeS9jYXRjaC5cbiAgICogQHBhcmFtICB7T2JqZWN0fSB4aHIgWEhSIHRvIHNlbmQuXG4gICAqL1xuICB2YXIgc2FmZVhoclNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB4aHIub25lcnJvcigpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVjb2RlIGF1ZGlvIGRhdGEgZnJvbSBhbiBhcnJheSBidWZmZXIuXG4gICAqIEBwYXJhbSAge0FycmF5QnVmZmVyfSBhcnJheWJ1ZmZlciBUaGUgYXVkaW8gZGF0YS5cbiAgICogQHBhcmFtICB7SG93bH0gICAgICAgIHNlbGZcbiAgICovXG4gIHZhciBkZWNvZGVBdWRpb0RhdGEgPSBmdW5jdGlvbihhcnJheWJ1ZmZlciwgc2VsZikge1xuICAgIC8vIEZpcmUgYSBsb2FkIGVycm9yIGlmIHNvbWV0aGluZyBicm9rZS5cbiAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdEZWNvZGluZyBhdWRpbyBkYXRhIGZhaWxlZC4nKTtcbiAgICB9O1xuXG4gICAgLy8gTG9hZCB0aGUgc291bmQgb24gc3VjY2Vzcy5cbiAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgaWYgKGJ1ZmZlciAmJiBzZWxmLl9zb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjYWNoZVtzZWxmLl9zcmNdID0gYnVmZmVyO1xuICAgICAgICBsb2FkU291bmQoc2VsZiwgYnVmZmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIERlY29kZSB0aGUgYnVmZmVyIGludG8gYW4gYXVkaW8gc291cmNlLlxuICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlcikudGhlbihzdWNjZXNzKS5jYXRjaChlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyLCBzdWNjZXNzLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNvdW5kIGlzIG5vdyBsb2FkZWQsIHNvIGZpbmlzaCBzZXR0aW5nIGV2ZXJ5dGhpbmcgdXAgYW5kIGZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGJ1ZmZlciBUaGUgZGVjb2RlZCBidWZmZXIgc291bmQgc291cmNlLlxuICAgKi9cbiAgdmFyIGxvYWRTb3VuZCA9IGZ1bmN0aW9uKHNlbGYsIGJ1ZmZlcikge1xuICAgIC8vIFNldCB0aGUgZHVyYXRpb24uXG4gICAgaWYgKGJ1ZmZlciAmJiAhc2VsZi5fZHVyYXRpb24pIHtcbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gYnVmZmVyLmR1cmF0aW9uO1xuICAgIH1cblxuICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICBpZiAoT2JqZWN0LmtleXMoc2VsZi5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBzZWxmLl9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWQnKTtcbiAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIGF1ZGlvIGNvbnRleHQgd2hlbiBhdmFpbGFibGUsIG9yIHN3aXRjaCB0byBIVE1MNSBBdWRpbyBtb2RlLlxuICAgKi9cbiAgdmFyIHNldHVwQXVkaW9Db250ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhbHJlYWR5IGRldGVjdGVkIHRoYXQgV2ViIEF1ZGlvIGlzbid0IHN1cHBvcnRlZCwgZG9uJ3QgcnVuIHRoaXMgc3RlcCBhZ2Fpbi5cbiAgICBpZiAoIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbyBhbmQgc2V0dXAgdGhlIEF1ZGlvQ29udGV4dCBpZiB3ZSBhcmUuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgQXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IHdlYmtpdEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGF1ZGlvIGNvbnRleHQgY3JlYXRpb24gc3RpbGwgZmFpbGVkLCBzZXQgdXNpbmcgd2ViIGF1ZGlvIHRvIGZhbHNlLlxuICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhIHdlYnZpZXcgaXMgYmVpbmcgdXNlZCBvbiBpT1M4IG9yIGVhcmxpZXIgKHJhdGhlciB0aGFuIHRoZSBicm93c2VyKS5cbiAgICAvLyBJZiBpdCBpcywgZGlzYWJsZSBXZWIgQXVkaW8gYXMgaXQgY2F1c2VzIGNyYXNoaW5nLlxuICAgIHZhciBpT1MgPSAoL2lQKGhvbmV8b2R8YWQpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnBsYXRmb3JtKSk7XG4gICAgdmFyIGFwcFZlcnNpb24gPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XG4gICAgdmFyIHZlcnNpb24gPSBhcHBWZXJzaW9uID8gcGFyc2VJbnQoYXBwVmVyc2lvblsxXSwgMTApIDogbnVsbDtcbiAgICBpZiAoaU9TICYmIHZlcnNpb24gJiYgdmVyc2lvbiA8IDkpIHtcbiAgICAgIHZhciBzYWZhcmkgPSAvc2FmYXJpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5zdGFuZGFsb25lICYmICFzYWZhcmkgfHwgSG93bGVyLl9uYXZpZ2F0b3IgJiYgIUhvd2xlci5fbmF2aWdhdG9yLnN0YW5kYWxvbmUgJiYgIXNhZmFyaSkge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgZXhwb3NlIHRoZSBtYXN0ZXIgR2Fpbk5vZGUgd2hlbiB1c2luZyBXZWIgQXVkaW8gKHVzZWZ1bCBmb3IgcGx1Z2lucyBvciBhZHZhbmNlZCB1c2FnZSkuXG4gICAgaWYgKEhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICBIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoSG93bGVyLl9tdXRlZCA/IDAgOiBIb3dsZXIuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KEhvd2xlci5jdHguZGVzdGluYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFJlLXJ1biB0aGUgc2V0dXAgb24gSG93bGVyLlxuICAgIEhvd2xlci5fc2V0dXAoKTtcbiAgfTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQU1EIChBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24pIGxpYnJhcmllcyBzdWNoIGFzIHJlcXVpcmUuanMuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgSG93bGVyOiBIb3dsZXIsXG4gICAgICAgIEhvd2w6IEhvd2xcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQ29tbW9uSlMgbGlicmFyaWVzIHN1Y2ggYXMgYnJvd3NlcmlmeS5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGV4cG9ydHMuSG93bGVyID0gSG93bGVyO1xuICAgIGV4cG9ydHMuSG93bCA9IEhvd2w7XG4gIH1cblxuICAvLyBEZWZpbmUgZ2xvYmFsbHkgaW4gY2FzZSBBTUQgaXMgbm90IGF2YWlsYWJsZSBvciB1bnVzZWQuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgd2luZG93Lkhvd2xlciA9IEhvd2xlcjtcbiAgICB3aW5kb3cuSG93bCA9IEhvd2w7XG4gICAgd2luZG93LlNvdW5kID0gU291bmQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gQWRkIHRvIGdsb2JhbCBpbiBOb2RlLmpzIChmb3IgdGVzdGluZywgZXRjKS5cbiAgICBnbG9iYWwuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIGdsb2JhbC5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZ2xvYmFsLkhvd2wgPSBIb3dsO1xuICAgIGdsb2JhbC5Tb3VuZCA9IFNvdW5kO1xuICB9XG59KSgpO1xuXG5cbi8qIVxuICogIFNwYXRpYWwgUGx1Z2luIC0gQWRkcyBzdXBwb3J0IGZvciBzdGVyZW8gYW5kIDNEIGF1ZGlvIHdoZXJlIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQuXG4gKiAgXG4gKiAgaG93bGVyLmpzIHYyLjEuM1xuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDE5LCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBTZXR1cCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX3BvcyA9IFswLCAwLCAwXTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fb3JpZW50YXRpb24gPSBbMCwgMCwgLTEsIDAsIDEsIDBdO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byB1cGRhdGUgdGhlIHN0ZXJlbyBwYW5uaW5nIHBvc2l0aW9uIG9mIGFsbCBjdXJyZW50IEhvd2xzLlxuICAgKiBGdXR1cmUgSG93bHMgd2lsbCBub3QgdXNlIHRoaXMgdmFsdWUgdW5sZXNzIGV4cGxpY2l0bHkgc2V0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvTnVtYmVyfSAgICAgU2VsZiBvciBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgdXBkYXRlIHRoZWlyIHN0ZXJlbyBwYW5uaW5nLlxuICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgc2VsZi5faG93bHNbaV0uc3RlcmVvKHBhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciBpbiAzRCBjYXJ0ZXNpYW4gc3BhY2UuIFNvdW5kcyB1c2luZ1xuICAgKiAzRCBwb3NpdGlvbiB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBsaXN0ZW5lcidzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggVGhlIHgtcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgVGhlIHktcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogVGhlIHotcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgU2VsZiBvciBjdXJyZW50IGxpc3RlbmVyIHBvc2l0aW9uLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1syXSA6IHo7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblguc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1swXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWi5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0UG9zaXRpb24oc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBzcGFjZS5cbiAgICogQSBmcm9udCBhbmQgdXAgdmVjdG9yIG11c3QgYmUgcHJvdmlkZWQuIFRoZSBmcm9udCBpcyB0aGUgZGlyZWN0aW9uIHRoZVxuICAgKiBmYWNlIG9mIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZywgYW5kIHVwIGlzIHRoZSBkaXJlY3Rpb24gdGhlIHRvcCBvZiB0aGVcbiAgICogbGlzdGVuZXIgaXMgcG9pbnRpbmcuIFRodXMsIHRoZXNlIHZhbHVlcyBhcmUgZXhwZWN0ZWQgdG8gYmUgYXQgcmlnaHQgYW5nbGVzXG4gICAqIGZyb20gZWFjaCBvdGhlci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4VXAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geVVwIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHpVcCBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHZlY3RvcnMuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgdmFyIG9yID0gc2VsZi5fb3JpZW50YXRpb247XG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gb3JbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IG9yWzJdIDogejtcbiAgICB4VXAgPSAodHlwZW9mIHhVcCAhPT0gJ251bWJlcicpID8gb3JbM10gOiB4VXA7XG4gICAgeVVwID0gKHR5cGVvZiB5VXAgIT09ICdudW1iZXInKSA/IG9yWzRdIDogeVVwO1xuICAgIHpVcCA9ICh0eXBlb2YgelVwICE9PSAnbnVtYmVyJykgPyBvcls1XSA6IHpVcDtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHosIHhVcCwgeVVwLCB6VXBdO1xuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWC5zZXRUYXJnZXRBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFkuc2V0VGFyZ2V0QXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRaLnNldFRhcmdldEF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFguc2V0VGFyZ2V0QXRUaW1lKHhVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBZLnNldFRhcmdldEF0VGltZSh5VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWi5zZXRUYXJnZXRBdFRpbWUoelVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7SG93bH1cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gby5vcmllbnRhdGlvbiB8fCBbMSwgMCwgMF07XG4gICAgICBzZWxmLl9zdGVyZW8gPSBvLnN0ZXJlbyB8fCBudWxsO1xuICAgICAgc2VsZi5fcG9zID0gby5wb3MgfHwgbnVsbDtcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiAwLFxuICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6ICdpbnZlcnNlJyxcbiAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiAxMDAwMCxcbiAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiAnSFJURicsXG4gICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogMSxcbiAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiAxXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbnN0ZXJlbyA9IG8ub25zdGVyZW8gPyBbe2ZuOiBvLm9uc3RlcmVvfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucG9zID0gby5vbnBvcyA/IFt7Zm46IG8ub25wb3N9XSA6IFtdO1xuICAgICAgc2VsZi5fb25vcmllbnRhdGlvbiA9IG8ub25vcmllbnRhdGlvbiA/IFt7Zm46IG8ub25vcmllbnRhdGlvbn1dIDogW107XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSdzIGluaXQgZnVuY3Rpb24uXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgbyk7XG4gICAgfTtcbiAgfSkoSG93bC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHN0ZXJlbyBwYW5uaW5nIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgYWxsIGluIHRoZSBncm91cC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuLCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHN0ZXJlbyBwYW4gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3N0ZXJlbycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGVyZW8ocGFuLCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgUGFubmVyU3RlcmVvTm9kZSBzdXBwb3J0IGFuZCBmYWxsYmFjayB0byBQYW5uZXJOb2RlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgdmFyIHBhbm5lclR5cGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyID09PSAndW5kZWZpbmVkJykgPyAnc3BhdGlhbCcgOiAnc3RlcmVvJztcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9zdGVyZW8gPSBwYW47XG4gICAgICAgIHNlbGYuX3BvcyA9IFtwYW4sIDAsIDBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0ZXJlbztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHN0cmVvIHBhbm5pbmcgb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fc3RlcmVvID0gcGFuO1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbcGFuLCAwLCAwXTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGZhbGxpbmcgYmFjaywgbWFrZSBzdXJlIHRoZSBwYW5uaW5nTW9kZWwgaXMgZXF1YWxwb3dlci5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA9ICdlcXVhbHBvd2VyJztcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8ICFzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgcGFubmVyVHlwZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYW5uZXJUeXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShwYW4sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24ocGFuLCAwLCAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUocGFuLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdzdGVyZW8nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fc3RlcmVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIDNEIHNwYXRpYWwgcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBncm91cCByZWxhdGl2ZSB0byB0aGUgZ2xvYmFsIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgcG9zaXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcG9zaXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3BvcycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5wb3MoeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IDAgOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IC0wLjUgOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgcG9zaXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8IHNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdwb3MnLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fcG9zO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgYXVkaW8gc291cmNlIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gY29vcmRpbmF0ZVxuICAgKiBzcGFjZS4gRGVwZW5kaW5nIG9uIGhvdyBkaXJlY3Rpb24gdGhlIHNvdW5kIGlzLCBiYXNlZCBvbiB0aGUgYGNvbmVgIGF0dHJpYnV0ZXMsXG4gICAqIGEgc291bmQgcG9pbnRpbmcgYXdheSBmcm9tIHRoZSBsaXN0ZW5lciBjYW4gYmUgcXVpZXQgb3Igc2lsZW50LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgb3JpZW50YXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBvcmllbnRhdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnb3JpZW50YXRpb24nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYub3JpZW50YXRpb24oeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsyXSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgb3JpZW50YXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWC5zZXRWYWx1ZUF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdvcmllbnRhdGlvbicsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9vcmllbnRhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwYW5uZXIgbm9kZSdzIGF0dHJpYnV0ZXMgZm9yIGEgc291bmQgb3IgZ3JvdXAgb2Ygc291bmRzLlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxsIHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICogICBwYW5uZXJBdHRyKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihvKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgKiAgIHBhbm5lckF0dHIobywgaWQpIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgKlxuICAgKiAgIEF0dHJpYnV0ZXM6XG4gICAqICAgICBjb25lSW5uZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGluc2lkZSBvZiB3aGljaCB0aGVyZSB3aWxsIGJlIG5vIHZvbHVtZSByZWR1Y3Rpb24uXG4gICAqICAgICBjb25lT3V0ZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXG4gICAqICAgICAgICAgICAgICAgICAgICAgIG91dHNpZGUgb2Ygd2hpY2ggdGhlIHZvbHVtZSB3aWxsIGJlIHJlZHVjZWQgdG8gYSBjb25zdGFudCB2YWx1ZSBvZiBgY29uZU91dGVyR2FpbmAuXG4gICAqICAgICBjb25lT3V0ZXJHYWluIC0gKDAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgdGhlIGdhaW4gb3V0c2lkZSBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICBgY29uZU91dGVyQW5nbGVgLiBJdCBpcyBhIGxpbmVhciB2YWx1ZSBpbiB0aGUgcmFuZ2UgYFswLCAxXWAuXG4gICAqICAgICBkaXN0YW5jZU1vZGVsIC0gKCdpbnZlcnNlJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIGFsZ29yaXRobSB1c2VkIHRvIHJlZHVjZSB2b2x1bWUgYXMgYXVkaW8gbW92ZXMgYXdheSBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuIENhbiBiZSBgbGluZWFyYCwgYGludmVyc2VgIG9yIGBleHBvbmVudGlhbC5cbiAgICogICAgIG1heERpc3RhbmNlIC0gKDEwMDAwIGJ5IGRlZmF1bHQpIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGJldHdlZW4gc291cmNlIGFuZCBsaXN0ZW5lciwgYWZ0ZXIgd2hpY2ggdGhlIHZvbHVtZVxuICAgKiAgICAgICAgICAgICAgICAgICB3aWxsIG5vdCBiZSByZWR1Y2VkIGFueSBmdXJ0aGVyLlxuICAgKiAgICAgcmVmRGlzdGFuY2UgLSAoMSBieSBkZWZhdWx0KSBBIHJlZmVyZW5jZSBkaXN0YW5jZSBmb3IgcmVkdWNpbmcgdm9sdW1lIGFzIHNvdXJjZSBtb3ZlcyBmdXJ0aGVyIGZyb20gdGhlIGxpc3RlbmVyLlxuICAgKiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHNpbXBseSBhIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgaGFzIGEgZGlmZmVyZW50IGVmZmVjdCBkZXBlbmRpbmcgb24gd2hpY2ggbW9kZWxcbiAgICogICAgICAgICAgICAgICAgICAgaXMgdXNlZCBhbmQgdGhlIHNjYWxlIG9mIHlvdXIgY29vcmRpbmF0ZXMuIEdlbmVyYWxseSwgdm9sdW1lIHdpbGwgYmUgZXF1YWwgdG8gMSBhdCB0aGlzIGRpc3RhbmNlLlxuICAgKiAgICAgcm9sbG9mZkZhY3RvciAtICgxIGJ5IGRlZmF1bHQpIEhvdyBxdWlja2x5IHRoZSB2b2x1bWUgcmVkdWNlcyBhcyBzb3VyY2UgbW92ZXMgZnJvbSBsaXN0ZW5lci4gVGhpcyBpcyBzaW1wbHkgYVxuICAgKiAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgY2FuIGJlIGluIHRoZSByYW5nZSBvZiBgWzAsIDFdYCB3aXRoIGBsaW5lYXJgIGFuZCBgWzAsIOKInl1gXG4gICAqICAgICAgICAgICAgICAgICAgICAgd2l0aCBgaW52ZXJzZWAgYW5kIGBleHBvbmVudGlhbGAuXG4gICAqICAgICBwYW5uaW5nTW9kZWwgLSAoJ0hSVEYnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgd2hpY2ggc3BhdGlhbGl6YXRpb24gYWxnb3JpdGhtIGlzIHVzZWQgdG8gcG9zaXRpb24gYXVkaW8uXG4gICAqICAgICAgICAgICAgICAgICAgICAgQ2FuIGJlIGBIUlRGYCBvciBgZXF1YWxwb3dlcmAuXG4gICAqXG4gICAqIEByZXR1cm4ge0hvd2wvT2JqZWN0fSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBwYW5uZXIgYXR0cmlidXRlcy5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBhbm5lckF0dHIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIG8sIGlkLCBzb3VuZDtcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgIHJldHVybiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgbyA9IGFyZ3NbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91J3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKCFvLnBhbm5lckF0dHIpIHtcbiAgICAgICAgICAgIG8ucGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IG8uY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiBvLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgICBjb25lT3V0ZXJHYWluOiBvLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IG8uZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgICAgbWF4RGlzdGFuY2U6IG8ubWF4RGlzdGFuY2UsXG4gICAgICAgICAgICAgIHJlZkRpc3RhbmNlOiBvLnJlZkRpc3RhbmNlLFxuICAgICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiBvLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogby5wYW5uaW5nTW9kZWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSA6IHNlbGYuX2NvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlIDogc2VsZi5fY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW4gOiBzZWxmLl9jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8ucGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsIDogc2VsZi5fZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSA6IHNlbGYuX21heERpc3RhbmNlLFxuICAgICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnJlZkRpc3RhbmNlIDogc2VsZi5fcmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3IgOiBzZWxmLl9yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsIDogc2VsZi5fcGFubmluZ01vZGVsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3Bhbm5lckF0dHIgOiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgIG8gPSBhcmdzWzBdO1xuICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIHNwZWNpZmllZCBzb3VuZHMuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyB2YWx1ZXMgaW50byB0aGUgc291bmQuXG4gICAgICAgIHZhciBwYSA9IHNvdW5kLl9wYW5uZXJBdHRyO1xuICAgICAgICBwYSA9IHtcbiAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHBhLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogcGEuY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiBwYS5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogcGEuZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IHBhLm1heERpc3RhbmNlLFxuICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogcGEucmVmRGlzdGFuY2UsXG4gICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiBwYS5yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogcGEucGFubmluZ01vZGVsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYW5uZXIgdmFsdWVzIG9yIGNyZWF0ZSBhIG5ldyBwYW5uZXIgaWYgbm9uZSBleGlzdHMuXG4gICAgICAgIHZhciBwYW5uZXIgPSBzb3VuZC5fcGFubmVyO1xuICAgICAgICBpZiAocGFubmVyKSB7XG4gICAgICAgICAgcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gcGEuY29uZUlubmVyQW5nbGU7XG4gICAgICAgICAgcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gcGEuY29uZU91dGVyQW5nbGU7XG4gICAgICAgICAgcGFubmVyLmNvbmVPdXRlckdhaW4gPSBwYS5jb25lT3V0ZXJHYWluO1xuICAgICAgICAgIHBhbm5lci5kaXN0YW5jZU1vZGVsID0gcGEuZGlzdGFuY2VNb2RlbDtcbiAgICAgICAgICBwYW5uZXIubWF4RGlzdGFuY2UgPSBwYS5tYXhEaXN0YW5jZTtcbiAgICAgICAgICBwYW5uZXIucmVmRGlzdGFuY2UgPSBwYS5yZWZEaXN0YW5jZTtcbiAgICAgICAgICBwYW5uZXIucm9sbG9mZkZhY3RvciA9IHBhLnJvbGxvZmZGYWN0b3I7XG4gICAgICAgICAgcGFubmVyLnBhbm5pbmdNb2RlbCA9IHBhLnBhbm5pbmdNb2RlbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUuXG4gICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBTb3VuZCBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgU291bmQgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUgU291bmQncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgU291bmQucmVzZXQgbWV0aG9kIHRvIGNsZWFuIHVwIHByb3BlcnRpZXMgZnJvbSB0aGUgc3BhdGlhbCBwbHVnaW4uXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgU291bmQgcmVzZXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5yZXNldCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgc3BhdGlhbCBwbHVnaW4gcHJvcGVydGllcyBvbiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bhbm5lcikge1xuICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBwYW5uZXIuXG4gICAgICAgIHNlbGYuX3Bhbm5lci5kaXNjb25uZWN0KDApO1xuICAgICAgICBzZWxmLl9wYW5uZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBhcmVudC5fcmVmcmVzaEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29tcGxldGUgcmVzZXR0aW5nIG9mIHRoZSBzb3VuZC5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUucmVzZXQpO1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlIGFuZCBzYXZlIGl0IG9uIHRoZSBzb3VuZC5cbiAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFNwZWNpZmljIHNvdW5kIHRvIHNldHVwIHBhbm5pbmcgb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFR5cGUgb2YgcGFubmVyIHRvIGNyZWF0ZTogJ3N0ZXJlbycgb3IgJ3NwYXRpYWwnLlxuICAgKi9cbiAgdmFyIHNldHVwUGFubmVyID0gZnVuY3Rpb24oc291bmQsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSB8fCAnc3BhdGlhbCc7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBwYW5uZXIgbm9kZS5cbiAgICBpZiAodHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVQYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZUlubmVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyR2FpbiA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW47XG4gICAgICBzb3VuZC5fcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5tYXhEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLm1heERpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yZWZEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLnJlZkRpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFubmluZ01vZGVsID0gc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsO1xuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihzb3VuZC5fcG9zWzBdLCBzb3VuZC5fcG9zWzFdLCBzb3VuZC5fcG9zWzJdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oc291bmQuX29yaWVudGF0aW9uWzBdLCBzb3VuZC5fb3JpZW50YXRpb25bMV0sIHNvdW5kLl9vcmllbnRhdGlvblsyXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUoc291bmQuX3N0ZXJlbywgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgfVxuXG4gICAgc291bmQuX3Bhbm5lci5jb25uZWN0KHNvdW5kLl9ub2RlKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbnMuXG4gICAgaWYgKCFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICBzb3VuZC5fcGFyZW50LnBhdXNlKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQsIHRydWUpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJleHBvcnQgZW51bSBUaW1lciB7XHJcbiAgICBQb21vZG9ybyA9IFwiUG9tb2Rvcm9cIixcclxuICAgIExvbmdCcmVhayA9IFwiTG9uZyBCcmVha1wiLFxyXG4gICAgU2hvcnRCcmVhayA9IFwiU2hvcnQgQnJlYWtcIlxyXG59IiwiZXhwb3J0IGNsYXNzIFNldHRpbmdzIHtcclxuICAgIHN0YXRpYyBleGlzdHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzdG9yZShrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBsb2FkKGtleTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbG9hZEJvb2xlYW4oa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShTZXR0aW5ncy5sb2FkKGtleSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBleGlzdChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBTZXR0aW5ncy5sb2FkKGtleSkgIT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc3RvcmVJZk51bGwoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBpZiAoIVNldHRpbmdzLmV4aXN0KGtleSkpIHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBIb3dsIH0gZnJvbSAnaG93bGVyJztcclxuaW1wb3J0IHsgU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgVGltZXIgfSBmcm9tICcuL3RpbWVyJztcclxuXHJcbmNsYXNzIEJvbG9nbmVzZSB7XHJcbiAgICBhbGFybTogYW55O1xyXG4gICAgdGltZXI6IEVsZW1lbnQ7XHJcbiAgICB0aW1lclN1YjogRWxlbWVudDtcclxuICAgIHRpbWU6IG51bWJlcjtcclxuICAgIGludGVydmFsOiBOb2RlSlMuVGltZW91dDtcclxuXHJcbiAgICB0aW1lclR5cGU6IFRpbWVyO1xyXG4gICAgY291bnRlcjogbnVtYmVyO1xyXG4gICAgZGlzcGxheTogbnVtYmVyO1xyXG4gICAgc3ViX2RpczogbnVtYmVyO1xyXG4gICAgaXNfdGlja2luZzogYm9vbGVhbjtcclxuXHJcbiAgICBwb21vZG9yb0J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBsb25nQnJlYWtCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgc2hvcnRCcmVha0J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gICAgcG9tb2Rvcm9BdXRvQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwb21vZG9yb0JyZWFrc0lucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIGluZmluaXRlQWxhcm1DaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHRhYlRpbWVyQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBub3RpZmljYXRpb25DaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICBhbGFybU92ZXJsYXk6IEVsZW1lbnQ7XHJcblxyXG4gICAgbm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IodGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvd29ya2VyLmpzJykudGhlbihmdW5jdGlvbihyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCB3aXRoIHNjb3BlOiAnLCByZWdpc3RyYXRpb24uc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJywgZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGltZXJUeXBlID0gVGltZXIuUG9tb2Rvcm87XHJcbiAgICAgICAgdGhpcy50aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGltZXJcIik7XHJcbiAgICAgICAgdGhpcy50aW1lclN1YiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGltZXItc3ViXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnBvbW9kb3JvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb21vZG9yby1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5wb21vZG9yb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy51cGRhdGVUaW1lcihTZXR0aW5ncy5sb2FkKFwicG9tb2Rvcm9cIiksIFRpbWVyLlBvbW9kb3JvKSk7XHJcblxyXG4gICAgICAgIHRoaXMubG9uZ0JyZWFrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsLWJyZWFrLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLmxvbmdCcmVha0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy51cGRhdGVUaW1lcihTZXR0aW5ncy5sb2FkKFwibG9uZy1icmVha1wiKSwgVGltZXIuTG9uZ0JyZWFrKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvcnRCcmVha0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcy1icmVhay1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5zaG9ydEJyZWFrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnVwZGF0ZVRpbWVyKFNldHRpbmdzLmxvYWQoXCJzaG9ydC1icmVha1wiKSwgVGltZXIuU2hvcnRCcmVhaykpO1xyXG5cclxuICAgICAgICB0aGlzLnBvbW9kb3JvQXV0b0NoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb21vZG9yby1hdXRvLW1vZGVcIik7XHJcbiAgICAgICAgdGhpcy5wb21vZG9yb0F1dG9DaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJwb21vZG9yb19hdXRvXCIsIHRoaXMucG9tb2Rvcm9BdXRvQ2hlY2tib3guY2hlY2tlZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9CcmVha3NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9tb2Rvcm8tYnJlYWtzXCIpO1xyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9CcmVha3NJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJtYXhfYnJlYWtcIiwgdGhpcy5wb21vZG9yb0JyZWFrc0lucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJjdXJfYnJlYWtcIiwgMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9BdXRvQ2hlY2tib3guY2hlY2tlZCA9IEpTT04ucGFyc2UoU2V0dGluZ3MubG9hZChcInBvbW9kb3JvX2F1dG9cIikpO1xyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9CcmVha3NJbnB1dC52YWx1ZSA9IFNldHRpbmdzLmxvYWQoXCJtYXhfYnJlYWtcIik7XHJcblxyXG4gICAgICAgIHRoaXMuYWxhcm1PdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbGFybS1vdmVybGF5XCIpO1xyXG4gICAgICAgIHRoaXMuYWxhcm1PdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUNTUyhcIiN0ZXN0XCIsIFwiYm91bmNlT3V0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxhcm1PdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hbGFybS5mYWRlKFNldHRpbmdzLmxvYWQoXCJ2b2x1bWVcIiksIDAsIDIwMDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmluZmluaXRlQWxhcm1DaGVja2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5maW5pdGUtYWxhcm1cIik7XHJcbiAgICAgICAgdGhpcy5pbmZpbml0ZUFsYXJtQ2hlY2tib3guY2hlY2tlZCA9IFNldHRpbmdzLmxvYWRCb29sZWFuKFwiaW5maW5pdGUtYWxhcm1cIik7XHJcbiAgICAgICAgdGhpcy5pbmZpbml0ZUFsYXJtQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwiaW5maW5pdGUtYWxhcm1cIiwgdGhpcy5pbmZpbml0ZUFsYXJtQ2hlY2tib3guY2hlY2tlZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudGFiVGltZXJDaGVja2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFiLXRpbWVyXCIpO1xyXG4gICAgICAgIHRoaXMudGFiVGltZXJDaGVja2JveC5jaGVja2VkID0gU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJ0YWItdGltZXJcIik7XHJcbiAgICAgICAgdGhpcy50YWJUaW1lckNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZShcInRhYi10aW1lclwiLCB0aGlzLnRhYlRpbWVyQ2hlY2tib3guY2hlY2tlZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uQ2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VuYWJsZS1ub3RpZmljYXRpb25cIik7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25DaGVja2JveC5jaGVja2VkID0gU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJlbmFibGUtbm90aWZpY2F0aW9uXCIpO1xyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJlbmFibGUtbm90aWZpY2F0aW9uXCIsIHRoaXMubm90aWZpY2F0aW9uQ2hlY2tib3guY2hlY2tlZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3RhcnRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc3RhcnRUaW1lcigpKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0b3BcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc3RvcFRpbWVyKCkpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVzZXRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucmVzZXRUaW1lcigpKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzZXR0aW5nc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5vdmVybGF5RmFkZUluKCkpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2V0dGluZ3MtY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMub3ZlcmxheUZhZGVPdXQoKSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYy1wb21vZG9yb1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJwb21vZG9yb1wiLCAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjLXBvbW9kb3JvXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYy1sLWJyZWFrXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZShcImxvbmctYnJlYWtcIiwgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYy1sLWJyZWFrXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYy1zLWJyZWFrXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZShcInNob3J0LWJyZWFrXCIsICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Mtcy1icmVha1wiKSkudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2N1c3RvbS1hbGFybVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJhbGFybVwiLCAoPEhUTUxTZWxlY3RFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3VzdG9tLWFsYXJtXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdm9sdW1lLWNvbnRyb2xcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlKFwidm9sdW1lXCIsICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZvbHVtZS1jb250cm9sXCIpKS52YWx1ZSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbGFybS1wcmV2aWV3XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBIb3dsKHtcclxuICAgICAgICAgICAgICAgIHZvbHVtZTogU2V0dGluZ3MubG9hZChcInZvbHVtZVwiKSxcclxuICAgICAgICAgICAgICAgIGh0bWw1OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc3JjOiBbJ3NvdW5kcy8nICsgU2V0dGluZ3MubG9hZChcImFsYXJtXCIpICsgJy5tcDMnXVxyXG4gICAgICAgICAgICB9KS5wbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZXJcIikuZm9yRWFjaChlbGVtID0+IHRoaXMucmVnaXN0ZXJCdXR0b25oYW5kbGUoZWxlbSkpO1xyXG5cclxuICAgICAgICB0aGlzLmluZGV4QWxhcm1zKCk7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2V0dGluZ3MtYnV0dG9uXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogTE9BRCBTRVRUSU5HUyAqL1xyXG4gICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2MtcG9tb2Rvcm9cIikpLnZhbHVlID0gU2V0dGluZ3MubG9hZChcInBvbW9kb3JvXCIpO1xyXG4gICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2MtbC1icmVha1wiKSkudmFsdWUgPSBTZXR0aW5ncy5sb2FkKFwibG9uZy1icmVha1wiKTtcclxuICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjLXMtYnJlYWtcIikpLnZhbHVlID0gU2V0dGluZ3MubG9hZChcInNob3J0LWJyZWFrXCIpO1xyXG4gICAgICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZvbHVtZS1jb250cm9sXCIpKS52YWx1ZSA9IFNldHRpbmdzLmxvYWQoXCJ2b2x1bWVcIik7XHJcblxyXG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lcih0aGlzLnRpbWUsIFRpbWVyLlBvbW9kb3JvKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0VGltZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gdGhpcy50aW1lICogNjA7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gdGhpcy50aW1lO1xyXG4gICAgICAgIHRoaXMuc3ViX2RpcyA9IDA7XHJcbiAgICAgICAgdGhpcy5pc190aWNraW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRUaW1lcigpIHtcclxuICAgICAgICBsZXQgcHJlOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IHN1Yjogc3RyaW5nO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNfdGlja2luZykge1xyXG4gICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZChcImFsYXJtXCIpICE9IFwiLVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsYXJtID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICAgICAgICAgIHZvbHVtZTogU2V0dGluZ3MubG9hZChcInZvbHVtZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBodG1sNTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJpbmZpbml0ZS1hbGFybVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBzcmM6IFsnc291bmRzLycgKyBTZXR0aW5ncy5sb2FkKFwiYWxhcm1cIikgKyAnLm1wMyddXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pc190aWNraW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnRlciA9IHRoaXMuY291bnRlciAtIDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkgPSBNYXRoLmZsb29yKHRoaXMuY291bnRlciAvIDYwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJfZGlzID09IDApIHRoaXMuc3ViX2RpcyA9IDYwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJfZGlzLS07XHJcblxyXG4gICAgICAgICAgICAgICAgcHJlID0gdGhpcy5kaXNwbGF5LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBzdWIgPSB0aGlzLnN1Yl9kaXMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1Yl9kaXMgPCAxMCkgc3ViID0gXCIwXCIgKyB0aGlzLnN1Yl9kaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5IDwgMTApIHByZSA9IDAgKyB0aGlzLmRpc3BsYXkudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLnRleHRDb250ZW50ID0gcHJlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lclN1Yi50ZXh0Q29udGVudCA9IHN1YjtcclxuICAgICAgICAgICAgICAgIGlmIChTZXR0aW5ncy5sb2FkQm9vbGVhbihcInRhYi10aW1lclwiKSkgdGhpcy5yZWZyZXNoVGl0bGUocHJlICsgXCI6XCIgKyBzdWIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY291bnRlciA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxhcm0ucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTZXR0aW5ncy5sb2FkQm9vbGVhbihcImluZmluaXRlLWFsYXJtXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxhcm1PdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUNTUyhcIiNhbGFybS1vdmVybGF5XCIsIFwiYm91bmNlSW5Eb3duXCIsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFNldHRpbmdzLmxvYWRCb29sZWFuKFwicG9tb2Rvcm9fYXV0b1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50aW1lclR5cGUgPT0gVGltZXIuU2hvcnRCcmVhayB8fCB0aGlzLnRpbWVyVHlwZSA9PT0gVGltZXIuTG9uZ0JyZWFrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbW9kb3JvQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbWVyVHlwZSA9PSBUaW1lci5Qb21vZG9ybykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmUoXCJjdXJfYnJlYWtcIiwgK1NldHRpbmdzLmxvYWQoXCJjdXJfYnJlYWtcIikgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTZXR0aW5ncy5sb2FkKFwiY3VyX2JyZWFrXCIpIDwgU2V0dGluZ3MubG9hZChcIm1heF9icmVha1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvcnRCcmVha0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTZXR0aW5ncy5sb2FkKFwiY3VyX2JyZWFrXCIpID49IFNldHRpbmdzLmxvYWQoXCJtYXhfYnJlYWtcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5ncy5zdG9yZShcImN1cl9icmVha1wiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvbmdCcmVha0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VGl0bGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZEJvb2xlYW4oXCJlbmFibGUtbm90aWZpY2F0aW9uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0Tm90aWZpY2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDAwKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcFRpbWVyKCkge1xyXG4gICAgICAgIHRoaXMuaXNfdGlja2luZyA9IGZhbHNlO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRUaW1lcigpIHtcclxuICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZXIodGhpcy50aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUaW1lcih0OiBudW1iZXIsIHR5cGU/OiBUaW1lcikge1xyXG4gICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGltZSA9IHQ7XHJcbiAgICAgICAgdGhpcy50aW1lclR5cGUgPSB0eXBlO1xyXG5cclxuICAgICAgICB2YXIgdmFsdWUgPSB0LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHQgPCAxMCkgdmFsdWUgPSAwICsgdmFsdWU7XHJcbiAgICAgICAgdGhpcy50aW1lci50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudGltZXJTdWIudGV4dENvbnRlbnQgPSBcIjAwXCI7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFRpbWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJCdXR0b25oYW5kbGUoZWxlbWVudDogRWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aW1lclwiKS5mb3JFYWNoKGVsZW0gPT4gZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZhdGVkXCIpKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZhdGVkXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG92ZXJsYXlGYWRlSW4oKSB7XHJcbiAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5XCIpO1xyXG5cclxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGVDU1MoXCIjb3ZlcmxheVwiLCBcImJvdW5jZUluRG93blwiLCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBvdmVybGF5RmFkZU91dCgpIHtcclxuICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlcIik7XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbWF0ZUNTUyhcIiNvdmVybGF5XCIsIFwiYm91bmNlT3V0VXBcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzX3RpY2tpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ3VycmVudEFsYXJtKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGVDU1MoZWxlbWVudDogc3RyaW5nLCBhbmltYXRpb25OYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KVxyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCBhbmltYXRpb25OYW1lKVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVBbmltYXRpb25FbmQoKSB7XHJcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZWQnLCBhbmltYXRpb25OYW1lKVxyXG4gICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGhhbmRsZUFuaW1hdGlvbkVuZClcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIGNhbGxiYWNrKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgaGFuZGxlQW5pbWF0aW9uRW5kKVxyXG4gICAgfVxyXG5cclxuICAgIGluZGV4QWxhcm1zKCkge1xyXG4gICAgICAgIGNvbnN0IGFsYXJtcyA9IFtcIi1cIiwgXCJPd2xcIiwgXCJEdWNrXCJdO1xyXG4gICAgICAgIGFsYXJtcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICB2YXIgYWxyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgYWxyLnZhbHVlID0gYS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBhbHIudGV4dCA9IGE7XHJcblxyXG4gICAgICAgICAgICBpZiAoU2V0dGluZ3MubG9hZChcImFsYXJtXCIpID09PSBhLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgIGFsci5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICg8SFRNTFNlbGVjdEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdXN0b20tYWxhcm1cIikpLmFkZChhbHIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hDdXJyZW50QWxhcm0oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJUeXBlID09IFRpbWVyLlBvbW9kb3JvKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9tb2Rvcm9CdXR0b24uY2xpY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpbWVyVHlwZSA9PSBUaW1lci5Mb25nQnJlYWspIHtcclxuICAgICAgICAgICAgdGhpcy5sb25nQnJlYWtCdXR0b24uY2xpY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpbWVyVHlwZSA9PSBUaW1lci5TaG9ydEJyZWFrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvcnRCcmVha0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoVGl0bGUodGltZTogc3RyaW5nKSB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIkJvbG9nbmVzZVRpbWUgLSBcIiArIHRpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRUaXRsZSgpIHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiQm9sb2duZXNlVGltZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRTZXR0aW5ncygpIHtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcInBvbW9kb3JvXCIsIDI1KTtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcImxvbmctYnJlYWtcIiwgMjApO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwic2hvcnQtYnJlYWtcIiwgNSk7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJhbGFybVwiLCBcIm93bFwiKTtcclxuICAgICAgICBTZXR0aW5ncy5zdG9yZUlmTnVsbChcInZvbHVtZVwiLCAwLjUpO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwicG9tb2Rvcm9fYXV0b1wiLCBmYWxzZSk7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJtYXhfYnJlYWtcIiwgNCk7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJjdXJfYnJlYWtcIiwgMCk7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVJZk51bGwoXCJ0YWItdGltZXJcIiwgZmFsc2UpO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwiaW5maW5pdGUtYWxhcm1cIiwgZmFsc2UpO1xyXG4gICAgICAgIFNldHRpbmdzLnN0b3JlSWZOdWxsKFwiZW5hYmxlLW5vdGlmaWNhdGlvblwiLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0Tm90aWZpY2F0aW9uKCkge1xyXG4gICAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gXCJncmFudGVkXCIpIHtcclxuICAgICAgICAgICAgdmFyIHRpdGxlID0gdGhpcy50aW1lclR5cGUudG9TdHJpbmcoKSArIFwiIGZpbmlzaGVkIVwiO1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IFwiWW91ciB0aW1lciBoYXMgZmluaXNoZWQhXCI7XHJcbiAgICAgICAgICAgIGlmIChTZXR0aW5ncy5sb2FkQm9vbGVhbihcInBvbW9kb3JvX2F1dG9cIikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gK1NldHRpbmdzLmxvYWQoXCJjdXJfYnJlYWtcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9ICtTZXR0aW5ncy5sb2FkKFwibWF4X2JyZWFrXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBtIC0gYztcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gXCJKdXN0IFwiICsgZCArIFwiIG1vcmUgcG9tb2Rvcm8gc2Vzc2lvbihzKSB0aWxsIGEgbG9uZyBicmVhayFcIjtcclxuICAgICAgICAgICAgICAgIGlmIChkID09PSBtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IFwiWW91J3ZlIGVhcm5lZCB5b3UgYSBsb25nIGJyZWFrIVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24odGl0bGUsIHtcclxuICAgICAgICAgICAgICAgIGJvZHk6IHRleHQsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnYW5kcm9pZC1jaHJvbWUtMTkyeDE5Mi5wbmcnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgIG5ldyBCb2xvZ25lc2UoU2V0dGluZ3MubG9hZChcInBvbW9kb3JvXCIpKTtcclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==